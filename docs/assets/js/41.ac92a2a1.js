(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{479:function(e,t,s){"use strict";s.r(t);var a=s(31),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"containerization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#containerization"}},[e._v("#")]),e._v(" Containerization")]),e._v(" "),s("h2",{attrs:{id:"sources"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sources"}},[e._v("#")]),e._v(" Sources")]),e._v(" "),s("ul",[s("li",[e._v('"Kubernetes in Action (Second Edition)" book')])]),e._v(" "),s("h2",{attrs:{id:"namespaces"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#namespaces"}},[e._v("#")]),e._v(" Namespaces")]),e._v(" "),s("p",[e._v("Containers rely on namespaces in Linux. There are 7 kinds of namespaces:")]),e._v(" "),s("ul",[s("li",[e._v("mount")]),e._v(" "),s("li",[e._v("process ID")]),e._v(" "),s("li",[e._v("network")]),e._v(" "),s("li",[e._v("IPC")]),e._v(" "),s("li",[e._v("UNIX time-sharing system (UTS) - hostname, domain name")]),e._v(" "),s("li",[e._v("users, groups")])]),e._v(" "),s("p",[e._v("Each container is assigned with new namespaces of these types, creating an\nillusion for the process that it runs on a separate machine.")]),e._v(" "),s("p",[e._v("Diferent processes may also share some namespace types, but not others:")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/ozbsNFE.png",alt:""}})]),e._v(" "),s("h3",{attrs:{id:"networking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#networking"}},[e._v("#")]),e._v(" Networking")]),e._v(" "),s("p",[e._v("Here's how network namespacing works. When a new container is started, it\nreceives a set of interfaces that are placed in new namespace:")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://i.imgur.com/emBNfbw.png",alt:""}})]),e._v(" "),s("h2",{attrs:{id:"cgroups"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cgroups"}},[e._v("#")]),e._v(" cgroups")]),e._v(" "),s("p",[e._v("Another feature of Linux kernel. It allows to limit system resources assigned to\na process (CPU time, CPU cores, RAM, disk, network bandwidth).")]),e._v(" "),s("p",[e._v("When we're setting restrictions for Docker continers (e.g. "),s("code",[e._v('--memeory="100m"')]),e._v("),\nDocker really uses cgroups to limit the process.")]),e._v(" "),s("h2",{attrs:{id:"capabilities"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#capabilities"}},[e._v("#")]),e._v(" Capabilities")]),e._v(" "),s("p",[e._v("COntainers should not be able to invoke sys-calls that may break other\ncontainers (like changing time, or loading kernel modules).")]),e._v(" "),s("p",[e._v("Docker has "),s("code",[e._v("--privileged")]),e._v(" flag that gives special permissions to containers.\nIt's not ideal, because it gives ALL permissions.")]),e._v(" "),s("p",[e._v("Another option is to use Linux "),s("strong",[e._v("capabilities")]),e._v(". There are many of them giivng\ngranular access to specific operations.")]),e._v(" "),s("p",[e._v("Another option is "),s("strong",[e._v("seccomp")]),e._v(" (Secure Computing Mode). A custom profile (JSON\nfile) can be applied to a containers listing sys-calls that it can make.")]),e._v(" "),s("p",[e._v("Further hardening may be achieved with AppArmor or SELinux (MAC).")]),e._v(" "),s("h2",{attrs:{id:"standarization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#standarization"}},[e._v("#")]),e._v(" Standarization")]),e._v(" "),s("p",[e._v("Docker was the first container platform to make them popular. There's "),s("strong",[e._v("CRI")]),e._v("\n(Container Runtime Interface) that containers platform adhere to.")])])}),[],!1,null,null,null);t.default=r.exports}}]);