(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{590:function(e,s,t){"use strict";t.r(s);var n=t(22),r=Object(n.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"ingress"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ingress"}},[e._v("#")]),e._v(" Ingress")]),e._v(" "),t("p",[e._v("Ingresses add features on top of services. Some of the features:")]),e._v(" "),t("ul",[t("li",[e._v("supporting L7 hosts")]),e._v(" "),t("li",[e._v("matching paths")]),e._v(" "),t("li",[e._v("TLS termination")]),e._v(" "),t("li",[e._v("session affinity")]),e._v(" "),t("li",[e._v("auth (e.g. OAuthProxy)")]),e._v(" "),t("li",[e._v("CORS")]),e._v(" "),t("li",[e._v("many other...")])]),e._v(" "),t("p",[e._v("Ingress is a way for external users to access services within K8s. Ingress\nconsists of:")]),e._v(" "),t("ul",[t("li",[t("em",[e._v("Ingress")]),e._v(" object")]),e._v(" "),t("li",[e._v("L7 load balancer (reverse proxy)")]),e._v(" "),t("li",[e._v("Ingress Controller")])]),e._v(" "),t("p",[e._v("Some ingress implementations require services to by of type "),t("em",[e._v("ClusterIp")]),e._v(". Some\nothers require "),t("em",[e._v("NodePort")]),e._v(".")]),e._v(" "),t("p",[e._v("Some ingress implementations use separate (external) IP addresses per ingress\nobject. Some others share the IP address for many ingress objects.")]),e._v(" "),t("p",[e._v("Most ingress implementations send requests to pods directly, skipping services\n(for performance?).")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Nginx")]),e._v(" "),t("p",[e._v("Some of the most popular implementations of ingress use nginx. There are two\nimplementations that use nginx: made by the K8s team, and another one made by\nthe nginx team.")])]),e._v(" "),t("p",[e._v("Most of the features of ingresses is configured via annotations. That's due to\nvariety of ingress implementations available on the market, each with different\nunique capabilities. It would be difficult to standardize the set of features\nthat ingress should have, so the configuration exposed via Ingress object is\nminimal. Additionally, some ingresses are configured via separate K8s objects.")]),e._v(" "),t("h2",{attrs:{id:"default-backend"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#default-backend"}},[e._v("#")]),e._v(" Default Backend")]),e._v(" "),t("p",[e._v("If no ingress rules match the request, normally a 404 is returned. We can specify\na defualt backend service where unmatched requests will be sent to.")]),e._v(" "),t("h2",{attrs:{id:"multiple-ingress-controllers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multiple-ingress-controllers"}},[e._v("#")]),e._v(" Multiple Ingress Controllers")]),e._v(" "),t("p",[e._v("We could have multiple ingress controllers installed on our cluster. In such a\ncase, the ingress objects need to specify which controller should be used.\nOriginally, it was done via the "),t("code",[e._v("kubernetes.io/ingress.class")]),e._v(" annotation. Some\ningress implementations still use it. It's more recommended to rely on\n"),t("code",[e._v("ingressClass")]),e._v(". Different ingress controllers provide different classes.\nInstalling a controller should automatically add a new "),t("code",[e._v("ingressClass")]),e._v(" object to\nthe cluster. We can list available classes with "),t("code",[e._v("k get ingressclasses")]),e._v(".")]),e._v(" "),t("p",[e._v("We can specify which controller to use via "),t("code",[e._v("spec.ingressClassName")]),e._v(" on the\ningress objects.")]),e._v(" "),t("p",[e._v("We are able to specify the default ingress class to be used by our ingress\nobjects by setting an appropriate annotation on the selected class.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Custom ignress classes")]),e._v(" "),t("p",[e._v("We can create our own ingress classes that could refer to any installed ingress\ncontrollers. Some controllers allow specifying various parametes, and we could\nuse our custom classes to provide these parameters.")]),e._v(" "),t("p",[e._v("With that approach we could reuse the specified config with multiple ingress\nobjects by refering to our custom ingress class from them.")])])])}),[],!1,null,null,null);s.default=r.exports}}]);