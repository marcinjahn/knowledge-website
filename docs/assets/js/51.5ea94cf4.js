(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{488:function(e,t,a){"use strict";a.r(t);var s=a(31),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"asp-net-core-overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#asp-net-core-overview"}},[e._v("#")]),e._v(" ASP.NET Core Overview")]),e._v(" "),a("p",[e._v("ASP.NET Core allows to build the following main kinds of applications:")]),e._v(" "),a("ul",[a("li",[e._v("Razor Pages")]),e._v(" "),a("li",[e._v("Web APIs")])]),e._v(" "),a("p",[e._v("Both these application kinds use the ASP.NET Core MVC framework behind the\nscenes.")]),e._v(" "),a("p",[e._v("A common thing is the "),a("code",[e._v("HttpContext")]),e._v(" object, which flows through the middleware\ncontaining all the infromation about the request, with potential additions from\nthe middleware. The response is also added to the "),a("code",[e._v("HttpContext")]),e._v(" object.")]),e._v(" "),a("h2",{attrs:{id:"actionresult"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#actionresult"}},[e._v("#")]),e._v(" ActionResult")]),e._v(" "),a("p",[e._v("The following results can be returned from controllers:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("PageResult")]),e._v(" - HTML for a Razor Pages framework page")]),e._v(" "),a("li",[a("code",[e._v("ViewResult")]),e._v(" - HTML for an MVC framework controller")]),e._v(" "),a("li",[a("code",[e._v("RedirectToPageResult")]),e._v(" - returns 302")]),e._v(" "),a("li",[a("code",[e._v("RedirectResult")]),e._v(" - sends 302, but the target does not have to be a Razor Page")]),e._v(" "),a("li",[a("code",[e._v("FileResult")]),e._v(" - returns a file")]),e._v(" "),a("li",[a("code",[e._v("ContentResult")]),e._v(" - returns a provided string (not to be used with Razor Pages)")]),e._v(" "),a("li",[a("code",[e._v("StatusCodeResult")]),e._v(" - specified HTTP status code, optionally with some payload\n(not to be used with Razor Pages)")]),e._v(" "),a("li",[a("code",[e._v("NotFoundResult")]),e._v(" - 404")])]),e._v(" "),a("p",[e._v("Some of the results have helper methods (such as "),a("code",[e._v("Page()")]),e._v(" instead of "),a("code",[e._v("return new PageResult()")]),e._v(");")]),e._v(" "),a("h2",{attrs:{id:"middleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware"}},[e._v("#")]),e._v(" Middleware")]),e._v(" "),a("p",[e._v("The "),a("strong",[e._v("middleware")]),e._v(" are C# classes or functions that handle HTTP requests and\nresponses. They are chained together, forming a pipeline, similarly to how\n"),a("code",[e._v("HTTPHandler")]),e._v("s can be chained in an "),a("code",[e._v("HTTPClient")]),e._v(".")]),e._v(" "),a("p",[e._v("All the requests pass through the middleware, so it's the right place to handle\ncommon cross-cutting concerns. The middleware can process the request/response,\noptionally modify it and pass on in the pipeline.")]),e._v(" "),a("p",[e._v("Requests/responses travel through the pipeline as "),a("code",[e._v("HttpContext")]),e._v(" objects that can\nbe modified.")]),e._v(" "),a("p",[e._v("Middleware components should be small and handle just one responsibility.")]),e._v(" "),a("p",[e._v("Middleware can short-circuit the request causing it not to be passed to the\nmiddleware parts behind it. If some middleware receives a request, it will also\nreceive a response going back.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("404")]),e._v(" "),a("p",[e._v("ASP.NET Core adds a middleware returning "),a("code",[e._v("404")]),e._v(" in the end of the pipeline.\nIf none of our middleware handles the requests, that "),a("code",[e._v("404")]),e._v(" one handles it.")])]),e._v(" "),a("p",[e._v("Middleware is added to the "),a("code",[e._v("WebApplication")]),e._v(" (.NET 6) or to the\n"),a("code",[e._v("IApplicationBuilder")]),e._v(" (prior to .NET 6).")]),e._v(" "),a("p",[e._v("In general, middleware is added like this:")]),e._v(" "),a("div",{staticClass:"language-cs extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cs"}},[a("code",[e._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token generic-method"}},[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("UseMiddleware")]),a("span",{pre:!0,attrs:{class:"token generic class-name"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("WelcomePageMiddleware"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("p",[e._v("Often, middleware comess with extension methods that are more readable:")]),e._v(" "),a("div",{staticClass:"language-cs extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cs"}},[a("code",[e._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("UseWelcomePage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// calls the above behind the scenes")]),e._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Use")]),e._v(" "),a("p",[e._v("Methods starting with "),a("code",[e._v("Use")]),e._v(" are a convention for adding middleware.")])]),e._v(" "),a("h3",{attrs:{id:"errors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#errors"}},[e._v("#")]),e._v(" Errors")]),e._v(" "),a("p",[e._v("The error handling should be added to the pipeline as early as possible to\nhandle all errors. Useful middleware:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("DeveloperExceptionPageMiddleware")]),e._v(" - displays stacktrace of an exception")]),e._v(" "),a("li",[a("code",[e._v("ExceptionHandlerMiddleware")]),e._v(" - alternative to the above, more suitable for\nproduction")]),e._v(" "),a("li",[a("code",[e._v("StatusCodePagesMiddleware")]),e._v(" - transforms raw error codes into some meaningful\nerror-pages, it can redirect to different pages for different errors. It\nexecutes only if response payload is empty, making it possible to use it\ntogether with the "),a("code",[e._v("ExceptionHandlerMiddleware")]),e._v(".")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Error Loop")]),e._v(" "),a("p",[e._v("In case of an exception, the "),a("code",[e._v("ExceptionHandlerMiddleware")]),e._v(" reexecutes the\nmiddleware pipeline by redirecting to "),a("code",[e._v("/Error")]),e._v(" (redirecting internally, not with\n30X). If during that redirection another exeption is thrown, a raw error will be\nreturned to the user.")])]),e._v(" "),a("h3",{attrs:{id:"endpointmiddleware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#endpointmiddleware"}},[e._v("#")]),e._v(" EndpointMiddleware")]),e._v(" "),a("p",[e._v("The acteual content is generated by various "),a("code",[e._v("EndpointMiddleware")]),e._v(".")])])}),[],!1,null,null,null);t.default=o.exports}}]);