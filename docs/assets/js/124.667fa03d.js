(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{636:function(e,t,a){"use strict";a.r(t);var s=a(22),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"organizing-objects"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#organizing-objects"}},[e._v("#")]),e._v(" Organizing Objects")]),e._v(" "),a("p",[e._v("K8s has "),a("code",[e._v("Namespaces")]),e._v(" and "),a("code",[e._v("Labels")]),e._v(" for organizing objects.")]),e._v(" "),a("h2",{attrs:{id:"namespaces"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#namespaces"}},[e._v("#")]),e._v(" Namespaces")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/fwwV6OV.png",alt:""}})]),e._v(" "),a("p",[e._v("Different teams can deploy their objects in separate namespaces. Each team gets\naccess to one or more namespaces. Objects in different namespaces can use the\nsama names.")]),e._v(" "),a("p",[e._v("Not all object types are namespaced. E.g, Nodes, PersistentVolumes,\nStorageClasses, Namespaces are not namespaced. They are cluster-scoped.")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/A7IYoPG.png",alt:""}})]),e._v(" "),a("p",[e._v("Deleting a namespace automatically deletes all objects in it.")]),e._v(" "),a("h3",{attrs:{id:"default-namespaces"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#default-namespaces"}},[e._v("#")]),e._v(" Default Namespaces")]),e._v(" "),a("p",[e._v("Each K8s cluster contains a few predefined namespaces. Those prefixed with\n"),a("code",[e._v("kube-")]),e._v(" are K8s system namespaces.")]),e._v(" "),a("h3",{attrs:{id:"isolation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#isolation"}},[e._v("#")]),e._v(" Isolation")]),e._v(" "),a("p",[e._v("Other than allowing names of objects to be the same in different namespaces,\nthere is no isolation:")]),e._v(" "),a("ul",[a("li",[e._v("pods from different namespaces can run on the same node")]),e._v(" "),a("li",[e._v("by default there is no network isolation - a pod from one ns can talk to pods\nfrom another ns. Isolation can be configured using a "),a("code",[e._v("NetworkPolicy")]),e._v(" object.")])]),e._v(" "),a("p",[e._v("Namespaces should not be used to separate production workloads from development\nenvironments. It's better to use separate clusters.")]),e._v(" "),a("h2",{attrs:{id:"labels"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#labels"}},[e._v("#")]),e._v(" Labels")]),e._v(" "),a("p",[e._v("Labels are key-value pairs that can be added to any object to decorate it with\nsome meta data. Labels are placed in "),a("code",[e._v("metadata.labels")]),e._v(" section of YAML.")]),e._v(" "),a("p",[e._v("K8s uses labels on its own. For example Node objects have "),a("code",[e._v("kubernetes/io.arch")]),e._v("\nlabels indicating the CPU architecture of a node. K8s does not usually add\nlabels to objects that users create.")]),e._v(" "),a("p",[e._v("Labels have various limitations in length, and accepted characters of keys and\nvalues.")]),e._v(" "),a("h3",{attrs:{id:"querying"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#querying"}},[e._v("#")]),e._v(" Querying")]),e._v(" "),a("p",[e._v("Objects can be queried by the values of their labels. Operators:")]),e._v(" "),a("ul",[a("li",[e._v("=")]),e._v(" "),a("li",[e._v("!=")]),e._v(" "),a("li",[e._v("in")]),e._v(" "),a("li",[e._v("notin")])]),e._v(" "),a("p",[e._v("Kubectl examples:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("k get pods -l app=webapp")])]),e._v(" "),a("li",[a("code",[e._v("k get pods -l app=webapp,rel=canary")])]),e._v(" "),a("li",[a("code",[e._v("k get pods -l 'app in (quiz, quote)'")])]),e._v(" "),a("li",[a("code",[e._v("k delete pod -l rel=canary")])])]),e._v(" "),a("h3",{attrs:{id:"selectors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selectors"}},[e._v("#")]),e._v(" Selectors")]),e._v(" "),a("p",[e._v("Some objects accept label selections. For example in the YAML of a pod, under\n"),a("code",[e._v("spec.nodeSelector")]),e._v(" we can specify labels and their values that we required on a\nnode for the pod to run on it. It supports only the "),a("code",[e._v("=")]),e._v(" operator. Other objects\ndo support other operators.")]),e._v(" "),a("p",[e._v("Similarly, a PersistentVolumeClaim may define required labels of the\nPersistentVolume that it will attach to. The YAML path is\n"),a("code",[e._v("spec.selector.matchLabels")]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"field-selectors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#field-selectors"}},[e._v("#")]),e._v(" Field Selectors")]),e._v(" "),a("p",[e._v("Similarly there are also "),a("strong",[e._v("field selectors")]),e._v(". They can be used with kubectl (or\nK8s API) to filter objects based on some object properties. Not all properties\nare supported with selectors. For example:")]),e._v(" "),a("p",[a("code",[e._v("k get pods --field-selector spec.nodeName=kind-worker-2")]),e._v(" "),a("code",[e._v("kubectl get po --field-selector status.phase!=Running --all-namespaces")])]),e._v(" "),a("h2",{attrs:{id:"annotations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#annotations"}},[e._v("#")]),e._v(" Annotations")]),e._v(" "),a("p",[e._v("They are similar to labels. They have less limitations regarding length and\ncontent (e.g. annotation can have 256KB and it can contain any character). They\ncan't be used to filter objects. They are placed in "),a("code",[e._v("metadata.annotations")]),e._v(".")]),e._v(" "),a("p",[e._v("Various controllers add annotations to objects if the information can't be\nstored in other fields.")]),e._v(" "),a("p",[e._v("Sometimes, before changing structure of objects, annotations are used as a\ntesting ground for K8s. After some time, annotation gets deprecated, and a new\nfield is introduced in an object. After another few releases annotation support\nis removed entirely.")]),e._v(" "),a("p",[e._v("Annotations are a good place to store various information about the object:\ndescription, author, git hash, build timestamp, etc. For example, Azure pipeline\nadds various information to the annotations of the objects it deploys.")])])}),[],!1,null,null,null);t.default=o.exports}}]);