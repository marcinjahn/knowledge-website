<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Various ways to store configuration data in Kubernetes">
    <meta property="og:url" content="/technologies/kubernetes/configuration.html">
    <meta property="og:site_name" content="Marcin Jahn | Technology Notebook">
    <meta property="og:title" content="Configuration">
    <meta property="og:description" content="Various ways to store configuration data in Kubernetes">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Technology Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.f7c29e46.css" as="style"><link rel="preload" href="/assets/js/app.2fd81ae2.js" as="script"><link rel="preload" href="/assets/js/2.18edd8c5.js" as="script"><link rel="preload" href="/assets/js/107.a7135e71.js" as="script"><link rel="prefetch" href="/assets/js/10.3aa16460.js"><link rel="prefetch" href="/assets/js/100.e859dba1.js"><link rel="prefetch" href="/assets/js/101.4220bd8a.js"><link rel="prefetch" href="/assets/js/102.dae3407f.js"><link rel="prefetch" href="/assets/js/103.cd933263.js"><link rel="prefetch" href="/assets/js/104.56f7159a.js"><link rel="prefetch" href="/assets/js/105.a9c64c2b.js"><link rel="prefetch" href="/assets/js/106.974f9094.js"><link rel="prefetch" href="/assets/js/108.f50ba2f4.js"><link rel="prefetch" href="/assets/js/109.66793cf9.js"><link rel="prefetch" href="/assets/js/11.9ac2e1f1.js"><link rel="prefetch" href="/assets/js/110.f5d383c7.js"><link rel="prefetch" href="/assets/js/111.3a644617.js"><link rel="prefetch" href="/assets/js/112.b7f784c9.js"><link rel="prefetch" href="/assets/js/113.4a78e709.js"><link rel="prefetch" href="/assets/js/114.a9bc4c5b.js"><link rel="prefetch" href="/assets/js/115.ee171d51.js"><link rel="prefetch" href="/assets/js/116.86c21293.js"><link rel="prefetch" href="/assets/js/117.adbc6e97.js"><link rel="prefetch" href="/assets/js/118.93208be4.js"><link rel="prefetch" href="/assets/js/119.eaaa9659.js"><link rel="prefetch" href="/assets/js/12.54db5004.js"><link rel="prefetch" href="/assets/js/120.65ab86e2.js"><link rel="prefetch" href="/assets/js/121.e1ce80e6.js"><link rel="prefetch" href="/assets/js/122.2cec2bc7.js"><link rel="prefetch" href="/assets/js/123.1ecb5818.js"><link rel="prefetch" href="/assets/js/124.377e14a5.js"><link rel="prefetch" href="/assets/js/125.cda2e296.js"><link rel="prefetch" href="/assets/js/126.9559cf00.js"><link rel="prefetch" href="/assets/js/127.5de561ae.js"><link rel="prefetch" href="/assets/js/128.20f5d38a.js"><link rel="prefetch" href="/assets/js/129.977c0cff.js"><link rel="prefetch" href="/assets/js/13.57631bbe.js"><link rel="prefetch" href="/assets/js/130.66aede7b.js"><link rel="prefetch" href="/assets/js/131.fb701a68.js"><link rel="prefetch" href="/assets/js/132.afcdec70.js"><link rel="prefetch" href="/assets/js/133.f1b4ad95.js"><link rel="prefetch" href="/assets/js/134.ac2a93f2.js"><link rel="prefetch" href="/assets/js/135.e540520b.js"><link rel="prefetch" href="/assets/js/14.b351f348.js"><link rel="prefetch" href="/assets/js/15.2bbc8a11.js"><link rel="prefetch" href="/assets/js/16.1ddaaf73.js"><link rel="prefetch" href="/assets/js/17.cb3654b6.js"><link rel="prefetch" href="/assets/js/18.6f34dace.js"><link rel="prefetch" href="/assets/js/19.9f6d2e8b.js"><link rel="prefetch" href="/assets/js/20.34505e05.js"><link rel="prefetch" href="/assets/js/21.920b61a4.js"><link rel="prefetch" href="/assets/js/22.2cc17aba.js"><link rel="prefetch" href="/assets/js/23.5adc588a.js"><link rel="prefetch" href="/assets/js/24.e8904f8d.js"><link rel="prefetch" href="/assets/js/25.de8b3079.js"><link rel="prefetch" href="/assets/js/26.112c5f0d.js"><link rel="prefetch" href="/assets/js/27.842928bb.js"><link rel="prefetch" href="/assets/js/28.25fe555f.js"><link rel="prefetch" href="/assets/js/29.e0306dfe.js"><link rel="prefetch" href="/assets/js/3.b96fc79d.js"><link rel="prefetch" href="/assets/js/30.ff93fb19.js"><link rel="prefetch" href="/assets/js/31.75394991.js"><link rel="prefetch" href="/assets/js/32.c3909132.js"><link rel="prefetch" href="/assets/js/33.28ca68ef.js"><link rel="prefetch" href="/assets/js/34.5c61fc0c.js"><link rel="prefetch" href="/assets/js/35.ebeec5e2.js"><link rel="prefetch" href="/assets/js/36.4439a44e.js"><link rel="prefetch" href="/assets/js/37.7b06f2d4.js"><link rel="prefetch" href="/assets/js/38.567408d3.js"><link rel="prefetch" href="/assets/js/39.2f8fe57a.js"><link rel="prefetch" href="/assets/js/4.78773ae0.js"><link rel="prefetch" href="/assets/js/40.1f324c03.js"><link rel="prefetch" href="/assets/js/41.2ee8e40e.js"><link rel="prefetch" href="/assets/js/42.24badbc9.js"><link rel="prefetch" href="/assets/js/43.ddba98d6.js"><link rel="prefetch" href="/assets/js/44.5a85f4dd.js"><link rel="prefetch" href="/assets/js/45.a2b975f0.js"><link rel="prefetch" href="/assets/js/46.fd30fea3.js"><link rel="prefetch" href="/assets/js/47.38ba6646.js"><link rel="prefetch" href="/assets/js/48.e2c3cecf.js"><link rel="prefetch" href="/assets/js/49.b239f817.js"><link rel="prefetch" href="/assets/js/5.c8cb4608.js"><link rel="prefetch" href="/assets/js/50.cb9b658d.js"><link rel="prefetch" href="/assets/js/51.4f932982.js"><link rel="prefetch" href="/assets/js/52.c260fc62.js"><link rel="prefetch" href="/assets/js/53.17949a0b.js"><link rel="prefetch" href="/assets/js/54.6450145e.js"><link rel="prefetch" href="/assets/js/55.6e0b192a.js"><link rel="prefetch" href="/assets/js/56.ccf840c2.js"><link rel="prefetch" href="/assets/js/57.d20294a5.js"><link rel="prefetch" href="/assets/js/58.e46d3a69.js"><link rel="prefetch" href="/assets/js/59.1febcdea.js"><link rel="prefetch" href="/assets/js/6.40d9529f.js"><link rel="prefetch" href="/assets/js/60.9382a2e4.js"><link rel="prefetch" href="/assets/js/61.2e0591d9.js"><link rel="prefetch" href="/assets/js/62.ed82a589.js"><link rel="prefetch" href="/assets/js/63.63caba36.js"><link rel="prefetch" href="/assets/js/64.7cee6fb4.js"><link rel="prefetch" href="/assets/js/65.d4a00372.js"><link rel="prefetch" href="/assets/js/66.5c934b3e.js"><link rel="prefetch" href="/assets/js/67.3fed4336.js"><link rel="prefetch" href="/assets/js/68.3146cce5.js"><link rel="prefetch" href="/assets/js/69.64562cf2.js"><link rel="prefetch" href="/assets/js/7.7008a0a8.js"><link rel="prefetch" href="/assets/js/70.2c413772.js"><link rel="prefetch" href="/assets/js/71.fe7e6f14.js"><link rel="prefetch" href="/assets/js/72.039f37d9.js"><link rel="prefetch" href="/assets/js/73.b57ad0f5.js"><link rel="prefetch" href="/assets/js/74.7deed08a.js"><link rel="prefetch" href="/assets/js/75.de97192e.js"><link rel="prefetch" href="/assets/js/76.5314b8b9.js"><link rel="prefetch" href="/assets/js/77.c4129088.js"><link rel="prefetch" href="/assets/js/78.90e6a117.js"><link rel="prefetch" href="/assets/js/79.2e3e88df.js"><link rel="prefetch" href="/assets/js/8.2b9c84bb.js"><link rel="prefetch" href="/assets/js/80.cd668ef2.js"><link rel="prefetch" href="/assets/js/81.d15449d2.js"><link rel="prefetch" href="/assets/js/82.51e48f67.js"><link rel="prefetch" href="/assets/js/83.4319d629.js"><link rel="prefetch" href="/assets/js/84.9fb302c3.js"><link rel="prefetch" href="/assets/js/85.5c1fb37a.js"><link rel="prefetch" href="/assets/js/86.ba7f35d1.js"><link rel="prefetch" href="/assets/js/87.398ab0b3.js"><link rel="prefetch" href="/assets/js/88.e76ea5f9.js"><link rel="prefetch" href="/assets/js/89.11957daf.js"><link rel="prefetch" href="/assets/js/9.d673dcab.js"><link rel="prefetch" href="/assets/js/90.1f623630.js"><link rel="prefetch" href="/assets/js/91.4f948573.js"><link rel="prefetch" href="/assets/js/92.07a30fca.js"><link rel="prefetch" href="/assets/js/93.c25276d3.js"><link rel="prefetch" href="/assets/js/94.1135bc4e.js"><link rel="prefetch" href="/assets/js/95.bf618cd6.js"><link rel="prefetch" href="/assets/js/96.8510e3e7.js"><link rel="prefetch" href="/assets/js/97.127c27c2.js"><link rel="prefetch" href="/assets/js/98.9826a4ea.js"><link rel="prefetch" href="/assets/js/99.593bc618.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f7c29e46.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link router-link-active">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-10a38898><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-10a38898><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-10a38898><img src="/img/github.webp" data-v-f9b87572></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link router-link-active">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-10a38898><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-10a38898><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-10a38898><img src="/img/github.webp" data-v-f9b87572></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/technologies/" aria-current="page" class="sidebar-link">/technologies/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web Protocols</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Blockchain</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Kubernetes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technologies/kubernetes/meaning.html" class="sidebar-link">Meaning and Purpose</a></li><li><a href="/technologies/kubernetes/cluster.html" class="sidebar-link">Cluster</a></li><li><a href="/technologies/kubernetes/dev-env.html" class="sidebar-link">Dev Environment</a></li><li><a href="/technologies/kubernetes/api.html" class="sidebar-link">Kubernetes API</a></li><li><a href="/technologies/kubernetes/objects.html" class="sidebar-link">Objects</a></li><li><a href="/technologies/kubernetes/pods.html" class="sidebar-link">Pods</a></li><li><a href="/technologies/kubernetes/scaling.html" class="sidebar-link">Scaling</a></li><li><a href="/technologies/kubernetes/events.html" class="sidebar-link">Events</a></li><li><a href="/technologies/kubernetes/storage.html" class="sidebar-link">Storage</a></li><li><a href="/technologies/kubernetes/configuration.html" aria-current="page" class="active sidebar-link">Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technologies/kubernetes/configuration.html#configmaps" class="sidebar-link">ConfigMaps</a></li></ul></li><li><a href="/technologies/kubernetes/organization.html" class="sidebar-link">Organizing Objects</a></li><li><a href="/technologies/kubernetes/services.html" class="sidebar-link">Services</a></li><li><a href="/technologies/kubernetes/ingress.html" class="sidebar-link">Ingress</a></li><li><a href="/technologies/kubernetes/helm.html" class="sidebar-link">Helm</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SQL Server</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MongoDB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ansible</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Azure</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h1> <p>Applications in pods might be configured in a few ways.</p> <h2 id="configmaps"><a href="#configmaps" class="header-anchor">#</a> ConfigMaps</h2> <h3 id="mounting-as-volumes"><a href="#mounting-as-volumes" class="header-anchor">#</a> Mounting as volumes</h3> <p>When mounting a ConfigMap/Secret as a volume, the files in the container are
actually symbolic links. Next to them is a directory with the actual files. This
was done so that when configMap changes, and Kubernetes updates the files, the
symbolic links will be switched to point to new files only after all of them get
updated properly. This solves a potential issue of container seeing only half of
the files being updated, which could lead to improper configuration of the app.</p> <p>When using <code>subPath</code> while mounting configMap, the files do not get updated
together with configMap updates.</p> <h3 id="secrets"><a href="#secrets" class="header-anchor">#</a> Secrets</h3> <p>Secrets are very similar to configMaps. Some differences:</p> <ul><li>Secrets are only distrubuted to the Nodes that run the Pods taht need the
given Secret.</li> <li>Secrets in the Nodes are always only in memory, never written to the disk.</li></ul> <p>By default Secrets have <code>type</code> set to <code>Opaque</code>. There are various types of
secrets used by various K8s components. Examples of secret types:</p> <ul><li><code>kubernetes.io/basic-auth</code> - must container <code>username</code> and <code>password</code></li> <li><code>kubernetes.io/tls</code> - must contain <code>tls.crt</code> and <code>tls.key</code></li></ul> <p>Secrets objects store secrets under the <code>data</code> key in base64 encoded format. In
order to crete a secret, you can either provide the base64-encoded values under
<code>data</code> or provide raw values under the <code>stringData</code> key. They will be
transformed to base64 and put under data by K8s. <code>stringData</code> is only writable,
not readable.</p> <h3 id="downward-api"><a href="#downward-api" class="header-anchor">#</a> Downward API</h3> <p>It allows to expose pod and container metadata (<code>metadata</code>, <code>spec</code> or <code>status</code>
fields and resource constraints, like CPU, RAM) via environment variables or
files (like ConfigMaps).</p> <p>Supported metadata fields:</p> <table><thead><tr><th>Field</th> <th>Description</th> <th>Allowed in env</th> <th>Allowed in volume</th></tr></thead> <tbody><tr><td>metadata.name</td> <td>The pod's name.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>metadata.namespace</td> <td>The pod's namespace.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>metadata.uid</td> <td>The pod's UID.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>metadata.labels</td> <td>All the pod's labels, one label per line, formatted as key=&quot;value&quot;</td> <td>No</td> <td>Yes</td></tr> <tr><td>metadata.labels['key']</td> <td>The value of the specified label.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>metadata.annotations</td> <td>All the pod's annotations, one per line, formatted as key=&quot;value&quot;.</td> <td>No</td> <td>Yes</td></tr> <tr><td>metadata.annotations['key']</td> <td>The value of the specified annotation.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>spec.nodeName</td> <td>The name of the worker node the pod runs on.</td> <td>Yes</td> <td>No</td></tr> <tr><td>spec.serviceAccountName</td> <td>The name of the pod's service account.</td> <td>Yes</td> <td>No</td></tr> <tr><td>status.podIp</td> <td>The pod's IP address.</td> <td>Yes</td> <td>No</td></tr> <tr><td>status.hostIP</td> <td>The worker node's IP address.</td> <td>Yes</td> <td>No</td></tr></tbody></table> <p>Supported resource cnstraints injection:</p> <table><thead><tr><th>Resource field</th> <th>Description</th> <th>Allowed in env</th> <th>Allowed in vol</th></tr></thead> <tbody><tr><td>requests.cpu</td> <td>The container's CPU request.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>requests.memory</td> <td>The container's memory request.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>requests.ephemeral-storage</td> <td>The container's ephemeral storage request.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>limits.cpu</td> <td>The container's CPU limit.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>limits.memory</td> <td>The container's memory limit.</td> <td>Yes</td> <td>Yes</td></tr> <tr><td>limits.ephemeral-storage</td> <td>The container's ephemeral storage limit.</td> <td>Yes</td> <td>Yes</td></tr></tbody></table> <h3 id="projected-volumes"><a href="#projected-volumes" class="header-anchor">#</a> Projected Volumes</h3> <p>When mounting Secrets, ConfigMaps, Downward API as volumes, they cannot be
mounted in the same directory (unless using <code>subPath</code>). Projected Volumes allow
to do that.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/technologies/kubernetes/storage.html" class="prev">
        Storage
      </a></span> <span class="next"><a href="/technologies/kubernetes/organization.html">
        Organizing Objects
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/26/2022, 11:57:09 AM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.2fd81ae2.js" defer></script><script src="/assets/js/2.18edd8c5.js" defer></script><script src="/assets/js/107.a7135e71.js" defer></script>
  </body>
</html>
