<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP Protocol | Marcin Jahn | Tech Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="My personal knowledge base for all the IT-related topics">
    <meta property="og:url" content="/technologies/networking/http.html">
    <meta property="og:site_name" content="Marcin Jahn | Tech Notebook">
    <meta property="og:title" content="HTTP Protocol">
    <meta property="og:description" content="HTTP Protocol Typical Request Here's how a typical HTTP request looks like (up to some level of abstraction). The assumptions are: the PC and the web browser are "fresh", DNS cache">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Tech Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="#7D84B2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.d40b778b.css" as="style"><link rel="preload" href="/assets/js/app.26292b7f.js" as="script"><link rel="preload" href="/assets/js/4.18900e8d.js" as="script"><link rel="preload" href="/assets/js/1.a0a639a2.js" as="script"><link rel="preload" href="/assets/js/162.a54a10ae.js" as="script"><link rel="prefetch" href="/assets/js/10.69dda197.js"><link rel="prefetch" href="/assets/js/100.45ec19ca.js"><link rel="prefetch" href="/assets/js/101.c192aee7.js"><link rel="prefetch" href="/assets/js/102.19585149.js"><link rel="prefetch" href="/assets/js/103.fa647de9.js"><link rel="prefetch" href="/assets/js/104.6fa26b80.js"><link rel="prefetch" href="/assets/js/105.096a93ca.js"><link rel="prefetch" href="/assets/js/106.8fecd02a.js"><link rel="prefetch" href="/assets/js/107.5435b0c5.js"><link rel="prefetch" href="/assets/js/108.d1c40578.js"><link rel="prefetch" href="/assets/js/109.a48b453a.js"><link rel="prefetch" href="/assets/js/11.2a7c4acc.js"><link rel="prefetch" href="/assets/js/110.205fda6e.js"><link rel="prefetch" href="/assets/js/111.a41638e6.js"><link rel="prefetch" href="/assets/js/112.0a3f286a.js"><link rel="prefetch" href="/assets/js/113.b0e158a9.js"><link rel="prefetch" href="/assets/js/114.f651be28.js"><link rel="prefetch" href="/assets/js/115.caf59649.js"><link rel="prefetch" href="/assets/js/116.d689c2e4.js"><link rel="prefetch" href="/assets/js/117.2a58aa3a.js"><link rel="prefetch" href="/assets/js/118.ccba6c14.js"><link rel="prefetch" href="/assets/js/119.8b0eb932.js"><link rel="prefetch" href="/assets/js/12.99456584.js"><link rel="prefetch" href="/assets/js/120.7596be23.js"><link rel="prefetch" href="/assets/js/121.8472505b.js"><link rel="prefetch" href="/assets/js/122.f6727a23.js"><link rel="prefetch" href="/assets/js/123.c4181c80.js"><link rel="prefetch" href="/assets/js/124.e8740923.js"><link rel="prefetch" href="/assets/js/125.383d5162.js"><link rel="prefetch" href="/assets/js/126.c7f6d7a3.js"><link rel="prefetch" href="/assets/js/127.fa491de8.js"><link rel="prefetch" href="/assets/js/128.bbea7eab.js"><link rel="prefetch" href="/assets/js/129.6ca82ef9.js"><link rel="prefetch" href="/assets/js/13.5c3755b6.js"><link rel="prefetch" href="/assets/js/130.3e485bf8.js"><link rel="prefetch" href="/assets/js/131.39009478.js"><link rel="prefetch" href="/assets/js/132.f00554cc.js"><link rel="prefetch" href="/assets/js/133.1fc72282.js"><link rel="prefetch" href="/assets/js/134.c1e873de.js"><link rel="prefetch" href="/assets/js/135.a21f1f60.js"><link rel="prefetch" href="/assets/js/136.e6c2c639.js"><link rel="prefetch" href="/assets/js/137.626f1ba2.js"><link rel="prefetch" href="/assets/js/138.6fe7fd28.js"><link rel="prefetch" href="/assets/js/139.e6188ae8.js"><link rel="prefetch" href="/assets/js/14.495518d6.js"><link rel="prefetch" href="/assets/js/140.4a1189df.js"><link rel="prefetch" href="/assets/js/141.e9d07b72.js"><link rel="prefetch" href="/assets/js/142.dabf3339.js"><link rel="prefetch" href="/assets/js/143.f42a77e0.js"><link rel="prefetch" href="/assets/js/144.880d2938.js"><link rel="prefetch" href="/assets/js/145.de40b18b.js"><link rel="prefetch" href="/assets/js/146.ba5b419f.js"><link rel="prefetch" href="/assets/js/147.7d012870.js"><link rel="prefetch" href="/assets/js/148.7591d361.js"><link rel="prefetch" href="/assets/js/149.14c6f37d.js"><link rel="prefetch" href="/assets/js/15.a50d83a8.js"><link rel="prefetch" href="/assets/js/150.d93241fb.js"><link rel="prefetch" href="/assets/js/151.55b84dfb.js"><link rel="prefetch" href="/assets/js/152.7dee5936.js"><link rel="prefetch" href="/assets/js/153.d9274f92.js"><link rel="prefetch" href="/assets/js/154.2bd93144.js"><link rel="prefetch" href="/assets/js/155.2a3c76be.js"><link rel="prefetch" href="/assets/js/156.bf94db05.js"><link rel="prefetch" href="/assets/js/157.284f24aa.js"><link rel="prefetch" href="/assets/js/158.18b9730d.js"><link rel="prefetch" href="/assets/js/159.a24c6870.js"><link rel="prefetch" href="/assets/js/16.73fb7dfb.js"><link rel="prefetch" href="/assets/js/160.9227c1e0.js"><link rel="prefetch" href="/assets/js/161.17e81144.js"><link rel="prefetch" href="/assets/js/163.04483f8b.js"><link rel="prefetch" href="/assets/js/164.dda8c46d.js"><link rel="prefetch" href="/assets/js/165.1212acbc.js"><link rel="prefetch" href="/assets/js/166.461a057e.js"><link rel="prefetch" href="/assets/js/167.5af7e5fe.js"><link rel="prefetch" href="/assets/js/168.f5d30d74.js"><link rel="prefetch" href="/assets/js/169.1610d56c.js"><link rel="prefetch" href="/assets/js/17.965dbc0f.js"><link rel="prefetch" href="/assets/js/170.9547034b.js"><link rel="prefetch" href="/assets/js/171.48531e6f.js"><link rel="prefetch" href="/assets/js/172.246747d1.js"><link rel="prefetch" href="/assets/js/173.ae8f8556.js"><link rel="prefetch" href="/assets/js/174.67a53579.js"><link rel="prefetch" href="/assets/js/18.6730e865.js"><link rel="prefetch" href="/assets/js/19.9a762032.js"><link rel="prefetch" href="/assets/js/2.ed950f2e.js"><link rel="prefetch" href="/assets/js/20.59cc4acc.js"><link rel="prefetch" href="/assets/js/21.bcfb6acd.js"><link rel="prefetch" href="/assets/js/22.a9ce70ce.js"><link rel="prefetch" href="/assets/js/23.6de25850.js"><link rel="prefetch" href="/assets/js/24.537cabff.js"><link rel="prefetch" href="/assets/js/25.9b2c7ec5.js"><link rel="prefetch" href="/assets/js/26.3460c2d8.js"><link rel="prefetch" href="/assets/js/27.c4a2ea48.js"><link rel="prefetch" href="/assets/js/28.1f5ce2c5.js"><link rel="prefetch" href="/assets/js/29.6356c899.js"><link rel="prefetch" href="/assets/js/30.9f3b6c6d.js"><link rel="prefetch" href="/assets/js/31.3095f030.js"><link rel="prefetch" href="/assets/js/32.d73e72d9.js"><link rel="prefetch" href="/assets/js/33.55c62816.js"><link rel="prefetch" href="/assets/js/34.82585bdf.js"><link rel="prefetch" href="/assets/js/35.5b63d91a.js"><link rel="prefetch" href="/assets/js/36.2f8da82e.js"><link rel="prefetch" href="/assets/js/37.a2964fb2.js"><link rel="prefetch" href="/assets/js/38.a11bdc97.js"><link rel="prefetch" href="/assets/js/39.80c0f721.js"><link rel="prefetch" href="/assets/js/40.46e428c5.js"><link rel="prefetch" href="/assets/js/41.50b37774.js"><link rel="prefetch" href="/assets/js/42.3bd945bf.js"><link rel="prefetch" href="/assets/js/43.785175ce.js"><link rel="prefetch" href="/assets/js/44.cc5cdeec.js"><link rel="prefetch" href="/assets/js/45.cc664518.js"><link rel="prefetch" href="/assets/js/46.97da38a0.js"><link rel="prefetch" href="/assets/js/47.83430af1.js"><link rel="prefetch" href="/assets/js/48.45eb006e.js"><link rel="prefetch" href="/assets/js/49.a7640631.js"><link rel="prefetch" href="/assets/js/5.2d0e903f.js"><link rel="prefetch" href="/assets/js/50.c4e956b2.js"><link rel="prefetch" href="/assets/js/51.6dba7004.js"><link rel="prefetch" href="/assets/js/52.c4e870be.js"><link rel="prefetch" href="/assets/js/53.f54444bc.js"><link rel="prefetch" href="/assets/js/54.5c00aa0c.js"><link rel="prefetch" href="/assets/js/55.73cb3eca.js"><link rel="prefetch" href="/assets/js/56.c9a65c0b.js"><link rel="prefetch" href="/assets/js/57.5ee41e88.js"><link rel="prefetch" href="/assets/js/58.605fa7a5.js"><link rel="prefetch" href="/assets/js/59.e535d541.js"><link rel="prefetch" href="/assets/js/6.94ea720c.js"><link rel="prefetch" href="/assets/js/60.ebee51c9.js"><link rel="prefetch" href="/assets/js/61.953e782c.js"><link rel="prefetch" href="/assets/js/62.63a00486.js"><link rel="prefetch" href="/assets/js/63.d995c991.js"><link rel="prefetch" href="/assets/js/64.3a2f2c14.js"><link rel="prefetch" href="/assets/js/65.8317f373.js"><link rel="prefetch" href="/assets/js/66.8798fda4.js"><link rel="prefetch" href="/assets/js/67.66cf6e5b.js"><link rel="prefetch" href="/assets/js/68.56253fc3.js"><link rel="prefetch" href="/assets/js/69.544979c2.js"><link rel="prefetch" href="/assets/js/7.351d9fc9.js"><link rel="prefetch" href="/assets/js/70.29f23815.js"><link rel="prefetch" href="/assets/js/71.ce4a3d99.js"><link rel="prefetch" href="/assets/js/72.d9d13e2f.js"><link rel="prefetch" href="/assets/js/73.ca7eadd9.js"><link rel="prefetch" href="/assets/js/74.c53b1c46.js"><link rel="prefetch" href="/assets/js/75.a64e14c2.js"><link rel="prefetch" href="/assets/js/76.b847d894.js"><link rel="prefetch" href="/assets/js/77.a240f086.js"><link rel="prefetch" href="/assets/js/78.42fc112d.js"><link rel="prefetch" href="/assets/js/79.7e49bb9a.js"><link rel="prefetch" href="/assets/js/8.821fc0e5.js"><link rel="prefetch" href="/assets/js/80.58e207ce.js"><link rel="prefetch" href="/assets/js/81.d273cdb6.js"><link rel="prefetch" href="/assets/js/82.325d4e60.js"><link rel="prefetch" href="/assets/js/83.bff94ee3.js"><link rel="prefetch" href="/assets/js/84.9f4ca7d0.js"><link rel="prefetch" href="/assets/js/85.5ed6ecb4.js"><link rel="prefetch" href="/assets/js/86.1d020e95.js"><link rel="prefetch" href="/assets/js/87.c55fd52d.js"><link rel="prefetch" href="/assets/js/88.393d199b.js"><link rel="prefetch" href="/assets/js/89.20b1a718.js"><link rel="prefetch" href="/assets/js/9.c1fa72c1.js"><link rel="prefetch" href="/assets/js/90.769972cb.js"><link rel="prefetch" href="/assets/js/91.386a3fc1.js"><link rel="prefetch" href="/assets/js/92.fb1efabf.js"><link rel="prefetch" href="/assets/js/93.7a9c7f25.js"><link rel="prefetch" href="/assets/js/94.8a4af0ec.js"><link rel="prefetch" href="/assets/js/95.48f1110a.js"><link rel="prefetch" href="/assets/js/96.d6e00244.js"><link rel="prefetch" href="/assets/js/97.de679300.js"><link rel="prefetch" href="/assets/js/98.ee6727c1.js"><link rel="prefetch" href="/assets/js/99.496a1e35.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d40b778b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Tech Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link router-link-active">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link router-link-active">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/technologies/" aria-current="page" class="sidebar-link">/technologies/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span class="img-container"><img src="/sidebar-imgs/network.webp"></span> <span>Networking</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/technologies/networking/osi-model.html" class="sidebar-link">OSI Model</a></li><li><a href="/technologies/networking/tcp.html" class="sidebar-link">TCP Procol</a></li><li><a href="/technologies/networking/udp.html" class="sidebar-link">UDP Protocol</a></li><li><a href="/technologies/networking/http.html" aria-current="page" class="active sidebar-link">HTTP Protocol</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/technologies/networking/http.html#typical-request" class="sidebar-link">Typical Request</a></li><li class="sidebar-sub-header"><a href="/technologies/networking/http.html#simple-implementation" class="sidebar-link">Simple Implementation</a></li><li class="sidebar-sub-header"><a href="/technologies/networking/http.html#versions" class="sidebar-link">Versions</a></li><li class="sidebar-sub-header"><a href="/technologies/networking/http.html#browser-storage" class="sidebar-link">Browser Storage</a></li><li class="sidebar-sub-header"><a href="/technologies/networking/http.html#proxying" class="sidebar-link">Proxying</a></li><li class="sidebar-sub-header"><a href="/technologies/networking/http.html#enforcing-https" class="sidebar-link">Enforcing HTTPS</a></li></ul></li><li><a href="/technologies/networking/websocket.html" class="sidebar-link">WebSocket</a></li><li><a href="/technologies/networking/hsts.html" class="sidebar-link">HSTS</a></li><li><a href="/technologies/networking/dns.html" class="sidebar-link">DNS</a></li><li><a href="/technologies/networking/sni.html" class="sidebar-link">Server Name Indication</a></li><li><a href="/technologies/networking/grpc.html" class="sidebar-link">gRPC</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/security.webp"></span> <span>Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/blockchain.webp"></span> <span>Blockchain</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/linux.webp"></span> <span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/kubernetes.webp"></span> <span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/sql-server.webp"></span> <span>SQL Server</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/mongodb.webp"></span> <span>MongoDB</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/git.webp"></span> <span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/ansible.webp"></span> <span>Ansible</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/azure.webp"></span> <span>Azure</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/gcp.webp"></span> <span>Google Cloud</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="http-protocol"><a href="#http-protocol" class="header-anchor">#</a> HTTP Protocol</h1> <h2 id="typical-request"><a href="#typical-request" class="header-anchor">#</a> Typical Request</h2> <p>Here's how a typical HTTP request looks like (up to some level of abstraction).
The assumptions are:</p> <ul><li>the PC and the web browser are &quot;fresh&quot;, DNS caches are empty</li> <li>max HTTP/2 is used (no QUIC)</li> <li>we're making a request to &quot;example.com&quot;</li> <li>&quot;example.com&quot; record exists in HSTS</li></ul> <ol><li>&quot;example.com&quot; is a domain name. The networking stack needs IP address, so
we're going to reach out to DNS for the IP address
<ol><li>On Linux, <code>nsswitch.conf</code> file is checked to find out about the sources
of DNS entries. It could be the <code>/etc/hosts</code> file, and some DNS service</li> <li>Most likely, we'll reach out to some external DNS service, which is either
configured by us or by DHCP.</li> <li>We send a request to DNS (let's skip the process of resolving MAC addresses
with ARP). DNS uses UDP on port 53.</li> <li>DNS respons to us with the IP address. The IP address could be found either
in our DNS service or the service could reach out to some other DNS service
for the IP.</li></ol></li> <li>With the IP address, we can start to establish a <a href="./tcp">TCP connection</a> with
the &quot;example.com&quot; server.
<ol><li>3-way handshake occurs and sockets are created on the client and the server
(IP-port pairs).</li></ol></li> <li><a href="./hsts">HSTS</a> can jump in forcing us to use HTTPS (let's assume that it
happened). We need to establish TLS session.</li> <li>The client will start the TLS session with the server. Depending on the TLS
version used, a proper handshake procedure will occur.
<ul><li>if TLS 1.3 is used:
<ol><li>There is a 2-way handshake. The client sends &quot;Client Hello&quot; including:
D-H parameters, SNI (encrypted), ALPN.</li> <li>The server responds with &quot;Server Hello&quot; including: D-H parameters,
<a href="/technologies/security/cryptography/basic-terms.html#x-509">X.509
certificate</a>
(based on SNI).</li></ol></li> <li>if TLS 1.2 is used:
<ol><li>There is a 4-way handshake. The client sends &quot;Client Hello&quot; including:
protocols info, SNI.</li> <li>The server responds with &quot;Server Hello&quot; including: <a href="/technologies/security/cryptography/basic-terms.html#x-509">X.509
certificate</a>,
protocol choices.</li> <li>Client sends the symmetric key (which is why TLS 1.3 is preferred)</li> <li>Server FIN</li></ol></li></ul></li> <li>With the TCP and TLS established, the client can send the actual HTTP request
containing all the necessary content.</li> <li>The server responds with a proper HTTP response.</li></ol> <h2 id="simple-implementation"><a href="#simple-implementation" class="header-anchor">#</a> Simple Implementation</h2> <p>HTTP is all about sending appropriately formatted messages over TCP (unless
HTTP/3 is used). A simple HTTP server implementation shows it quite well:
<a href="https://medium.com/from-the-scratch/http-server-what-do-you-need-to-know-to-build-a-simple-http-server-from-scratch-d1ef8945e4fa" target="_blank" rel="noopener noreferrer">Medium<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="versions"><a href="#versions" class="header-anchor">#</a> Versions</h2> <p><strong>HTTP/1.0</strong> was establishing a separate TCP connection per each request -
expensive - every CSS, image, etc. of a website had to be fetched through a
separate TCP connection.</p> <p><strong>HTTP/1.1</strong> introduced:</p> <ul><li><code>Host</code> header containing the target domain. Without this, proxies could not
work (they wouldn't know where to send the request)</li> <li><code>keep-alive</code> header, which reused a connection when loading content
(<em>persisted TCP connection</em>). The server understands it and keeps the TCP
connection open</li> <li><code>ETag</code> caching.</li> <li><em>Streaming</em> of content.</li></ul> <p><strong>HTTP/2</strong> introduced:</p> <ul><li>compression</li> <li>multiplexing - client joins his requests into one request</li> <li>always HTTPS (TLS)</li> <li>ALPN - negotiates protocol during the TLS handshake</li></ul> <p><strong>HTTP/3</strong> introduced:</p> <ul><li>uses QUIC (UDP with Congestion control) instead of TCP, making the amount of
communication much smaller, resulting in reduced latencies.</li></ul> <h2 id="browser-storage"><a href="#browser-storage" class="header-anchor">#</a> Browser Storage</h2> <p><img src="https://i.imgur.com/UXLpHD2.png" alt=""></p> <p>The main diference is that cookies are sent to servers, while localStorage and
sessionStorage stay on the client only. Also, localStorage stays in forever.</p> <h2 id="proxying"><a href="#proxying" class="header-anchor">#</a> Proxying</h2> <h3 id="http-proxy"><a href="#http-proxy" class="header-anchor">#</a> HTTP Proxy</h3> <p>It needs to be configured on the client. When I send any HTTP request, it's
going to be modified in a layer 3. The IP address will be set to the IP address
of the proxy. The proxy will receive my request (on TCP connection 1), and by
inspecting the layer 7 data it will see what request I wanted to make. It will
create another TCP connection (with the target server), get the data, and send
it back to me (on TCP connection 1). The target server does not know that the
client was behind a proxy.</p> <p>Reference: https://www.youtube.com/watch?v=x4E4mbobGEc</p> <h3 id="https-proxy"><a href="#https-proxy" class="header-anchor">#</a> HTTPS Proxy</h3> <p>The proxy needs to see what domain we want to access. This information is
decrypted though. To go around that, the proxy needs to offer TLS termination
and provide a certificate that the client needs to trust.</p> <p><img src="https://i.imgur.com/vdj2Ebz.png" alt=""></p> <p>Reference: https://www.youtube.com/watch?v=PAJ5kK50qp8</p> <h3 id="http-connect-proxy"><a href="#http-connect-proxy" class="header-anchor">#</a> HTTP CONNECT proxy</h3> <ol><li>First, a client sends HTTP CONNECT to the proxy with domain of the target
server.</li> <li>The proxy establishes a TCP connection with the target server and returns
success to the client</li> <li>For any packet sent from the client to the proxy, proxy hanges the source IP
to itself and sends this packet via the previouslu established TCP connection
to the target server.</li> <li>Any response from the target server gets its source IP modified to the
proxy's IP and sent back to the client.</li></ol> <p>The communication is end-to-end, the proxy does not see the encrypted content.
Te proxy knows only the domain we're communicating with.</p> <p>Proxies may be chained, so that a proxy has its own proxy:</p> <p><img src="https://i.imgur.com/J7mOhkO.png" alt=""></p> <h2 id="enforcing-https"><a href="#enforcing-https" class="header-anchor">#</a> Enforcing HTTPS</h2> <p>There are at least two ways to enforce HTTPS:</p> <ul><li>Redirect from HTTP to HTTPS on your server</li> <li>Use <a href="./hsts">HSTS</a> - it's a header that informs the browser to ALWAYS use HTTPS when
reaching the app.</li></ul> <div class="custom-block tip"><p class="custom-block-title">ASP.NET Core</p> <p>ASP.NET Core has built-in middleware for both of the points above.</p></div> <p>HSTS should be used only if we do not plan to make use of HTTP in the app.
Otherwise we can make it impossible for the users to reach the HTTP endpoints.</p> <p>HSTS should not be used in development.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/technologies/networking/udp.html" class="prev">
        UDP Protocol
      </a></span> <span class="next"><a href="/technologies/networking/websocket.html">
        WebSocket
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/4/2023, 9:32:36 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.26292b7f.js" defer></script><script src="/assets/js/4.18900e8d.js" defer></script><script src="/assets/js/1.a0a639a2.js" defer></script><script src="/assets/js/162.a54a10ae.js" defer></script>
  </body>
</html>
