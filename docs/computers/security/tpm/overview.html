<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Overiew | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Overview of TPM versions and basic information about its functionalities">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.92f25611.css" as="style"><link rel="preload" href="/assets/js/app.a3cde6a5.js" as="script"><link rel="preload" href="/assets/js/2.3c69ec5e.js" as="script"><link rel="preload" href="/assets/js/24.3a95d909.js" as="script"><link rel="prefetch" href="/assets/js/10.a800d266.js"><link rel="prefetch" href="/assets/js/11.09e56f29.js"><link rel="prefetch" href="/assets/js/12.2d1e6a40.js"><link rel="prefetch" href="/assets/js/13.ab102e18.js"><link rel="prefetch" href="/assets/js/14.f5ac7c36.js"><link rel="prefetch" href="/assets/js/15.22a57c26.js"><link rel="prefetch" href="/assets/js/16.83770f8c.js"><link rel="prefetch" href="/assets/js/17.8c7b2def.js"><link rel="prefetch" href="/assets/js/18.a594cab7.js"><link rel="prefetch" href="/assets/js/19.a3397615.js"><link rel="prefetch" href="/assets/js/20.8b3d897c.js"><link rel="prefetch" href="/assets/js/21.cbc61ced.js"><link rel="prefetch" href="/assets/js/22.c51ff6ae.js"><link rel="prefetch" href="/assets/js/23.30bc59b3.js"><link rel="prefetch" href="/assets/js/25.fd76940b.js"><link rel="prefetch" href="/assets/js/26.b1828195.js"><link rel="prefetch" href="/assets/js/27.148ff54b.js"><link rel="prefetch" href="/assets/js/28.1a1c80e0.js"><link rel="prefetch" href="/assets/js/29.d26d1e2e.js"><link rel="prefetch" href="/assets/js/3.bb1a1646.js"><link rel="prefetch" href="/assets/js/30.d48f41e9.js"><link rel="prefetch" href="/assets/js/31.1d5a0de1.js"><link rel="prefetch" href="/assets/js/32.9d0a8149.js"><link rel="prefetch" href="/assets/js/33.67d3e8be.js"><link rel="prefetch" href="/assets/js/34.4909e2ff.js"><link rel="prefetch" href="/assets/js/35.4e4eecc4.js"><link rel="prefetch" href="/assets/js/36.cc5a0bd9.js"><link rel="prefetch" href="/assets/js/37.2934c3f8.js"><link rel="prefetch" href="/assets/js/38.d6658ddc.js"><link rel="prefetch" href="/assets/js/39.36673a67.js"><link rel="prefetch" href="/assets/js/4.4e42bdc8.js"><link rel="prefetch" href="/assets/js/40.bf8cc533.js"><link rel="prefetch" href="/assets/js/41.d17d0b20.js"><link rel="prefetch" href="/assets/js/42.c4f4fd5d.js"><link rel="prefetch" href="/assets/js/43.b954ff81.js"><link rel="prefetch" href="/assets/js/44.44c26a21.js"><link rel="prefetch" href="/assets/js/45.810f6ee0.js"><link rel="prefetch" href="/assets/js/46.baae0e2e.js"><link rel="prefetch" href="/assets/js/47.46577a1a.js"><link rel="prefetch" href="/assets/js/48.08f25443.js"><link rel="prefetch" href="/assets/js/49.9eed5c3c.js"><link rel="prefetch" href="/assets/js/5.ee6907a4.js"><link rel="prefetch" href="/assets/js/50.15947edd.js"><link rel="prefetch" href="/assets/js/51.40470b07.js"><link rel="prefetch" href="/assets/js/52.13e1d243.js"><link rel="prefetch" href="/assets/js/53.df4b8202.js"><link rel="prefetch" href="/assets/js/54.f6be0309.js"><link rel="prefetch" href="/assets/js/55.00404bbb.js"><link rel="prefetch" href="/assets/js/56.f72b6ccd.js"><link rel="prefetch" href="/assets/js/57.5f14177d.js"><link rel="prefetch" href="/assets/js/58.9e981a5e.js"><link rel="prefetch" href="/assets/js/59.47be87a2.js"><link rel="prefetch" href="/assets/js/6.f4f76c65.js"><link rel="prefetch" href="/assets/js/60.69c865c5.js"><link rel="prefetch" href="/assets/js/61.edf4de82.js"><link rel="prefetch" href="/assets/js/62.c9a93291.js"><link rel="prefetch" href="/assets/js/63.21339567.js"><link rel="prefetch" href="/assets/js/64.779d8e0b.js"><link rel="prefetch" href="/assets/js/65.f696eb9d.js"><link rel="prefetch" href="/assets/js/66.747facb5.js"><link rel="prefetch" href="/assets/js/67.7d0a90b1.js"><link rel="prefetch" href="/assets/js/68.34d1231e.js"><link rel="prefetch" href="/assets/js/69.238f2141.js"><link rel="prefetch" href="/assets/js/7.939285fa.js"><link rel="prefetch" href="/assets/js/70.751a29c8.js"><link rel="prefetch" href="/assets/js/71.1eebaa17.js"><link rel="prefetch" href="/assets/js/72.68d426b1.js"><link rel="prefetch" href="/assets/js/73.36037644.js"><link rel="prefetch" href="/assets/js/74.ab51ad01.js"><link rel="prefetch" href="/assets/js/75.5888260d.js"><link rel="prefetch" href="/assets/js/76.38c83059.js"><link rel="prefetch" href="/assets/js/77.329291b4.js"><link rel="prefetch" href="/assets/js/78.979b8fb6.js"><link rel="prefetch" href="/assets/js/79.a8910fbe.js"><link rel="prefetch" href="/assets/js/8.4f79d317.js"><link rel="prefetch" href="/assets/js/80.24c94c12.js"><link rel="prefetch" href="/assets/js/81.fcc010ee.js"><link rel="prefetch" href="/assets/js/82.be4e31b5.js"><link rel="prefetch" href="/assets/js/83.4461de48.js"><link rel="prefetch" href="/assets/js/84.03555f67.js"><link rel="prefetch" href="/assets/js/85.354f8762.js"><link rel="prefetch" href="/assets/js/86.cad7e355.js"><link rel="prefetch" href="/assets/js/87.14361978.js"><link rel="prefetch" href="/assets/js/88.aded8161.js"><link rel="prefetch" href="/assets/js/89.29c407d3.js"><link rel="prefetch" href="/assets/js/9.b1432945.js"><link rel="prefetch" href="/assets/js/90.6757bf21.js"><link rel="prefetch" href="/assets/js/91.f7086540.js"><link rel="prefetch" href="/assets/js/92.30934c1a.js"><link rel="prefetch" href="/assets/js/93.5d8f2ea1.js"><link rel="prefetch" href="/assets/js/94.9afe5427.js"><link rel="prefetch" href="/assets/js/95.ab0ac47c.js"><link rel="prefetch" href="/assets/js/96.aedc6bf2.js"><link rel="prefetch" href="/assets/js/97.954e5754.js"><link rel="prefetch" href="/assets/js/98.ef5c9860.js">
    <link rel="stylesheet" href="/assets/css/0.styles.92f25611.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Dev Tools
</a></div><div class="nav-item"><a href="/computers/" class="nav-link router-link-active">
  Computers
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Dev Tools
</a></div><div class="nav-item"><a href="/computers/" class="nav-link router-link-active">
  Computers
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/computers/" aria-current="page" class="sidebar-link">/computers/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web Protocols</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Security</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Cryptography</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>TPM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/computers/security/tpm/overview.html" aria-current="page" class="active sidebar-link">Overiew</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/computers/security/tpm/overview.html#what-is-tpm" class="sidebar-link">What is TPM?</a></li><li class="sidebar-sub-header"><a href="/computers/security/tpm/overview.html#history" class="sidebar-link">History</a></li><li class="sidebar-sub-header"><a href="/computers/security/tpm/overview.html#terms" class="sidebar-link">Terms</a></li><li class="sidebar-sub-header"><a href="/computers/security/tpm/overview.html#sdks" class="sidebar-link">SDKs</a></li><li class="sidebar-sub-header"><a href="/computers/security/tpm/overview.html#tpm-supported-operations" class="sidebar-link">TPM-supported Operations</a></li><li class="sidebar-sub-header"><a href="/computers/security/tpm/overview.html#resources" class="sidebar-link">Resources</a></li></ul></li><li><a href="/computers/security/tpm/tpm-entities.html" class="sidebar-link">TPM Entities</a></li><li><a href="/computers/security/tpm/tpm-operations.html" class="sidebar-link">TPM Operations</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Blockchain</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h1> <h2 id="what-is-tpm"><a href="#what-is-tpm" class="header-anchor">#</a> What is TPM?</h2> <p>TPM is a cryptographic coprocessor. It's present in personal PCs and servers. It
enables:</p> <ul><li>Identification of devices - a private key embedded in a PC identifies it.
Use-cases:
<ul><li>VPN only allowing client machines that are trusted</li></ul></li> <li>Secure generation of keys</li> <li>Secure storage of keys - TPM can encrypt keys with its public key. Such
encyrpted blobs might be stored on a disk (since TPM has limited storage
capacity)</li> <li>Random number generation</li> <li>NVRAM storage - even if disk is wiped, data stays in TPM (certificate store).
It stores:
<ul><li>root public keys for certificate chains - read-only</li> <li>EKs</li></ul></li> <li>Device health attestation</li></ul> <h2 id="history"><a href="#history" class="header-anchor">#</a> History</h2> <h3 id="tpm-1-1b"><a href="#tpm-1-1b" class="header-anchor">#</a> TPM 1.1b</h3> <p>Functionalities:</p> <ul><li>key generation (only RSA)</li> <li>storage</li> <li>secure authorization</li> <li>device-health attestation</li></ul> <p>It was not standardized too well, different vendors required different drivers.
Additionally dictionary attacks were possible.</p> <h3 id="tpm-1-2"><a href="#tpm-1-2" class="header-anchor">#</a> TPM 1.2</h3> <p>Improvements:</p> <ul><li>a standard software interface</li> <li>a standard package pinout (mostly)</li> <li>protection against dictionary attack</li> <li>direct anonymous attestation</li> <li>a small RAM storage for a certificate (NVRAM)</li></ul> <p>1.2 did not change programming interfaces, software written with 1.1b continued
to work.</p> <p>Microsoft developed a Windows driver and IBM developed an open-source Linux
driver.</p> <h3 id="tpm-2-0"><a href="#tpm-2-0" class="header-anchor">#</a> TPM 2.0</h3> <p>Redesigned from scratch. It doesn't use SHA-1 hashing algorithm due to its
weakness. The specification is <em>algorithm agile</em> - approved alghoritms may be
added/removed in the future. All the authentication techniques were unified with
a technique called <em>enhanced authorization</em>. That allows to establish various
rules regarding when secrets can be read (e.g. you have to identify yourself
with an HMAC key nd you need to use fingerprint reader). TPM 2.0 can do anything
that TPM 1.2 can do.</p> <h2 id="terms"><a href="#terms" class="header-anchor">#</a> Terms</h2> <h3 id="seed"><a href="#seed" class="header-anchor">#</a> Seed</h3> <p>A secret that is used to generate other secrets from it. TPM has limited storage
space, but it might be required to have many secrets for different purposes. Key
Derivation Function (KDF) is used to generate those keys based on a seed. HMAC
might be used as a KDF. The seed is used as the HMAC key.</p> <p>Each hierarchy (three of them) have their own seed (the endorsement primary
seed, the platform primary seed, and the storage primary seed).</p> <h3 id="primary-key"><a href="#primary-key" class="header-anchor">#</a> Primary Key</h3> <p>Root keys in the hierarchy. They have no parent. TPM 1.2 has one key analogical
to TPM 2.0's Primary key - <strong>Storage Root Key (SRK)</strong>, it is stored persistently
in TPM. TPM 2.0 permits unlimited number of Primary Keys (and they don't need to
be persistent).</p> <p>TPM 1.2 could work with just one SRK, because:</p> <ul><li>there was just one algorithm and key size (RSA-2048). TPM 2.0 may use many.</li> <li>there was just one key hierarchy (storage hierarchy). TPM 2.0 has three, each
with at least one root.</li></ul> <p>TPM has limited storage. If we need more primary keys than storage allows, the
primary keys can be recreated when needed. If we supply the same template of the
key (some info about it like algorithm and some unique information) and use the
same seed (there's one per hierarchy) we will get the same key.</p> <h2 id="sdks"><a href="#sdks" class="header-anchor">#</a> SDKs</h2> <p>There are many ways to access TPM. Some are specific to 1.2 or 2.0, some are
specific to the platform (Windows, Linux). Main types:</p> <ul><li>proprietary apps that talk with TPM directly</li> <li>PKCS #11 standard - only basic TPM services</li> <li>MS CAPI (Windows-only) - only basic TPM services</li> <li>TSS (e.g. TrouSerS) - TPM 1.2 only</li> <li>TBS (Windows-only) - low-level</li> <li>CNG (Windows-only)</li> <li>TSS.NET - cross-platform implementation for TPM 2.0</li></ul> <h2 id="tpm-supported-operations"><a href="#tpm-supported-operations" class="header-anchor">#</a> TPM-supported Operations</h2> <p>TPM is able to run the following cryptographic operations:</p> <ul><li>random number generation</li> <li>hashing</li> <li>HMACing</li> <li>RSA</li> <li>symmetric keys</li></ul> <p>Some of these operations expect a handle to a key used during an operation (e.g. HMAC needs a handle to a secret key).</p> <h2 id="resources"><a href="#resources" class="header-anchor">#</a> Resources</h2> <ul><li><a href="https://google.github.io/tpm-js/index.html" target="_blank" rel="noopener noreferrer">https://google.github.io/tpm-js/index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://tpm2-software.github.io/external/" target="_blank" rel="noopener noreferrer">https://tpm2-software.github.io/external/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/computers/security/cryptography/basic-terms.html" class="prev">
        Cryptography Basics
      </a></span> <span class="next"><a href="/computers/security/tpm/tpm-entities.html">
        TPM Entities
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/marcinjahn/technology-notebook/edit/main/src/docs/computers/security/tpm/overview.md" target="_blank" rel="noopener noreferrer">Feel free to contribute to this article!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/31/2022, 9:41:22 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a3cde6a5.js" defer></script><script src="/assets/js/2.3c69ec5e.js" defer></script><script src="/assets/js/24.3a95d909.js" defer></script>
  </body>
</html>
