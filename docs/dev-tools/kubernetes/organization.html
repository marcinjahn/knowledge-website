<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Organizing Objects | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Ways to add some meta data to objects in Kubernetes">
    <meta property="og:url" content="/dev-tools/kubernetes/organization.html">
    <meta property="og:site_name" content="Marcin Jahn | Technology Notebook">
    <meta property="og:title" content="Organizing Objects">
    <meta property="og:description" content="Ways to add some meta data to objects in Kubernetes">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Technology Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.efb9a866.css" as="style"><link rel="preload" href="/assets/js/app.db582d49.js" as="script"><link rel="preload" href="/assets/js/2.a4e811d8.js" as="script"><link rel="preload" href="/assets/js/35.4aa86e02.js" as="script"><link rel="prefetch" href="/assets/js/10.bb2f215b.js"><link rel="prefetch" href="/assets/js/100.a6c9a3ba.js"><link rel="prefetch" href="/assets/js/101.c12a3083.js"><link rel="prefetch" href="/assets/js/102.f0434906.js"><link rel="prefetch" href="/assets/js/103.f64820f7.js"><link rel="prefetch" href="/assets/js/104.dbbb44ce.js"><link rel="prefetch" href="/assets/js/105.291fa17f.js"><link rel="prefetch" href="/assets/js/106.40a4d54d.js"><link rel="prefetch" href="/assets/js/107.58a12415.js"><link rel="prefetch" href="/assets/js/108.8005b8a5.js"><link rel="prefetch" href="/assets/js/109.086898dc.js"><link rel="prefetch" href="/assets/js/11.940b7d97.js"><link rel="prefetch" href="/assets/js/110.95d38c5a.js"><link rel="prefetch" href="/assets/js/111.e537356f.js"><link rel="prefetch" href="/assets/js/12.8831c392.js"><link rel="prefetch" href="/assets/js/13.d7136b9d.js"><link rel="prefetch" href="/assets/js/14.6f54b2fc.js"><link rel="prefetch" href="/assets/js/15.9d855458.js"><link rel="prefetch" href="/assets/js/16.f38eec12.js"><link rel="prefetch" href="/assets/js/17.0f029f7e.js"><link rel="prefetch" href="/assets/js/18.dea0030e.js"><link rel="prefetch" href="/assets/js/19.d8795634.js"><link rel="prefetch" href="/assets/js/20.79428b20.js"><link rel="prefetch" href="/assets/js/21.3c19d81c.js"><link rel="prefetch" href="/assets/js/22.5106d095.js"><link rel="prefetch" href="/assets/js/23.ce213942.js"><link rel="prefetch" href="/assets/js/24.4fcc4a95.js"><link rel="prefetch" href="/assets/js/25.a1221db6.js"><link rel="prefetch" href="/assets/js/26.6496f40e.js"><link rel="prefetch" href="/assets/js/27.5287d41a.js"><link rel="prefetch" href="/assets/js/28.95018bd5.js"><link rel="prefetch" href="/assets/js/29.9d377158.js"><link rel="prefetch" href="/assets/js/3.c6582b6f.js"><link rel="prefetch" href="/assets/js/30.1f83e3ff.js"><link rel="prefetch" href="/assets/js/31.133495b9.js"><link rel="prefetch" href="/assets/js/32.4d2520c8.js"><link rel="prefetch" href="/assets/js/33.b5894bbc.js"><link rel="prefetch" href="/assets/js/34.bd842c98.js"><link rel="prefetch" href="/assets/js/36.8b9b0284.js"><link rel="prefetch" href="/assets/js/37.d35b9f3e.js"><link rel="prefetch" href="/assets/js/38.9b9c4bf7.js"><link rel="prefetch" href="/assets/js/39.9e0e8781.js"><link rel="prefetch" href="/assets/js/4.f1dfd35f.js"><link rel="prefetch" href="/assets/js/40.eb70011f.js"><link rel="prefetch" href="/assets/js/41.e7ce7d9d.js"><link rel="prefetch" href="/assets/js/42.f8576729.js"><link rel="prefetch" href="/assets/js/43.3ca1ff5e.js"><link rel="prefetch" href="/assets/js/44.f1a4516f.js"><link rel="prefetch" href="/assets/js/45.4a8ac055.js"><link rel="prefetch" href="/assets/js/46.7eb2fcbb.js"><link rel="prefetch" href="/assets/js/47.9dd6ee13.js"><link rel="prefetch" href="/assets/js/48.5016bdc7.js"><link rel="prefetch" href="/assets/js/49.141aaf05.js"><link rel="prefetch" href="/assets/js/5.11ed6f82.js"><link rel="prefetch" href="/assets/js/50.0769fc54.js"><link rel="prefetch" href="/assets/js/51.5ea94cf4.js"><link rel="prefetch" href="/assets/js/52.68c42b24.js"><link rel="prefetch" href="/assets/js/53.bbd04171.js"><link rel="prefetch" href="/assets/js/54.5a597e12.js"><link rel="prefetch" href="/assets/js/55.b2c9de2e.js"><link rel="prefetch" href="/assets/js/56.216f25ec.js"><link rel="prefetch" href="/assets/js/57.1530cd2e.js"><link rel="prefetch" href="/assets/js/58.54ac1d7b.js"><link rel="prefetch" href="/assets/js/59.8c365fef.js"><link rel="prefetch" href="/assets/js/6.0e194db1.js"><link rel="prefetch" href="/assets/js/60.2ba7818d.js"><link rel="prefetch" href="/assets/js/61.a5be4b08.js"><link rel="prefetch" href="/assets/js/62.97dbfa96.js"><link rel="prefetch" href="/assets/js/63.0466dbd6.js"><link rel="prefetch" href="/assets/js/64.bd40d22b.js"><link rel="prefetch" href="/assets/js/65.87a0f3fb.js"><link rel="prefetch" href="/assets/js/66.4465f1d0.js"><link rel="prefetch" href="/assets/js/67.caa76145.js"><link rel="prefetch" href="/assets/js/68.9c170153.js"><link rel="prefetch" href="/assets/js/69.465a6f86.js"><link rel="prefetch" href="/assets/js/7.077b557b.js"><link rel="prefetch" href="/assets/js/70.e78ce0c2.js"><link rel="prefetch" href="/assets/js/71.02a299a7.js"><link rel="prefetch" href="/assets/js/72.d8f8aed7.js"><link rel="prefetch" href="/assets/js/73.2995175f.js"><link rel="prefetch" href="/assets/js/74.63e5b993.js"><link rel="prefetch" href="/assets/js/75.fd6dd7e3.js"><link rel="prefetch" href="/assets/js/76.4818349c.js"><link rel="prefetch" href="/assets/js/77.fea59407.js"><link rel="prefetch" href="/assets/js/78.4c187a76.js"><link rel="prefetch" href="/assets/js/79.8046a510.js"><link rel="prefetch" href="/assets/js/8.49031e18.js"><link rel="prefetch" href="/assets/js/80.fa95cca8.js"><link rel="prefetch" href="/assets/js/81.8d15300e.js"><link rel="prefetch" href="/assets/js/82.0eebfa2f.js"><link rel="prefetch" href="/assets/js/83.3aecd279.js"><link rel="prefetch" href="/assets/js/84.74350192.js"><link rel="prefetch" href="/assets/js/85.8f97656c.js"><link rel="prefetch" href="/assets/js/86.d8e7fb51.js"><link rel="prefetch" href="/assets/js/87.f72664e2.js"><link rel="prefetch" href="/assets/js/88.13ab4fdc.js"><link rel="prefetch" href="/assets/js/89.9ae6824c.js"><link rel="prefetch" href="/assets/js/9.8fc05d10.js"><link rel="prefetch" href="/assets/js/90.aa7a5a6c.js"><link rel="prefetch" href="/assets/js/91.6b37a7d4.js"><link rel="prefetch" href="/assets/js/92.9e18ce5b.js"><link rel="prefetch" href="/assets/js/93.7b53a7bc.js"><link rel="prefetch" href="/assets/js/94.fe9930a5.js"><link rel="prefetch" href="/assets/js/95.6ff018ef.js"><link rel="prefetch" href="/assets/js/96.3cb2b8d7.js"><link rel="prefetch" href="/assets/js/97.91897f81.js"><link rel="prefetch" href="/assets/js/98.25d2c3f1.js"><link rel="prefetch" href="/assets/js/99.7f4f5db5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.efb9a866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link router-link-active">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link router-link-active">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/dev-tools/" aria-current="page" class="sidebar-link">/dev-tools/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Kubernetes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/kubernetes/meaning.html" class="sidebar-link">Meaning and Purpose</a></li><li><a href="/dev-tools/kubernetes/cluster.html" class="sidebar-link">Cluster</a></li><li><a href="/dev-tools/kubernetes/dev-env.html" class="sidebar-link">Dev Environment</a></li><li><a href="/dev-tools/kubernetes/api.html" class="sidebar-link">Kubernetes API</a></li><li><a href="/dev-tools/kubernetes/objects.html" class="sidebar-link">Objects</a></li><li><a href="/dev-tools/kubernetes/pods.html" class="sidebar-link">Pods</a></li><li><a href="/dev-tools/kubernetes/deployments.html" class="sidebar-link">Deployments</a></li><li><a href="/dev-tools/kubernetes/events.html" class="sidebar-link">Events</a></li><li><a href="/dev-tools/kubernetes/storage.html" class="sidebar-link">Storage</a></li><li><a href="/dev-tools/kubernetes/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/dev-tools/kubernetes/organization.html" aria-current="page" class="active sidebar-link">Organizing Objects</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/kubernetes/organization.html#namespaces" class="sidebar-link">Namespaces</a></li><li class="sidebar-sub-header"><a href="/dev-tools/kubernetes/organization.html#labels" class="sidebar-link">Labels</a></li><li class="sidebar-sub-header"><a href="/dev-tools/kubernetes/organization.html#annotations" class="sidebar-link">Annotations</a></li></ul></li><li><a href="/dev-tools/kubernetes/services.html" class="sidebar-link">Services</a></li><li><a href="/dev-tools/kubernetes/ingress.html" class="sidebar-link">Ingress</a></li><li><a href="/dev-tools/kubernetes/helm.html" class="sidebar-link">Helm</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ansible</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Azure</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="organizing-objects"><a href="#organizing-objects" class="header-anchor">#</a> Organizing Objects</h1> <p>K8s has <code>Namespaces</code> and <code>Labels</code> for organizing objects.</p> <h2 id="namespaces"><a href="#namespaces" class="header-anchor">#</a> Namespaces</h2> <p><img src="https://i.imgur.com/fwwV6OV.png" alt=""></p> <p>Different teams can deploy their objects in separate namespaces. Each team gets
access to one or more namespaces. Objects in different namespaces can use the
sama names.</p> <p>Not all object types are namespaced. E.g, Nodes, PersistentVolumes,
StorageClasses, Namespaces are not namespaced. They are cluster-scoped.</p> <p><img src="https://i.imgur.com/A7IYoPG.png" alt=""></p> <p>Deleting a namespace automatically deletes all objects in it.</p> <h3 id="default-namespaces"><a href="#default-namespaces" class="header-anchor">#</a> Default Namespaces</h3> <p>Each K8s cluster contains a few predefined namespaces. Those prefixed with
<code>kube-</code> are K8s system namespaces.</p> <h3 id="isolation"><a href="#isolation" class="header-anchor">#</a> Isolation</h3> <p>Other than allowing names of objects to be the same in different namespaces,
there is no isolation:</p> <ul><li>pods from different namespaces can run on the same node</li> <li>by default there is no network isolation - a pod from one ns can talk to pods
from another ns. Isolation can be configured using a <code>NetworkPolicy</code> object.</li></ul> <p>Namespaces should not be used to separate production workloads from development
environments. It's better to use separate clusters.</p> <h2 id="labels"><a href="#labels" class="header-anchor">#</a> Labels</h2> <p>Labels are key-value pairs that can be added to any object to decorate it with
some meta data. Labels are placed in <code>metadata.labels</code> section of YAML.</p> <p>K8s uses labels on its own. For example Node objects have <code>kubernetes/io.arch</code>
labels idicating CPU architecture of a node. K8s does not usually add labels to
objects that users create.</p> <p>Labels have various limitations in length, and accepted characters of keys and
values.</p> <h3 id="querying"><a href="#querying" class="header-anchor">#</a> Querying</h3> <p>Objects can be queried by the values of their labels. Operators:</p> <ul><li>=</li> <li>!=</li> <li>in</li> <li>notin</li></ul> <p>Kubectl examples:</p> <ul><li><code>k get pods -l app=webapp</code></li> <li><code>k get pods -l app=webapp,rel=canary</code></li> <li><code>k get pods -l 'app in (quiz, quote)'</code></li> <li><code>k delete pod -l rel=canary</code></li></ul> <h3 id="selectors"><a href="#selectors" class="header-anchor">#</a> Selectors</h3> <p>Some objects accept label selections. For example in the YAML of a pod, under
<code>spec.nodeSelector</code> we can specify labels and their values that we required on a
node for the pod to run on it. It supports only the <code>=</code> operator. Other objects
do support other operators.</p> <p>Similarly, a PersistentVolumeClaim may define required labels of the
PersistentVolume that it will attach to. The YAML path is
<code>spec.selector.matchLabels</code>.</p> <h4 id="field-selectors"><a href="#field-selectors" class="header-anchor">#</a> Field Selectors</h4> <p>Similarly there are also <strong>field selectors</strong>. They can be used with kubectl (or
K8s API) to filter objects based on some object properties. Not all properties
are supported with selectors. For example:</p> <p><code>k get pods --field-selector spec.nodeName=kind-worker-2</code> <code>kubectl get po --field-selector status.phase!=Running --all-namespaces</code></p> <h2 id="annotations"><a href="#annotations" class="header-anchor">#</a> Annotations</h2> <p>They are similar to labels. They have less limitations regarding length and
content (e.g. annotation can have 256KB and it can contain any character). They
can't be used to filter objects. They are placed in <code>metadata.annotations</code>.</p> <p>Various controllers add annotations to objects if the information can't be
stored in other fields.</p> <p>Sometimes, before changing structure of objects, annotations are used as a
testing ground for K8s. After some time, annotation gets deprecated, and a new
field is introduced in an object. After another few releases annotation support
is removed entirely.</p> <p>Annotations are a good place to store various information about the object:
description, author, git hash, build timestamp, etc. For example, Azure pipeline
adds various information to the annotations of the objects it deploys.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dev-tools/kubernetes/configuration.html" class="prev">
        Configuration
      </a></span> <span class="next"><a href="/dev-tools/kubernetes/services.html">
        Services
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/6/2022, 9:08:43 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.db582d49.js" defer></script><script src="/assets/js/2.a4e811d8.js" defer></script><script src="/assets/js/35.4aa86e02.js" defer></script>
  </body>
</html>
