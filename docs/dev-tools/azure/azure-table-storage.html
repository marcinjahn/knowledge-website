<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Table Storage | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Some good practices to be used with Azure Table Storage">
    <meta property="og:url" content="/dev-tools/azure/azure-table-storage.html">
    <meta property="og:site_name" content="Marcin Jahn | Technology Notebook">
    <meta property="og:title" content="Table Storage">
    <meta property="og:description" content="Some good practices to be used with Azure Table Storage">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Technology Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.ab6b7e29.css" as="style"><link rel="preload" href="/assets/js/app.dbf283c5.js" as="script"><link rel="preload" href="/assets/js/2.ac382c5c.js" as="script"><link rel="preload" href="/assets/js/27.d78fbfe7.js" as="script"><link rel="prefetch" href="/assets/js/10.4d82ed25.js"><link rel="prefetch" href="/assets/js/100.24221bca.js"><link rel="prefetch" href="/assets/js/101.751f1819.js"><link rel="prefetch" href="/assets/js/102.6c7c78f3.js"><link rel="prefetch" href="/assets/js/103.d8bed365.js"><link rel="prefetch" href="/assets/js/104.fa10462e.js"><link rel="prefetch" href="/assets/js/105.d54e91dd.js"><link rel="prefetch" href="/assets/js/106.55876240.js"><link rel="prefetch" href="/assets/js/107.62154bba.js"><link rel="prefetch" href="/assets/js/108.34e1dfa2.js"><link rel="prefetch" href="/assets/js/109.5174011c.js"><link rel="prefetch" href="/assets/js/11.68cc34a7.js"><link rel="prefetch" href="/assets/js/110.27fb3c5b.js"><link rel="prefetch" href="/assets/js/111.397d985c.js"><link rel="prefetch" href="/assets/js/112.eb5f177f.js"><link rel="prefetch" href="/assets/js/113.d406be71.js"><link rel="prefetch" href="/assets/js/114.84d6267a.js"><link rel="prefetch" href="/assets/js/115.113e0851.js"><link rel="prefetch" href="/assets/js/116.2bb436be.js"><link rel="prefetch" href="/assets/js/117.adc02681.js"><link rel="prefetch" href="/assets/js/118.7f426ebc.js"><link rel="prefetch" href="/assets/js/119.6062934e.js"><link rel="prefetch" href="/assets/js/12.d906b391.js"><link rel="prefetch" href="/assets/js/120.93fd457b.js"><link rel="prefetch" href="/assets/js/121.9cdad2f8.js"><link rel="prefetch" href="/assets/js/122.6b99a0cd.js"><link rel="prefetch" href="/assets/js/123.0549ddb0.js"><link rel="prefetch" href="/assets/js/124.fdf64d25.js"><link rel="prefetch" href="/assets/js/125.93e39ce1.js"><link rel="prefetch" href="/assets/js/126.1a6e0641.js"><link rel="prefetch" href="/assets/js/127.85c32f31.js"><link rel="prefetch" href="/assets/js/128.4c3a4b58.js"><link rel="prefetch" href="/assets/js/13.ffb80372.js"><link rel="prefetch" href="/assets/js/14.b4c1baab.js"><link rel="prefetch" href="/assets/js/15.de52a73b.js"><link rel="prefetch" href="/assets/js/16.0482f593.js"><link rel="prefetch" href="/assets/js/17.eb26534b.js"><link rel="prefetch" href="/assets/js/18.398fbdec.js"><link rel="prefetch" href="/assets/js/19.f9f8f254.js"><link rel="prefetch" href="/assets/js/20.6a721873.js"><link rel="prefetch" href="/assets/js/21.08fdbf98.js"><link rel="prefetch" href="/assets/js/22.c73c740f.js"><link rel="prefetch" href="/assets/js/23.7866f877.js"><link rel="prefetch" href="/assets/js/24.50e6ab88.js"><link rel="prefetch" href="/assets/js/25.d3c33607.js"><link rel="prefetch" href="/assets/js/26.00326489.js"><link rel="prefetch" href="/assets/js/28.6b04b182.js"><link rel="prefetch" href="/assets/js/29.7745e3d9.js"><link rel="prefetch" href="/assets/js/3.7436c0e0.js"><link rel="prefetch" href="/assets/js/30.e5427093.js"><link rel="prefetch" href="/assets/js/31.72d904a2.js"><link rel="prefetch" href="/assets/js/32.732c5ad7.js"><link rel="prefetch" href="/assets/js/33.31f2d91d.js"><link rel="prefetch" href="/assets/js/34.fe4d19f2.js"><link rel="prefetch" href="/assets/js/35.e575fc2c.js"><link rel="prefetch" href="/assets/js/36.c001c378.js"><link rel="prefetch" href="/assets/js/37.bb132a5f.js"><link rel="prefetch" href="/assets/js/38.eff64d98.js"><link rel="prefetch" href="/assets/js/39.8b000d21.js"><link rel="prefetch" href="/assets/js/4.8fe0060c.js"><link rel="prefetch" href="/assets/js/40.b9734596.js"><link rel="prefetch" href="/assets/js/41.a1fa52fc.js"><link rel="prefetch" href="/assets/js/42.982f7954.js"><link rel="prefetch" href="/assets/js/43.27563945.js"><link rel="prefetch" href="/assets/js/44.d1c36e01.js"><link rel="prefetch" href="/assets/js/45.ebbc5e79.js"><link rel="prefetch" href="/assets/js/46.1631f11c.js"><link rel="prefetch" href="/assets/js/47.f37bc8ea.js"><link rel="prefetch" href="/assets/js/48.7156231c.js"><link rel="prefetch" href="/assets/js/49.41972e44.js"><link rel="prefetch" href="/assets/js/5.8d14cfa6.js"><link rel="prefetch" href="/assets/js/50.5e1aa6a3.js"><link rel="prefetch" href="/assets/js/51.050c0a46.js"><link rel="prefetch" href="/assets/js/52.3b200d64.js"><link rel="prefetch" href="/assets/js/53.d77e4efb.js"><link rel="prefetch" href="/assets/js/54.c27b3f8d.js"><link rel="prefetch" href="/assets/js/55.b9ac16fb.js"><link rel="prefetch" href="/assets/js/56.ce95650d.js"><link rel="prefetch" href="/assets/js/57.e3ec257f.js"><link rel="prefetch" href="/assets/js/58.1b2bf9b3.js"><link rel="prefetch" href="/assets/js/59.089a5b96.js"><link rel="prefetch" href="/assets/js/6.1002c578.js"><link rel="prefetch" href="/assets/js/60.f294f0cf.js"><link rel="prefetch" href="/assets/js/61.5cb64144.js"><link rel="prefetch" href="/assets/js/62.2614cd5f.js"><link rel="prefetch" href="/assets/js/63.4143c22d.js"><link rel="prefetch" href="/assets/js/64.1494c62b.js"><link rel="prefetch" href="/assets/js/65.f8766751.js"><link rel="prefetch" href="/assets/js/66.79fc8cff.js"><link rel="prefetch" href="/assets/js/67.fcd344f7.js"><link rel="prefetch" href="/assets/js/68.b99effdc.js"><link rel="prefetch" href="/assets/js/69.6bf9e1d4.js"><link rel="prefetch" href="/assets/js/7.97d39fe9.js"><link rel="prefetch" href="/assets/js/70.25dc64f9.js"><link rel="prefetch" href="/assets/js/71.3483f82f.js"><link rel="prefetch" href="/assets/js/72.804a0f56.js"><link rel="prefetch" href="/assets/js/73.7f306693.js"><link rel="prefetch" href="/assets/js/74.d608625c.js"><link rel="prefetch" href="/assets/js/75.ea7f78f2.js"><link rel="prefetch" href="/assets/js/76.d6ab5d1e.js"><link rel="prefetch" href="/assets/js/77.572c0637.js"><link rel="prefetch" href="/assets/js/78.8eec77be.js"><link rel="prefetch" href="/assets/js/79.556dcff8.js"><link rel="prefetch" href="/assets/js/8.9e5a5870.js"><link rel="prefetch" href="/assets/js/80.68221027.js"><link rel="prefetch" href="/assets/js/81.ca39b0f8.js"><link rel="prefetch" href="/assets/js/82.3fa98316.js"><link rel="prefetch" href="/assets/js/83.7cd5de66.js"><link rel="prefetch" href="/assets/js/84.5763b63f.js"><link rel="prefetch" href="/assets/js/85.8118e0ec.js"><link rel="prefetch" href="/assets/js/86.b31f3196.js"><link rel="prefetch" href="/assets/js/87.7a69c6e6.js"><link rel="prefetch" href="/assets/js/88.5c876ad6.js"><link rel="prefetch" href="/assets/js/89.e9d02288.js"><link rel="prefetch" href="/assets/js/9.68cf3391.js"><link rel="prefetch" href="/assets/js/90.1ec4fa03.js"><link rel="prefetch" href="/assets/js/91.ace2387a.js"><link rel="prefetch" href="/assets/js/92.2a77f28d.js"><link rel="prefetch" href="/assets/js/93.e69ae995.js"><link rel="prefetch" href="/assets/js/94.36af570c.js"><link rel="prefetch" href="/assets/js/95.694be630.js"><link rel="prefetch" href="/assets/js/96.92f06426.js"><link rel="prefetch" href="/assets/js/97.69e066bd.js"><link rel="prefetch" href="/assets/js/98.f8237bfd.js"><link rel="prefetch" href="/assets/js/99.a4c05e10.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ab6b7e29.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link router-link-active">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-10a38898><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-10a38898><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-10a38898><img src="/img/github.webp" data-v-f9b87572></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link router-link-active">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-10a38898><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-10a38898><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-10a38898><img src="/img/github.webp" data-v-f9b87572></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/dev-tools/" aria-current="page" class="sidebar-link">/dev-tools/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SQL Server</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ansible</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Azure</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/azure/azure-table-storage.html" aria-current="page" class="active sidebar-link">Table Storage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/azure/azure-table-storage.html#characteristics" class="sidebar-link">Characteristics</a></li><li class="sidebar-sub-header"><a href="/dev-tools/azure/azure-table-storage.html#performance" class="sidebar-link">Performance</a></li><li class="sidebar-sub-header"><a href="/dev-tools/azure/azure-table-storage.html#tier" class="sidebar-link">Tier</a></li></ul></li><li><a href="/dev-tools/azure/identity.html" class="sidebar-link">Microsoft Identity</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="table-storage"><a href="#table-storage" class="header-anchor">#</a> Table Storage</h1> <h2 id="characteristics"><a href="#characteristics" class="header-anchor">#</a> Characteristics</h2> <ul><li>stores NoSQL data (a single table can store entities with varying properties)</li> <li>lower in cost compard to SQL</li> <li>stores any number of entities</li> <li>storage account can have any number of tables</li> <li>good for structured, non-relational data</li> <li>supports OData protocol</li> <li>one entity can be 1MB max (2MB in CosmosDB Table API)</li> <li>one entity can have max 252 properties (+ 3 system properties: timestamp,
partition key, row key)</li></ul> <h2 id="performance"><a href="#performance" class="header-anchor">#</a> Performance</h2> <h3 id="indexing"><a href="#indexing" class="header-anchor">#</a> Indexing</h3> <p>Entities with the same partition key can be queried more quickly, and
inserted/updated in atomic operations. An entity's row key is its unique
identifier within a partition.</p> <p>In Storage Account there is only primary index: PartitionKey and RowKey. In
CosmosDB all properties are indexed and there is no manual index management.</p> <p>Entities ofthe same PartitionKey can be updated in a single, atomic batch
transaction (max 100 operations (4MB)).</p> <p>There is no limit on number of partitions and their number does not impact
performance.</p> <p>More partitions = better loadbalancing, but also limits the ability to perform
atomic transactions</p> <h3 id="querying"><a href="#querying" class="header-anchor">#</a> Querying</h3> <p>Types of querying:</p> <ul><li>A Point Query is the most efficient lookup to use and is recommended to be
used for high-volume lookups or lookups requiring lowest latency. Such a query
can use the indexes to locate an individual entity very efficiently by
specifying both the PartitionKey and RowKey values. For example:
$filter=(PartitionKey eq 'Sales') and (RowKey eq '2')</li> <li>Second best is a Range Query that uses the PartitionKey and filters on a range
of RowKey values to return more than one entity. The PartitionKey value
identifies a specific partition, and the RowKey values identify a subset of
the entities in that partition. For example: $filter=PartitionKey eq 'Sales'
and RowKey ge 'S' and RowKey lt 'T'</li> <li>Third best is a Partition Scan that uses the PartitionKey and filters on
another non-key property and that may return more than one entity. The
PartitionKey value identifies a specific partition, and the property values
select for a subset of the entities in that partition. For example:
$filter=PartitionKey eq 'Sales' and LastName eq 'Smith'</li> <li>A Table Scan does not include the PartitionKey and is very inefficient because
it searches all of the partitions that make up your table in turn for any
matching entities. It will perform a table scan regardless of whether or not
your filter uses the RowKey. For example: $filter=LastName eq 'Jones'</li> <li>Queries that return multiple entities return them sorted in PartitionKey and
RowKey order. To avoid resorting the entities in the client, choose a RowKey
that defines the most common sort order.</li></ul> <p>If your client application needs only a limited set of properties from the
entities in your table, you can use projection to limit the size of the returned
data set. As with filtering, projection helps to reduce network load and client
processing.</p> <h2 id="tier"><a href="#tier" class="header-anchor">#</a> Tier</h2> <p><strong>General-purpose V2</strong> is the recommended choice. It seems that for <strong>Table
Storage</strong> the Standard tier is recommended. Premium does not bring anything to
the table in this case.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dev-tools/ansible/ansible.html" class="prev">
        Ansible
      </a></span> <span class="next"><a href="/dev-tools/azure/identity.html">
        Microsoft Identity
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/13/2022, 7:18:05 AM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.dbf283c5.js" defer></script><script src="/assets/js/2.ac382c5c.js" defer></script><script src="/assets/js/27.d78fbfe7.js" defer></script>
  </body>
</html>
