<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Modules | Marcin Jahn | Tech Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Organizing code with modules in Angular SPA framework">
    <meta property="og:url" content="/programming/angular/modules.html">
    <meta property="og:site_name" content="Marcin Jahn | Tech Notebook">
    <meta property="og:title" content="Modules">
    <meta property="og:description" content="Organizing code with modules in Angular SPA framework">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Tech Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="#7D84B2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.907785b2.css" as="style"><link rel="preload" href="/assets/js/app.c0e280fd.js" as="script"><link rel="preload" href="/assets/js/2.e154a615.js" as="script"><link rel="preload" href="/assets/js/49.0ef86bca.js" as="script"><link rel="prefetch" href="/assets/js/10.4fa76c57.js"><link rel="prefetch" href="/assets/js/100.ac584d4e.js"><link rel="prefetch" href="/assets/js/101.6cae409e.js"><link rel="prefetch" href="/assets/js/102.61986edd.js"><link rel="prefetch" href="/assets/js/103.ceddef25.js"><link rel="prefetch" href="/assets/js/104.d91fc170.js"><link rel="prefetch" href="/assets/js/105.62b570cc.js"><link rel="prefetch" href="/assets/js/106.3889bfc7.js"><link rel="prefetch" href="/assets/js/107.7292c153.js"><link rel="prefetch" href="/assets/js/108.44f3837d.js"><link rel="prefetch" href="/assets/js/109.768aa32d.js"><link rel="prefetch" href="/assets/js/11.c22c2dd5.js"><link rel="prefetch" href="/assets/js/110.6fc9035b.js"><link rel="prefetch" href="/assets/js/111.6c546f56.js"><link rel="prefetch" href="/assets/js/112.bb53efef.js"><link rel="prefetch" href="/assets/js/113.1de1aba5.js"><link rel="prefetch" href="/assets/js/114.f1895934.js"><link rel="prefetch" href="/assets/js/115.ac23631a.js"><link rel="prefetch" href="/assets/js/116.4d7b53ab.js"><link rel="prefetch" href="/assets/js/117.ce81a8d2.js"><link rel="prefetch" href="/assets/js/118.b96bef2d.js"><link rel="prefetch" href="/assets/js/119.8aff28a2.js"><link rel="prefetch" href="/assets/js/12.80be005c.js"><link rel="prefetch" href="/assets/js/120.ad876841.js"><link rel="prefetch" href="/assets/js/121.38a349c3.js"><link rel="prefetch" href="/assets/js/122.3cfe414b.js"><link rel="prefetch" href="/assets/js/123.604ac053.js"><link rel="prefetch" href="/assets/js/124.7a367e13.js"><link rel="prefetch" href="/assets/js/125.1d66b980.js"><link rel="prefetch" href="/assets/js/126.9783f3dd.js"><link rel="prefetch" href="/assets/js/127.c7c47b88.js"><link rel="prefetch" href="/assets/js/128.ad02ff55.js"><link rel="prefetch" href="/assets/js/129.662aea38.js"><link rel="prefetch" href="/assets/js/13.7a44d7be.js"><link rel="prefetch" href="/assets/js/130.18f7c95b.js"><link rel="prefetch" href="/assets/js/131.99e2065f.js"><link rel="prefetch" href="/assets/js/132.2afed716.js"><link rel="prefetch" href="/assets/js/133.af785964.js"><link rel="prefetch" href="/assets/js/134.036228c7.js"><link rel="prefetch" href="/assets/js/135.54b56660.js"><link rel="prefetch" href="/assets/js/136.616ad9e7.js"><link rel="prefetch" href="/assets/js/137.7096493d.js"><link rel="prefetch" href="/assets/js/138.fb7b02c0.js"><link rel="prefetch" href="/assets/js/139.585adb50.js"><link rel="prefetch" href="/assets/js/14.ab8e1dcc.js"><link rel="prefetch" href="/assets/js/140.45aab80e.js"><link rel="prefetch" href="/assets/js/141.871daeef.js"><link rel="prefetch" href="/assets/js/142.e21b99da.js"><link rel="prefetch" href="/assets/js/143.2509d0d9.js"><link rel="prefetch" href="/assets/js/144.d6be8bcd.js"><link rel="prefetch" href="/assets/js/145.b62db9bc.js"><link rel="prefetch" href="/assets/js/146.d6c9db31.js"><link rel="prefetch" href="/assets/js/147.7604bdf0.js"><link rel="prefetch" href="/assets/js/148.cef9ae52.js"><link rel="prefetch" href="/assets/js/149.3f747f5c.js"><link rel="prefetch" href="/assets/js/15.89e1dd21.js"><link rel="prefetch" href="/assets/js/150.36596885.js"><link rel="prefetch" href="/assets/js/151.32cd3891.js"><link rel="prefetch" href="/assets/js/152.94984552.js"><link rel="prefetch" href="/assets/js/153.d6c6173e.js"><link rel="prefetch" href="/assets/js/154.746067b1.js"><link rel="prefetch" href="/assets/js/155.d238c556.js"><link rel="prefetch" href="/assets/js/156.c769970b.js"><link rel="prefetch" href="/assets/js/157.ee6511f0.js"><link rel="prefetch" href="/assets/js/158.f7cbc413.js"><link rel="prefetch" href="/assets/js/159.b34ae2c8.js"><link rel="prefetch" href="/assets/js/16.2a55624c.js"><link rel="prefetch" href="/assets/js/160.d0714dbd.js"><link rel="prefetch" href="/assets/js/161.153fa986.js"><link rel="prefetch" href="/assets/js/162.ae313346.js"><link rel="prefetch" href="/assets/js/163.6d17baf2.js"><link rel="prefetch" href="/assets/js/164.ef3d8d94.js"><link rel="prefetch" href="/assets/js/165.8baa923d.js"><link rel="prefetch" href="/assets/js/17.17b698d6.js"><link rel="prefetch" href="/assets/js/18.262c9795.js"><link rel="prefetch" href="/assets/js/19.cf1af818.js"><link rel="prefetch" href="/assets/js/20.956ebc37.js"><link rel="prefetch" href="/assets/js/21.68b3a94e.js"><link rel="prefetch" href="/assets/js/22.c89acf3d.js"><link rel="prefetch" href="/assets/js/23.7830c31b.js"><link rel="prefetch" href="/assets/js/24.22f6a490.js"><link rel="prefetch" href="/assets/js/25.acdbbc39.js"><link rel="prefetch" href="/assets/js/26.885530c7.js"><link rel="prefetch" href="/assets/js/27.8b94e32c.js"><link rel="prefetch" href="/assets/js/28.74a11e43.js"><link rel="prefetch" href="/assets/js/29.3bae65c8.js"><link rel="prefetch" href="/assets/js/3.54e9968c.js"><link rel="prefetch" href="/assets/js/30.cb2db743.js"><link rel="prefetch" href="/assets/js/31.a523528b.js"><link rel="prefetch" href="/assets/js/32.3b90ff2a.js"><link rel="prefetch" href="/assets/js/33.e414a879.js"><link rel="prefetch" href="/assets/js/34.1bec9902.js"><link rel="prefetch" href="/assets/js/35.a682d85c.js"><link rel="prefetch" href="/assets/js/36.2c3f8f9d.js"><link rel="prefetch" href="/assets/js/37.c37d1fcd.js"><link rel="prefetch" href="/assets/js/38.18cb3d3d.js"><link rel="prefetch" href="/assets/js/39.48e1c6c4.js"><link rel="prefetch" href="/assets/js/4.128ef882.js"><link rel="prefetch" href="/assets/js/40.85b85b8c.js"><link rel="prefetch" href="/assets/js/41.94d3e608.js"><link rel="prefetch" href="/assets/js/42.4216a2f8.js"><link rel="prefetch" href="/assets/js/43.d1023d2d.js"><link rel="prefetch" href="/assets/js/44.8dad369c.js"><link rel="prefetch" href="/assets/js/45.ff361dd7.js"><link rel="prefetch" href="/assets/js/46.49304298.js"><link rel="prefetch" href="/assets/js/47.1c5831ae.js"><link rel="prefetch" href="/assets/js/48.fb50793f.js"><link rel="prefetch" href="/assets/js/5.84ed60bf.js"><link rel="prefetch" href="/assets/js/50.c9f420ff.js"><link rel="prefetch" href="/assets/js/51.5b12a7c7.js"><link rel="prefetch" href="/assets/js/52.0450ff83.js"><link rel="prefetch" href="/assets/js/53.813a6074.js"><link rel="prefetch" href="/assets/js/54.a1c4ada0.js"><link rel="prefetch" href="/assets/js/55.6b0e7341.js"><link rel="prefetch" href="/assets/js/56.3c99382c.js"><link rel="prefetch" href="/assets/js/57.053c730a.js"><link rel="prefetch" href="/assets/js/58.c797622b.js"><link rel="prefetch" href="/assets/js/59.8072a137.js"><link rel="prefetch" href="/assets/js/6.5229f742.js"><link rel="prefetch" href="/assets/js/60.204d9351.js"><link rel="prefetch" href="/assets/js/61.8a4697b9.js"><link rel="prefetch" href="/assets/js/62.0c70df37.js"><link rel="prefetch" href="/assets/js/63.9fc89ae8.js"><link rel="prefetch" href="/assets/js/64.3c9e7981.js"><link rel="prefetch" href="/assets/js/65.833ea0cd.js"><link rel="prefetch" href="/assets/js/66.d16a90ea.js"><link rel="prefetch" href="/assets/js/67.61c9c0fe.js"><link rel="prefetch" href="/assets/js/68.be8fb435.js"><link rel="prefetch" href="/assets/js/69.20af85b4.js"><link rel="prefetch" href="/assets/js/7.46595839.js"><link rel="prefetch" href="/assets/js/70.7f3b845b.js"><link rel="prefetch" href="/assets/js/71.3242fecb.js"><link rel="prefetch" href="/assets/js/72.4e26de85.js"><link rel="prefetch" href="/assets/js/73.acc8589f.js"><link rel="prefetch" href="/assets/js/74.2e3b1a7b.js"><link rel="prefetch" href="/assets/js/75.0464fe89.js"><link rel="prefetch" href="/assets/js/76.a0e4dd78.js"><link rel="prefetch" href="/assets/js/77.6de0b2a7.js"><link rel="prefetch" href="/assets/js/78.a11de57b.js"><link rel="prefetch" href="/assets/js/79.dc5e1222.js"><link rel="prefetch" href="/assets/js/8.141a7866.js"><link rel="prefetch" href="/assets/js/80.dcdc8db2.js"><link rel="prefetch" href="/assets/js/81.4f75582f.js"><link rel="prefetch" href="/assets/js/82.698ebee6.js"><link rel="prefetch" href="/assets/js/83.2cbac3aa.js"><link rel="prefetch" href="/assets/js/84.9bdc05f4.js"><link rel="prefetch" href="/assets/js/85.1dc5f3ba.js"><link rel="prefetch" href="/assets/js/86.0365a114.js"><link rel="prefetch" href="/assets/js/87.cbc380f5.js"><link rel="prefetch" href="/assets/js/88.9ea99cb0.js"><link rel="prefetch" href="/assets/js/89.9f1da8dd.js"><link rel="prefetch" href="/assets/js/9.1b53687b.js"><link rel="prefetch" href="/assets/js/90.42328d36.js"><link rel="prefetch" href="/assets/js/91.f6c61ce0.js"><link rel="prefetch" href="/assets/js/92.b4ad9759.js"><link rel="prefetch" href="/assets/js/93.57529e13.js"><link rel="prefetch" href="/assets/js/94.99a4d21c.js"><link rel="prefetch" href="/assets/js/95.d28237ff.js"><link rel="prefetch" href="/assets/js/96.9af6339a.js"><link rel="prefetch" href="/assets/js/97.4f0642bd.js"><link rel="prefetch" href="/assets/js/98.e98c0391.js"><link rel="prefetch" href="/assets/js/99.72f7c537.js">
    <link rel="stylesheet" href="/assets/css/0.styles.907785b2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Tech Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/dotnet.webp"></span> <span>.NET</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span class="img-container"><img src="/sidebar-imgs/angular.webp"></span> <span>Angular</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/angular/overview.html" class="sidebar-link">Overview</a></li><li><a href="/programming/angular/components.html" class="sidebar-link">Components</a></li><li><a href="/programming/angular/directives.html" class="sidebar-link">Directives</a></li><li><a href="/programming/angular/services.html" class="sidebar-link">Services and DI</a></li><li><a href="/programming/angular/routing.html" class="sidebar-link">Routing</a></li><li><a href="/programming/angular/observables.html" class="sidebar-link">Observables</a></li><li><a href="/programming/angular/forms.html" class="sidebar-link">Forms</a></li><li><a href="/programming/angular/pipes.html" class="sidebar-link">Pipes</a></li><li><a href="/programming/angular/http.html" class="sidebar-link">HTTP</a></li><li><a href="/programming/angular/modules.html" aria-current="page" class="active sidebar-link">Modules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/angular/modules.html#ngmodule-decorator" class="sidebar-link">ngModule Decorator</a></li><li class="sidebar-sub-header"><a href="/programming/angular/modules.html#organizing-code-into-modules" class="sidebar-link">Organizing Code into Modules</a></li><li class="sidebar-sub-header"><a href="/programming/angular/modules.html#routes" class="sidebar-link">Routes</a></li><li class="sidebar-sub-header"><a href="/programming/angular/modules.html#lazy-loading" class="sidebar-link">Lazy Loading</a></li></ul></li><li><a href="/programming/angular/ngrx.html" class="sidebar-link">NgRx</a></li><li><a href="/programming/angular/tips.html" class="sidebar-link">Tips</a></li><li><a href="/programming/angular/standalone-components.html" class="sidebar-link">Standalone Components</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/javascript.webp"></span> <span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/rust.webp"></span> <span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/c.webp"></span> <span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/css.webp"></span> <span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/unity.webp"></span> <span>Unity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/algorithms.webp"></span> <span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/architecture.webp"></span> <span>Architecture</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="modules-in-angular"><a href="#modules-in-angular" class="header-anchor">#</a> Modules in Angular</h1> <p>Modules are a way of bundling various Angular entities together:</p> <ul><li>components,</li> <li>directives,</li> <li>services,</li> <li>pipes.</li></ul> <p>A proper organization of code between modules results in:</p> <ul><li>feature separation</li> <li>better performance (when lazy loading is used)</li></ul> <p>Angular itself bundles its various parts into modules. Here are some examples:</p> <ul><li><code>RouterModule</code></li> <li><code>FormsModule</code></li> <li><code>BrowserModule</code> and <code>CommonModule</code> - things like <code>ngFor</code> or <code>ngIf</code> directives
are there!</li> <li><code>HttpClientModule</code> - it only provides services</li></ul> <h2 id="ngmodule-decorator"><a href="#ngmodule-decorator" class="header-anchor">#</a> ngModule Decorator</h2> <p>The <code>NgModule</code> decorator has the following options:</p> <ul><li><p><strong>declarations</strong> - here, we register all the <strong>components</strong>, <strong>directives</strong>, and
<strong>pipes</strong>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>A single entity may only be declared once! Two or more modules can't declare the same thing.</p></div></li> <li><p><strong>imports</strong> - here, we pull in other modules (or other things if <a href="/programming/angular/standalone-components.html">Standalone
Components</a> are being used), either provided by
external parties (e.g. Angular itself) or our own modules.</p></li> <li><p><strong>exports</strong> - a way to expose some entities to the other modules (those that
will import the current module). E.g., if I export <code>RouterModule</code> from
<code>SomeModule</code>, any module that imports <code>SomeModule</code> may use <code>RouterModule</code>'s
features (e.g., its directives). We can export imports and
declarations: modules, components, directives, pipes. Export only those
entities that you want to be usable in entities (like components) declared in
other modules.</p></li> <li><p><strong>providers</strong> - Dependency Injection setup. Alternatively, services can
configure their injection via the <code>Injectable</code> decorator and its <code>providedIn</code>
property.</p></li> <li><p><strong>bootstrap</strong> - defines the starting component(s) (usually <code>AppComponent</code>)</p></li> <li><p><strong>entryComponents</strong> - <em>deprecated</em>, it was used for <a href="/programming/angular/components.html#instantiating-components-from-typescript">dynamic
modules</a> in the
past.</p></li></ul> <h2 id="organizing-code-into-modules"><a href="#organizing-code-into-modules" class="header-anchor">#</a> Organizing Code into Modules</h2> <p>A recommended way of organizing code in larger applications is to split code
into modules by feature. E.g., we could have a set of components that are all
about the products domain. Also, we could have another set of components that
are all about managing orders. In this idealized scenario, we'd put
products-related components into one module, and the orders-related stuff into
another module.</p> <p>Another case would be to group together some shared components that are used
throughout different domains into their own module.</p> <h3 id="scope"><a href="#scope" class="header-anchor">#</a> Scope</h3> <p>The entities declared in a module (e.g. components) have access ONLY to entities
that this module declares or imports (services are an exception, more on that
<a href="#dependency-injection">later</a>). For example, if I create a <code>MyModule</code> module
with some declared component, I can use <code>routerLink</code> in that component only if I
import <code>RouterModule</code> into <code>MyModule</code> first. <strong>I think this rule applies only to
templates and the components, directives or pipes that we use within them (?)</strong></p> <p>It's important to note that we can import the same module multiple times into
different components. For example, if both <code>AppModule</code> and <code>MyModule</code> have
some declared components that make use of <code>&lt;ng-outlet&gt;</code>, we should import
<code>RouterModule</code> into both of them.</p> <div class="custom-block tip"><p class="custom-block-title">Services</p> <p>The <code>HttpClientModule</code> is a bit &quot;special&quot;. Since it does not expose anything
other than services (provides them), it does not need to be imported into every
module that needs <code>HttpClient</code>. Services can be injected without that.</p></div> <div class="custom-block warning"><p class="custom-block-title">BrowserModule</p> <p>The <code>BrowserModule</code> is even more &quot;special&quot;. It should be imported only once into
the <code>AppModule</code> and nowhere else. Since features like <code>ngIf</code> and <code>ngFor</code> come
from that module, that would be a bit limiting. Because of that, the other
modules that want to make use of these features, should import the
<code>CommonModule</code>. <code>ngIf</code> and other stuff will become available.</p></div> <h2 id="routes"><a href="#routes" class="header-anchor">#</a> Routes</h2> <p>Our feature modules representing different sections of the app could also handle
their routes. We could go even further and create separate routes modules per
feature. Each feature would have such a module with its specific routes.</p> <p>Here's an example of such a module:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'products'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> ProductsComponent<span class="token punctuation">,</span>
    canActivate<span class="token operator">:</span> <span class="token punctuation">[</span> AuthorizationGuard <span class="token punctuation">]</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ProductsListComponent<span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'new'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> NewProductComponent<span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">':id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ProductInfoComponent<span class="token punctuation">,</span> resolve<span class="token operator">:</span> <span class="token punctuation">[</span> PoductResolverService <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>RouterModule<span class="token punctuation">.</span><span class="token function">forChild</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  exports<span class="token operator">:</span> <span class="token punctuation">[</span>RouterModule<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ProductsRoutingModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">forChild</p> <p>In the main <code>AppRoutingModule</code> we usually use <code>RouterModule.forRoot()</code> method. In
these feature-specific route modules, we use <code>RouterModule.forChild</code>. In the
end, all these routes will be merged together. <code>forChild</code> is also needed to
enable <a href="#lazy-loading">lazy loading</a>!</p></div> <p>Note that even though in this routing module we reference some components, we
don't need to import them via the <code>imports</code> array. We need to import stuff only
if we plan to use it in the templates.</p> <h2 id="lazy-loading"><a href="#lazy-loading" class="header-anchor">#</a> Lazy Loading</h2> <p>Until now, we've been discussing <strong>Eager-loaded Modules</strong>. They are loaded on
bootstrap together with the <code>AppModule</code>. With proper module organization we can
make use of <strong>lazy loading</strong>.</p> <p>With eager-loaded modules, when the user visits our website, all of our code is
being downloaded by their browser at once. For smaller applications, it's not a
big deal. For bigger apps though, it surely is something worth optimizing. With
lazy loading, the code is being downloaded as it's needed. For example, if a
user goes to <code>/profile</code>, only the module responsible for that feature area
should get loaded. It might be seen as a downside, the app will not be as snappy
as before (unless proper <a href="#preload-strategy">preload strategy</a> is used). The
initial load will be faster though.</p> <p>Lazy loading makes sense especially if our users are not going to typically
visit all the views during their session. If they're not going to even see
<code>/products</code>, why would they download it.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Not all modules should be lazy loaded. If our app has some &quot;core&quot; feature
areas that are always visited by the users, it probably doesn't make sense
to lazy load them.</p></div> <h3 id="implementation"><a href="#implementation" class="header-anchor">#</a> Implementation</h3> <p>Lazy loading is mostly accomplished with a proper setup of routing.
To use lazy loading, our feature modules need to have their own <a href="#routes">routing
modules</a> that will use <code>Router.forChild(...)</code>.</p> <p>Until now, our feature modules had the following setup:</p> <ul><li>they were imported into the <code>AppModule</code> - that wass needed, because they had
to be loaded at some point, otherwise they'd never be bundled.</li> <li>they had their own routing config that was being merged with the &quot;main&quot;
routing setup in <code>AppModule</code> (or some other separate routing module like
<code>AppRoutingModule</code>).</li></ul> <p>Here's what we need to change:</p> <ol><li><p>The main routing module (the one that calls <code>Router.forRoot(...)</code>) should now
include the routes to our feature areas together with a lambda to load these
modules dynamically, like this:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/products'</span><span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">'products'</span><span class="token punctuation">,</span> 
    <span class="token function-variable function">loadChildren</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./products/products.module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>ProductsModule<span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Now, in the lazily loaded module's routing setup, we should treat the routing
path as if that module was at the root. Without lazy loading, we had <code>path: 'products'</code>, because feature module's routing would get merged with the &quot;main&quot;
routing. Now, the products area is treated as a child of the main routing. All
the child's routes go under the &quot;<em>/products</em>&quot; path, and the child module does
not need to know about it.</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> ProductsComponent<span class="token punctuation">,</span>
    canActivate<span class="token operator">:</span> <span class="token punctuation">[</span>AuthGuard<span class="token punctuation">]</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ProdctsListComponent<span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// /products</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'new'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> NewProductComponent <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// /products/new</span>
      <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">':id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ProductComponent<span class="token punctuation">,</span> resolve<span class="token operator">:</span> <span class="token punctuation">[</span> ProductResolverService <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// /products/:id</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span> RouterModule<span class="token punctuation">.</span><span class="token function">forChild</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  exports<span class="token operator">:</span> <span class="token punctuation">[</span> RouterModule <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ProductsRoutingModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Lastly, make sure to <strong>not</strong> import (<code>NgModule</code>-import) the feature module
(like <code>ProductsModule</code> in this case) into the <code>AppModule</code>. The dynamic import in
the routing setup does that already. Additionally importing it with the <code>imports</code>
array would eagerly load the module.</p></li></ol> <p>With that, the code is split into bundles, each one fetched as needed.</p> <div class="custom-block danger"><p class="custom-block-title">Imports</p> <p>With lazy loading, it becomes quite important to properly define ES imports.
Anything that we import in our files gets added to our bundle. Make sure to
import only the stuff you need. It's common to forget about cleaning up
the imports after some refactoring.</p></div> <div class="custom-block tip"><p class="custom-block-title">Angular Modules</p> <p>With lazy loading, also the Angular's <code>vendor.js</code> bundle may get decreased.
For example, if we'r using forms only in some feature area, after introducing
lazy loading, <code>FormsModule</code> will be fetched together with that feature area
instead of at bootstrap.</p></div> <h3 id="preload-strategy"><a href="#preload-strategy" class="header-anchor">#</a> Preload Strategy</h3> <p>Lazy loading might make our app feel slow. Preload Strategy may fix that. After
splitting our app into bundles, we can download them all at bootstrap instead of
waiting for the user to actually need it. It may be configured in the root
routing configuration:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>
    routes<span class="token punctuation">,</span> 
    <span class="token punctuation">{</span> 
      preloadingStrategy<span class="token operator">:</span> PreloadAllModules <span class="token comment">// NoPreloading is the default</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  exports<span class="token operator">:</span> <span class="token punctuation">[</span>RouterModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppRoutingModule</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The initial bundle is still kept small, the other bundles will be downloaded
after the first one gets fetched.</p> <h3 id="dependency-injection"><a href="#dependency-injection" class="header-anchor">#</a> Dependency Injection</h3> <p>Eager-loaded modules that provide services, make them available globally. That's
why we don't need to put modules that provide services into the <code>imports</code> array.</p> <p>Lazy-loaded modules that proivde services, make them available only in that
single module.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/programming/angular/http.html" class="prev">
        HTTP
      </a></span> <span class="next"><a href="/programming/angular/ngrx.html">
        NgRx
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/20/2022, 6:26:05 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c0e280fd.js" defer></script><script src="/assets/js/2.e154a615.js" defer></script><script src="/assets/js/49.0ef86bca.js" defer></script>
  </body>
</html>
