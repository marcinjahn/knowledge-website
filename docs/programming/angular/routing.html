<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routing | Marcin Jahn | Tech Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Routing in Angular SPA framework. It discussed basics of Router, how to use guards, how to access router from HTML and from code programmatically">
    <meta property="og:url" content="/programming/angular/routing.html">
    <meta property="og:site_name" content="Marcin Jahn | Tech Notebook">
    <meta property="og:title" content="Routing">
    <meta property="og:description" content="Routing in Angular SPA framework. It discussed basics of Router, how to use guards, how to access router from HTML and from code programmatically">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Tech Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="#7D84B2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.907785b2.css" as="style"><link rel="preload" href="/assets/js/app.457fe2ab.js" as="script"><link rel="preload" href="/assets/js/2.e154a615.js" as="script"><link rel="preload" href="/assets/js/52.8d47f9ac.js" as="script"><link rel="prefetch" href="/assets/js/10.873b32e7.js"><link rel="prefetch" href="/assets/js/100.deaf647b.js"><link rel="prefetch" href="/assets/js/101.619b6949.js"><link rel="prefetch" href="/assets/js/102.33cda03f.js"><link rel="prefetch" href="/assets/js/103.e86575a3.js"><link rel="prefetch" href="/assets/js/104.15a91839.js"><link rel="prefetch" href="/assets/js/105.3b812875.js"><link rel="prefetch" href="/assets/js/106.9dd922ac.js"><link rel="prefetch" href="/assets/js/107.09afacc5.js"><link rel="prefetch" href="/assets/js/108.92db3fc6.js"><link rel="prefetch" href="/assets/js/109.b7cf7bab.js"><link rel="prefetch" href="/assets/js/11.71b67b13.js"><link rel="prefetch" href="/assets/js/110.31a65d14.js"><link rel="prefetch" href="/assets/js/111.2b6da82b.js"><link rel="prefetch" href="/assets/js/112.77af1d97.js"><link rel="prefetch" href="/assets/js/113.20468e1a.js"><link rel="prefetch" href="/assets/js/114.6723ad9b.js"><link rel="prefetch" href="/assets/js/115.3e6fdf6f.js"><link rel="prefetch" href="/assets/js/116.a220f9ed.js"><link rel="prefetch" href="/assets/js/117.2eec5e30.js"><link rel="prefetch" href="/assets/js/118.5f9daa5f.js"><link rel="prefetch" href="/assets/js/119.31db1bcb.js"><link rel="prefetch" href="/assets/js/12.bb623916.js"><link rel="prefetch" href="/assets/js/120.b9326b2d.js"><link rel="prefetch" href="/assets/js/121.b2b3d83e.js"><link rel="prefetch" href="/assets/js/122.ebcdaf4e.js"><link rel="prefetch" href="/assets/js/123.1a648da1.js"><link rel="prefetch" href="/assets/js/124.f27fa1fe.js"><link rel="prefetch" href="/assets/js/125.e70d594f.js"><link rel="prefetch" href="/assets/js/126.e1588da4.js"><link rel="prefetch" href="/assets/js/127.4112b0ee.js"><link rel="prefetch" href="/assets/js/128.6b8353ac.js"><link rel="prefetch" href="/assets/js/129.7107809c.js"><link rel="prefetch" href="/assets/js/13.d481e398.js"><link rel="prefetch" href="/assets/js/130.ca529584.js"><link rel="prefetch" href="/assets/js/131.e7de7278.js"><link rel="prefetch" href="/assets/js/132.51267e65.js"><link rel="prefetch" href="/assets/js/133.c16c0065.js"><link rel="prefetch" href="/assets/js/134.cdeface3.js"><link rel="prefetch" href="/assets/js/135.042a4f69.js"><link rel="prefetch" href="/assets/js/136.b6dde7c4.js"><link rel="prefetch" href="/assets/js/137.52144c40.js"><link rel="prefetch" href="/assets/js/138.2fbbca35.js"><link rel="prefetch" href="/assets/js/139.5ef1b48b.js"><link rel="prefetch" href="/assets/js/14.ab8e1dcc.js"><link rel="prefetch" href="/assets/js/140.e2bdeee0.js"><link rel="prefetch" href="/assets/js/141.b7b854ef.js"><link rel="prefetch" href="/assets/js/142.78a4cc71.js"><link rel="prefetch" href="/assets/js/143.fb39851f.js"><link rel="prefetch" href="/assets/js/144.2a1c1ae4.js"><link rel="prefetch" href="/assets/js/145.767be185.js"><link rel="prefetch" href="/assets/js/146.00cd2e82.js"><link rel="prefetch" href="/assets/js/147.360b46c7.js"><link rel="prefetch" href="/assets/js/148.5e74e71c.js"><link rel="prefetch" href="/assets/js/149.64d14c09.js"><link rel="prefetch" href="/assets/js/15.89e1dd21.js"><link rel="prefetch" href="/assets/js/150.848abaf5.js"><link rel="prefetch" href="/assets/js/151.e1ff01cf.js"><link rel="prefetch" href="/assets/js/152.866220d6.js"><link rel="prefetch" href="/assets/js/153.a034dbc1.js"><link rel="prefetch" href="/assets/js/154.3fea7eb5.js"><link rel="prefetch" href="/assets/js/155.9019f042.js"><link rel="prefetch" href="/assets/js/156.9b158573.js"><link rel="prefetch" href="/assets/js/157.f6748ef6.js"><link rel="prefetch" href="/assets/js/158.057ac571.js"><link rel="prefetch" href="/assets/js/159.71bbed8c.js"><link rel="prefetch" href="/assets/js/16.2a55624c.js"><link rel="prefetch" href="/assets/js/160.3b990ad4.js"><link rel="prefetch" href="/assets/js/161.56571137.js"><link rel="prefetch" href="/assets/js/162.21aacb2c.js"><link rel="prefetch" href="/assets/js/17.0833a4ad.js"><link rel="prefetch" href="/assets/js/18.3cca9150.js"><link rel="prefetch" href="/assets/js/19.cf1af818.js"><link rel="prefetch" href="/assets/js/20.c38fc183.js"><link rel="prefetch" href="/assets/js/21.47d88465.js"><link rel="prefetch" href="/assets/js/22.a63cf8db.js"><link rel="prefetch" href="/assets/js/23.170c9854.js"><link rel="prefetch" href="/assets/js/24.ae804337.js"><link rel="prefetch" href="/assets/js/25.a521e5a8.js"><link rel="prefetch" href="/assets/js/26.77e7e49f.js"><link rel="prefetch" href="/assets/js/27.a5ea7b41.js"><link rel="prefetch" href="/assets/js/28.c5cc3937.js"><link rel="prefetch" href="/assets/js/29.f155109a.js"><link rel="prefetch" href="/assets/js/3.54e9968c.js"><link rel="prefetch" href="/assets/js/30.70031726.js"><link rel="prefetch" href="/assets/js/31.c95b591a.js"><link rel="prefetch" href="/assets/js/32.3b90ff2a.js"><link rel="prefetch" href="/assets/js/33.e414a879.js"><link rel="prefetch" href="/assets/js/34.1bec9902.js"><link rel="prefetch" href="/assets/js/35.a682d85c.js"><link rel="prefetch" href="/assets/js/36.2c3f8f9d.js"><link rel="prefetch" href="/assets/js/37.c37d1fcd.js"><link rel="prefetch" href="/assets/js/38.18cb3d3d.js"><link rel="prefetch" href="/assets/js/39.48e1c6c4.js"><link rel="prefetch" href="/assets/js/4.03a19f22.js"><link rel="prefetch" href="/assets/js/40.85b85b8c.js"><link rel="prefetch" href="/assets/js/41.94d3e608.js"><link rel="prefetch" href="/assets/js/42.4216a2f8.js"><link rel="prefetch" href="/assets/js/43.d1023d2d.js"><link rel="prefetch" href="/assets/js/44.8dad369c.js"><link rel="prefetch" href="/assets/js/45.37e93102.js"><link rel="prefetch" href="/assets/js/46.49304298.js"><link rel="prefetch" href="/assets/js/47.1c5831ae.js"><link rel="prefetch" href="/assets/js/48.fb50793f.js"><link rel="prefetch" href="/assets/js/49.38688d1b.js"><link rel="prefetch" href="/assets/js/5.ddf963dd.js"><link rel="prefetch" href="/assets/js/50.dfbe1c22.js"><link rel="prefetch" href="/assets/js/51.d9fdfbea.js"><link rel="prefetch" href="/assets/js/53.3bb0c7fc.js"><link rel="prefetch" href="/assets/js/54.f130959f.js"><link rel="prefetch" href="/assets/js/55.4c359ae5.js"><link rel="prefetch" href="/assets/js/56.33a0799e.js"><link rel="prefetch" href="/assets/js/57.c465e90e.js"><link rel="prefetch" href="/assets/js/58.691d8d8a.js"><link rel="prefetch" href="/assets/js/59.594c27c9.js"><link rel="prefetch" href="/assets/js/6.ca830668.js"><link rel="prefetch" href="/assets/js/60.5201a3d1.js"><link rel="prefetch" href="/assets/js/61.32681885.js"><link rel="prefetch" href="/assets/js/62.6e55d1e0.js"><link rel="prefetch" href="/assets/js/63.dc31a81f.js"><link rel="prefetch" href="/assets/js/64.d0505ad5.js"><link rel="prefetch" href="/assets/js/65.d552dd35.js"><link rel="prefetch" href="/assets/js/66.35ea8347.js"><link rel="prefetch" href="/assets/js/67.313a26a0.js"><link rel="prefetch" href="/assets/js/68.fb234e41.js"><link rel="prefetch" href="/assets/js/69.949947b2.js"><link rel="prefetch" href="/assets/js/7.2b16b5c4.js"><link rel="prefetch" href="/assets/js/70.bcfab036.js"><link rel="prefetch" href="/assets/js/71.b640c269.js"><link rel="prefetch" href="/assets/js/72.52959c50.js"><link rel="prefetch" href="/assets/js/73.88fec446.js"><link rel="prefetch" href="/assets/js/74.c7fb870f.js"><link rel="prefetch" href="/assets/js/75.17d7dae1.js"><link rel="prefetch" href="/assets/js/76.a1121e5f.js"><link rel="prefetch" href="/assets/js/77.3135e1c9.js"><link rel="prefetch" href="/assets/js/78.728b493b.js"><link rel="prefetch" href="/assets/js/79.61d9b8d5.js"><link rel="prefetch" href="/assets/js/8.15bf96a4.js"><link rel="prefetch" href="/assets/js/80.ac274ef8.js"><link rel="prefetch" href="/assets/js/81.6b657ce8.js"><link rel="prefetch" href="/assets/js/82.ef3d371c.js"><link rel="prefetch" href="/assets/js/83.8af1a653.js"><link rel="prefetch" href="/assets/js/84.daec8638.js"><link rel="prefetch" href="/assets/js/85.3a86b662.js"><link rel="prefetch" href="/assets/js/86.c1fe0c89.js"><link rel="prefetch" href="/assets/js/87.3ec49eb9.js"><link rel="prefetch" href="/assets/js/88.c052dc11.js"><link rel="prefetch" href="/assets/js/89.134d933b.js"><link rel="prefetch" href="/assets/js/9.56e59f29.js"><link rel="prefetch" href="/assets/js/90.943f44d9.js"><link rel="prefetch" href="/assets/js/91.b465faaf.js"><link rel="prefetch" href="/assets/js/92.fe647c8f.js"><link rel="prefetch" href="/assets/js/93.2fb69ee4.js"><link rel="prefetch" href="/assets/js/94.7774734e.js"><link rel="prefetch" href="/assets/js/95.846c90a4.js"><link rel="prefetch" href="/assets/js/96.1736c419.js"><link rel="prefetch" href="/assets/js/97.cb9518b3.js"><link rel="prefetch" href="/assets/js/98.63ad5602.js"><link rel="prefetch" href="/assets/js/99.52bcf2c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.907785b2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Tech Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/dotnet.webp"></span> <span>.NET</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span class="img-container"><img src="/sidebar-imgs/angular.webp"></span> <span>Angular</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/angular/overview.html" class="sidebar-link">Overview</a></li><li><a href="/programming/angular/components.html" class="sidebar-link">Components</a></li><li><a href="/programming/angular/directives.html" class="sidebar-link">Directives</a></li><li><a href="/programming/angular/services.html" class="sidebar-link">Services and DI</a></li><li><a href="/programming/angular/routing.html" aria-current="page" class="active sidebar-link">Routing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/angular/routing.html#external-file" class="sidebar-link">External File</a></li><li class="sidebar-sub-header"><a href="/programming/angular/routing.html#navigation-in-html" class="sidebar-link">Navigation in HTML</a></li><li class="sidebar-sub-header"><a href="/programming/angular/routing.html#navigation-in-typescript" class="sidebar-link">Navigation in TypeScript</a></li><li class="sidebar-sub-header"><a href="/programming/angular/routing.html#route-inputs" class="sidebar-link">Route Inputs</a></li><li class="sidebar-sub-header"><a href="/programming/angular/routing.html#nested-routing" class="sidebar-link">Nested Routing</a></li><li class="sidebar-sub-header"><a href="/programming/angular/routing.html#guards" class="sidebar-link">Guards</a></li><li class="sidebar-sub-header"><a href="/programming/angular/routing.html#resolvers" class="sidebar-link">Resolvers</a></li></ul></li><li><a href="/programming/angular/observables.html" class="sidebar-link">Observables</a></li><li><a href="/programming/angular/forms.html" class="sidebar-link">Forms</a></li><li><a href="/programming/angular/pipes.html" class="sidebar-link">Pipes</a></li><li><a href="/programming/angular/http.html" class="sidebar-link">HTTP</a></li><li><a href="/programming/angular/tips.html" class="sidebar-link">Tips</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/javascript.webp"></span> <span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/rust.webp"></span> <span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/c.webp"></span> <span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/css.webp"></span> <span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/unity.webp"></span> <span>Unity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/algorithms.webp"></span> <span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/architecture.webp"></span> <span>Architecture</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="routing-in-angular"><a href="#routing-in-angular" class="header-anchor">#</a> Routing in Angular</h1> <p>Angular has a built-in router. When initializing a new project, the CLI asks if
it should be included or not. If we opted for &quot;No&quot; initially, we can add routing
module manually:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng generate module app-routing --flat --module<span class="token operator">=</span>app
</code></pre></div><p>We can also configure routing in the <code>AppModule</code> file:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MainPageComponent<span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// match only if path is literally ''</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span> <span class="token comment">// reusing a route under a different URL</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UsersComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'movies'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MoviesComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'movies/:movieId'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MovieComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'404'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> NotFoundComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'**'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/404'</span> <span class="token punctuation">}</span> <span class="token comment">// catch all undefined cases</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>
    AppComponent<span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    BrowserModule<span class="token punctuation">,</span>
    FormsModule<span class="token punctuation">,</span>
    RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>The selected component will be rendered as a child of <code>AppComponent</code>. We need to
specify the exact placement of that component:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-outlet</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-outlet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The routes array should generally contain a wildcard route that handles all bad
links. Usually, it would redirect the user to some 404 page.</p> <div class="custom-block danger"><p class="custom-block-title">Order of Routes</p> <p>The order of the routes matters! We should always place the wildcard route at
the end, otherwise some meaningful route could be handled as 404.</p></div> <p>Paths of routes defined in the array are <strong>prefix paths</strong> by default. It means
that Angular will match it whenever the beginning of browser's URL matches the
route's path. If we want the route to be selected only when the whole URL is
matched (without the host though), we should add the <code>pathMatch: 'full'</code> option.</p> <h2 id="external-file"><a href="#external-file" class="header-anchor">#</a> External File</h2> <p>Usually, we do not define routes directly in <code>app.module.ts</code>. Instead, we'd
create a separate module file <code>app-routing.module.ts</code> with the routing setup
inside of it.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MainPageComponent<span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// other routes...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    RouterModule<span class="token punctuation">.</span><span class="token function">forRoot</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  exports<span class="token operator">:</span> <span class="token punctuation">[</span> RouterModule <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppRoutingModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><p>Then, the <code>app.module</code> file gets simplified:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>
    AppComponent<span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    BrowserModule<span class="token punctuation">,</span>
    FormsModule<span class="token punctuation">,</span>
    AppRoutingModule
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre></div><h2 id="navigation-in-html"><a href="#navigation-in-html" class="header-anchor">#</a> Navigation in HTML</h2> <p>With routing in place, we don't want to navigate between different pages in our
app with traditional <code>&lt;a href=&quot;/whatever&quot;&gt;Whatever&lt;/a&gt;</code>. Clicking such a link
will work and the user will be taken to the right component (if the <code>/whatever/</code>
route was configured), but it comes with a huge issue - the whole application
will actually be reloaded from the server again. The app's state will be lost,
and it will be slow. Instead of that, we want the Angular Router to handle the
navigation, making it an in-app navigation rather than a browser-based
navigation. Here's how <code>&lt;a&gt;</code> elements should look like:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The link above is applied to the host of the page. If we didn't include the <code>/</code>,
the <code>home</code> segment would be applied to the currently open page. It works
differently in <a href="#navigation-in-code">Programmatic Navigation</a>!</p> <div class="custom-block tip"><p class="custom-block-title">Array</p> <p>We can also split our link into segments, and use it like this:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>/home<span class="token punctuation">'</span>, userId]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>userId</code> would be some component's property. The array syntax makes it easy to
construct the URL dynamically.</p></div> <h3 id="styling"><a href="#styling" class="header-anchor">#</a> Styling</h3> <p>In order to have visual indication on the currently visited menu element, we
would normally attach some CSS class to that active element. Angular comes with
a helper directive that does that automatically - <code>routerLinkActive</code>.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">routerLinkActive</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The element that has the directive on it will have the &quot;active&quot; class attached
to it when the link is active. The directive can be attached on the <code>&lt;a&gt;</code> or on
some element that wraps it, like in the example above.</p> <div class="custom-block warning"><p class="custom-block-title">Exact</p> <p>By default, the <code>routerLinkActive</code> directive applies the active class to
any link that is part of the current URL. For examle, a link to &quot;/&quot; would
always be marked as active, because it's always going to be a part of URL. In
order to fix that, we would have to specify additional configuration:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> 
    <span class="token attr-name">routerLinkActive</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">[routerLinkActiveOptions]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ exact: true }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">routerLink</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>With that, the Home link will be marked as active only when the URL is exactly
&quot;{domain}/&quot;.</p></div> <h2 id="navigation-in-typescript"><a href="#navigation-in-typescript" class="header-anchor">#</a> Navigation in TypeScript</h2> <p>Router is accessible via TS as well.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SomeComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> router<span class="token operator">:</span> Router<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token function">onButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'/somewhere'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Dependency Injection</p> <p>Router can be injected into classes, just like any other service.</p></div> <p>The path that we navigate to is (by default) relative to the root.
Having or not having slash in the beginning does not change anything (it does
matter with <a href="#navigation">routerLink</a>)! We can change the path that <code>navigate</code>
will be executed in relation to with <code>relativeTo</code>. For example, we could pass to
it the currently activated route (<code>ActivatedRoute</code>).</p> <h2 id="route-inputs"><a href="#route-inputs" class="header-anchor">#</a> Route Inputs</h2> <h3 id="path-parameters"><a href="#path-parameters" class="header-anchor">#</a> Path Parameters</h3> <p>Route's path can have parameters. In the code example at the top of this page,
<code>movies/:movieId</code> is an example of that. <code>movieId</code> is a parameter, and the
<code>MovieComponent</code> will receive it.</p> <h4 id="activatedroute"><a href="#activatedroute" class="header-anchor">#</a> ActivatedRoute</h4> <p>We can get information about currently loaded route by injecting
<code>ActivatedRoute</code>. It contains various metadata about the loaded path, e.g. the
parameters.</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MovieComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  movieId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> route<span class="token operator">:</span> ActivatedRoute<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>movieId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>params<span class="token punctuation">[</span><span class="token string">'movieId'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The parameters may also be subscribed to via an <code>Observable</code> -
<code>this.route.params</code>. It might be useful when we plan to link from some site to
itself with different parameters. In such a case, Angular will not reload the
whole component for optimization. Instead, only the <code>ActivatedRoute</code> will
change.</p> <h3 id="query-parameters"><a href="#query-parameters" class="header-anchor">#</a> Query Parameters</h3> <p>We can also make use of query parameters. To attach them to links on our page,
we do it as follows:</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> 
  <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>/home<span class="token punctuation">'</span>, <span class="token punctuation">'</span>3<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">[queryParams]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ darkMode: true }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Home 3
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Here's how we add query params from TS:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-ts"><code><span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token string">'/somewhere'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span>
    queryParams<span class="token operator">:</span> <span class="token punctuation">{</span> darkMode<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Here's how we can read query params from TS by injecting <code>ActivatedRoute</code>
(<code>route</code> variable):</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> darkMode <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>queryParams<span class="token punctuation">;</span>
</code></pre></div><p>Similarly to path parameters, we can also subscribe to <code>this.route.queryParams</code>.</p> <h4 id="preserving-query-params"><a href="#preserving-query-params" class="header-anchor">#</a> Preserving Query Params</h4> <p>When we're on some page with some query params in the URL, by default these
query params will be removed when we navigate to another page. If we don't want
that, we can do it the following way:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token string">'/somewhere'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span>
    queryParamsHandling<span class="token operator">:</span> <span class="token string">'merge'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>merge</code> handling merges together existing query params and those that we
might want to add (by having <code>queryParams</code> defined).</p> <h3 id="fragment"><a href="#fragment" class="header-anchor">#</a> Fragment</h3> <p>Similarly, we can attach fragment (<code>#fragment</code>) to link we navigate to:</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> 
  <span class="token attr-name">[routerLink]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[<span class="token punctuation">'</span>/home<span class="token punctuation">'</span>, <span class="token punctuation">'</span>3<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>something<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Home 3
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Here's how we add fragment from TS:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-ts"><code><span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token string">'/somewhere'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span>
    fragment<span class="token operator">:</span> <span class="token string">'something'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Here's how we can read fragment from TS by injecting <code>ActivatedRoute</code> (<code>route</code>
variable):</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> fragment <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>fragment<span class="token punctuation">;</span>
</code></pre></div><p>Similarly to path parameters, we can also subscribe to <code>this.route.fragment</code>.</p> <h3 id="static-data"><a href="#static-data" class="header-anchor">#</a> Static Data</h3> <p>Routes can have some static data defined. This way, the same route can be reused
multiple times. For example, we could have a generic <code>ErrorComponent</code> which
displays different message depending on the kind of error. Such a component
could look like this:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'app-error'</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;h2&gt; {{ errorMessage }} &lt;/h2&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ErrorComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  errorMessage<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> route<span class="token operator">:</span> ActivatedRoute<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>errorMessage <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>snapshot<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can set the static value(s) in the routes collection:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MainPageComponent<span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UsersComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'movies'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MoviesComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'movies/:movieId'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MovieComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'not-found'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ErrorComponent<span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Page not found'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'not-ready'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> ErrorComponent<span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'This page is under construction'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'**'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/not-found'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="nested-routing"><a href="#nested-routing" class="header-anchor">#</a> Nested Routing</h2> <p>Nested Routing allows us to have multiple routing outlets, one within another.
We could have a main menu with each entry of it loading a different submenu.
Then, each submenu would have a list of links that load a different content.</p> <p>First, we need to set up our routes properly:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MainPageComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UsersComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">'movies'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> MoviesComponent<span class="token punctuation">,</span> 
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> 
        path<span class="token operator">:</span> <span class="token string">'/:movieId'</span><span class="token punctuation">,</span> 
        component<span class="token operator">:</span> MovieComponent 
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>In the example above, <code>/:movieId</code> is a nested route. The full path (without
host) to it is <code>/movies/:moviesId</code>.</p> <p>The next thing to do is to place an outlet where the <code>MovieComponent</code> will be
rendered. We should place it somewhere within <code>MoviesComponent</code>:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-outlet</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-outlet</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>With this setup, when navigating to <code>/movies/&lt;id&gt;</code>, the following will happen:</p> <ul><li>the <code>MoviesComponent</code> will be rendered in the <code>router-outlet</code> within the
<code>AppComponent</code></li> <li>the <code>MovieComponent</code> will be rendered in the <code>router-outlet</code> within the
<code>MoviesComponent</code></li></ul> <p>The setup could be more complex, having multiple children under the <code>movies</code>
path, or by having more levels of nesting.</p> <h2 id="guards"><a href="#guards" class="header-anchor">#</a> Guards</h2> <p>Routes can be protected by <strong>Guards</strong>. The user may be either allowed or
disallowed to enter some content. It could be due to them being (un)authorized
in some way.</p> <p>Guards are services and we normally store them in <code>*.service.ts</code> files.</p> <div class="custom-block tip"><p class="custom-block-title">Provide</p> <p>A guard, like any service, needs to be <code>provided</code> somewhere.</p></div> <p>Here's a simple example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// for Router to be injected</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthGuard</span> <span class="token keyword">implements</span> <span class="token class-name">CanActivate</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> router<span class="token operator">:</span> Router<span class="token punctuation">)</span>

  isAuthorized <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// just for the sake of this example</span>

  <span class="token function">canActivate</span><span class="token punctuation">(</span>
    route<span class="token operator">:</span> ActivatedRoute<span class="token punctuation">,</span> 
    state<span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span>
     <span class="token operator">:</span> bool <span class="token operator">|</span> Observable<span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token punctuation">{</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isAuthorized<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'/unauthorized'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// take user somewhere</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// not necessary since not returning anything also counts as negative result</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The guard needs to implement <code>CanActivate</code>. Its <code>canActivate</code> method should
return one of:</p> <ul><li><code>bool</code></li> <li><code>Observable&lt;bool&gt;</code></li> <li><code>Promise&lt;bool&gt;</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The actual logic of checking whether the user is authorized would probably be
put in some other service.</p></div> <p>We can route users to some other page in the guard, most likely when the
condition is not satisfied.</p> <hr> <p>The route should be enabled for selected endpoints in the routes definition:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MainPageComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> UsersComponen<span class="token punctuation">,</span>
    canActivate<span class="token operator">:</span> <span class="token punctuation">[</span>AuthGuard<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">'movies'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> MoviesComponent<span class="token punctuation">,</span> 
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> 
        path<span class="token operator">:</span> <span class="token string">'/:movieId'</span><span class="token punctuation">,</span> 
        component<span class="token operator">:</span> MovieComponent
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>The <code>/users</code> endpoint is protected by our guard. If we applied the guard to the
<code>/movies</code> route, the child of it would also use it.</p> <div class="custom-block tip"><p class="custom-block-title">Guarding Children</p> <p>If we just want to protect all the children of some route, and not the &quot;parent&quot;
route, our guard can implement <code>CanActivateChildren</code>. Then, we apply the guard
to the &quot;parent&quot; route, and the guard will be executed only on children.</p></div> <h3 id="candeactivate-guard"><a href="#candeactivate-guard" class="header-anchor">#</a> CanDeactivate Guard</h3> <p>Similarly to checking if a user can enter some route, we can also check if they
should be able to leave it. This is to protect users from unintentionally
leaving half-done form, forgetting to save their work, etc.</p> <p>Setting this up is a little bit more involved than using <code>CanActivate</code> guard.
That's because the guard will most likely need some input from the component
that we're leaving to know if the user should be able to leave. The component
could have some <code>isWorkSaved</code> variable, but the guard cannot reach it - it's a
separate class after all. We can solve this problem using generics.</p> <p>Here's an example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// the component protected by our guard should implement it</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">DeactivatableComponent</span> <span class="token punctuation">{</span>

  <span class="token comment">// the logic to check whether the user can leave, e.g. isWorkSaved === true</span>
  <span class="token function-variable function">canDeactivate</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Observable<span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token operator">|</span> bool<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// the guard</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CanDeactivateGuard</span> <span class="token keyword">implements</span> <span class="token class-name">CanDeactivate<span class="token operator">&lt;</span>DeactivatableComponent<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>  
  <span class="token comment">// ...</span>
  
  <span class="token comment">// one of the params is our interface - DeactivatableComponent - it will be </span>
  <span class="token comment">// the protected component</span>
  <span class="token function">canDeactivate</span><span class="token punctuation">(</span>
    component<span class="token operator">:</span> DeactivatableComponent<span class="token punctuation">,</span>
    currentRoute<span class="token operator">:</span> ActivatedRoute<span class="token punctuation">,</span>
    currentState<span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">,</span>
    nextState<span class="token operator">?</span><span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span>
    <span class="token operator">:</span> Observable<span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token operator">|</span> bool <span class="token punctuation">{</span>

      <span class="token comment">// here's how we ask the component itself if user is allowed to leave.</span>
      <span class="token keyword">return</span> component<span class="token punctuation">.</span><span class="token function">canDeactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">DeactivatableComponent</p> <p><code>DeactivatableComponent</code> is not part of Angular. It's a custom interface that
was needed to somehow connect the guard to the protected component (with the
help of generic class).</p> <p>The interface could be extended to include some outputs from the <code>canDeactivate</code>
method. This way, the component could, for example, return some message
informing the user why they shouldn't leave. The guard would then display it
somehow (e.g. via <code>confirm()</code>).</p></div> <p>Next piece is the actual component's code. The component needs to
implement <code>DeactivatableComponent</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'my-component'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">implements</span> <span class="token class-name">DeactivatableComponent</span> <span class="token punctuation">{</span>
  isWorkSaved<span class="token operator">:</span> bool <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>

  <span class="token function">canDeactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> isWorkSaved<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To use the new guard, we need to enable it in the routes collection:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MainPageComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> UsersComponen<span class="token punctuation">,</span>
    canDeactivate<span class="token operator">:</span> <span class="token punctuation">[</span>CanDeactivateGuard<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">'movies'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> MoviesComponent<span class="token punctuation">,</span> 
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> 
        path<span class="token operator">:</span> <span class="token string">'/:movieId'</span><span class="token punctuation">,</span> 
        component<span class="token operator">:</span> MovieComponent
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="resolvers"><a href="#resolvers" class="header-anchor">#</a> Resolvers</h2> <p>When a given component needs some external data to be loaded before it can be
displayed, custom <strong>Resolvers</strong> can be used.</p> <div class="custom-block tip"><p class="custom-block-title">Provide</p> <p>A resolver, like any service, needs to be <code>provided</code> somewhere.</p></div> <p>Here's an example of such a resolver:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Movie</span> <span class="token punctuation">{</span>
  <span class="token comment">// some info about a movie</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Injectable</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MovieResolver</span> <span class="token keyword">implements</span> <span class="token class-name">Resolve<span class="token operator">&lt;</span>Movie<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span>route<span class="token operator">:</span> ActivatedRouteSnapshot<span class="token punctuation">,</span> state<span class="token operator">:</span> RouterStateSnapshot<span class="token punctuation">)</span>
    <span class="token operator">:</span> Observable<span class="token operator">&lt;</span>Movie<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Movie<span class="token operator">&gt;</span> <span class="token operator">|</span> Movie <span class="token punctuation">{</span>
      
      <span class="token comment">// Get the movie from some external service...</span>
      <span class="token comment">// Probably the route's params/query params will be needed</span>
      <span class="token comment">// to get the ID of the requested movie.</span>
      <span class="token keyword">return</span> movie<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To use the resolver, we attach it to the route that needs it:</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-ts"><code><span class="token keyword">const</span> routes<span class="token operator">:</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MainPageComponent<span class="token punctuation">,</span> pathMatch<span class="token operator">:</span> <span class="token string">'full'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'users'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UsersComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'movies'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> MoviesComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> 
    path<span class="token operator">:</span> <span class="token string">'movies/:movieId'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> MovieComponent<span class="token punctuation">,</span> 
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span> movie<span class="token operator">:</span> MovieResolver <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'404'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> NotFoundComponent <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'**'</span><span class="token punctuation">,</span> redirectTo<span class="token operator">:</span> <span class="token string">'/404'</span> <span class="token punctuation">}</span> 
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Here's how we can access the result of resolver's work in the <code>MovieComponent</code>:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MovieComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  movieDetails<span class="token operator">:</span> Movie<span class="token punctuation">;</span>
  
  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>route<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token function-variable function">data</span><span class="token operator">:</span> Data <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>movieDetails <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'movie'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We subscribe to the result, because the resulting data could change when we
reload the component (Angular will not reload the whole component for
performance reasons).</p> <p>The result is placed in <code>this.route.data</code> object under the key that we used in
the route definition's <code>resolve</code> section (<code>movie</code> in this case). The <code>data</code>
object was also used in the <a href="#static-data">Static Data</a>.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/programming/angular/services.html" class="prev">
        Services and DI
      </a></span> <span class="next"><a href="/programming/angular/observables.html">
        Observables
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/3/2022, 6:38:08 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.457fe2ab.js" defer></script><script src="/assets/js/2.e154a615.js" defer></script><script src="/assets/js/52.8d47f9ac.js" defer></script>
  </body>
</html>
