<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Basics | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Basics of Rust programming language">
    <meta property="og:url" content="/programming/rust/basics.html">
    <meta property="og:site_name" content="Marcin Jahn | Technology Notebook">
    <meta property="og:title" content="Basics">
    <meta property="og:description" content="Basics of Rust programming language">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Technology Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.03266277.css" as="style"><link rel="preload" href="/assets/js/app.3112ed8a.js" as="script"><link rel="preload" href="/assets/js/2.2f4ad232.js" as="script"><link rel="preload" href="/assets/js/74.94702f32.js" as="script"><link rel="prefetch" href="/assets/js/10.80cb4d17.js"><link rel="prefetch" href="/assets/js/100.83b71016.js"><link rel="prefetch" href="/assets/js/101.24ea3c9d.js"><link rel="prefetch" href="/assets/js/102.a3e591a9.js"><link rel="prefetch" href="/assets/js/103.3190cd9f.js"><link rel="prefetch" href="/assets/js/104.aaa97dc9.js"><link rel="prefetch" href="/assets/js/11.266c809c.js"><link rel="prefetch" href="/assets/js/12.a5602241.js"><link rel="prefetch" href="/assets/js/13.be24f7d1.js"><link rel="prefetch" href="/assets/js/14.ced50a7b.js"><link rel="prefetch" href="/assets/js/15.f0e6098c.js"><link rel="prefetch" href="/assets/js/16.5a37c1f4.js"><link rel="prefetch" href="/assets/js/17.7b23e9f5.js"><link rel="prefetch" href="/assets/js/18.7c291257.js"><link rel="prefetch" href="/assets/js/19.7c24b066.js"><link rel="prefetch" href="/assets/js/20.ada9cb69.js"><link rel="prefetch" href="/assets/js/21.a037dc96.js"><link rel="prefetch" href="/assets/js/22.7a6759e7.js"><link rel="prefetch" href="/assets/js/23.e00eb174.js"><link rel="prefetch" href="/assets/js/24.f8f654d9.js"><link rel="prefetch" href="/assets/js/25.2c772bf8.js"><link rel="prefetch" href="/assets/js/26.caea673d.js"><link rel="prefetch" href="/assets/js/27.6f61cc87.js"><link rel="prefetch" href="/assets/js/28.217ec394.js"><link rel="prefetch" href="/assets/js/29.64156634.js"><link rel="prefetch" href="/assets/js/3.f1f649da.js"><link rel="prefetch" href="/assets/js/30.eecd272e.js"><link rel="prefetch" href="/assets/js/31.8cd5a612.js"><link rel="prefetch" href="/assets/js/32.8ad15f86.js"><link rel="prefetch" href="/assets/js/33.09c1ec05.js"><link rel="prefetch" href="/assets/js/34.1202a5f9.js"><link rel="prefetch" href="/assets/js/35.c7073920.js"><link rel="prefetch" href="/assets/js/36.dad05aab.js"><link rel="prefetch" href="/assets/js/37.6240351a.js"><link rel="prefetch" href="/assets/js/38.c2444a2d.js"><link rel="prefetch" href="/assets/js/39.0d87ad5f.js"><link rel="prefetch" href="/assets/js/4.9a0fea81.js"><link rel="prefetch" href="/assets/js/40.0acd1ea6.js"><link rel="prefetch" href="/assets/js/41.5594f8ac.js"><link rel="prefetch" href="/assets/js/42.5d91f732.js"><link rel="prefetch" href="/assets/js/43.09b74406.js"><link rel="prefetch" href="/assets/js/44.6806c456.js"><link rel="prefetch" href="/assets/js/45.e095ed6a.js"><link rel="prefetch" href="/assets/js/46.2ddb9438.js"><link rel="prefetch" href="/assets/js/47.1be051f8.js"><link rel="prefetch" href="/assets/js/48.03faf5b3.js"><link rel="prefetch" href="/assets/js/49.986c1857.js"><link rel="prefetch" href="/assets/js/5.970fa356.js"><link rel="prefetch" href="/assets/js/50.9a49bcd1.js"><link rel="prefetch" href="/assets/js/51.cfb7b5f1.js"><link rel="prefetch" href="/assets/js/52.d6e4ea4b.js"><link rel="prefetch" href="/assets/js/53.af9ead59.js"><link rel="prefetch" href="/assets/js/54.c0b51f3f.js"><link rel="prefetch" href="/assets/js/55.237943cc.js"><link rel="prefetch" href="/assets/js/56.c1e0e550.js"><link rel="prefetch" href="/assets/js/57.4ae35b10.js"><link rel="prefetch" href="/assets/js/58.37517bd6.js"><link rel="prefetch" href="/assets/js/59.7e809493.js"><link rel="prefetch" href="/assets/js/6.1513f0fb.js"><link rel="prefetch" href="/assets/js/60.5ce1e58a.js"><link rel="prefetch" href="/assets/js/61.aee5f96a.js"><link rel="prefetch" href="/assets/js/62.b44a85a7.js"><link rel="prefetch" href="/assets/js/63.4c4af2a5.js"><link rel="prefetch" href="/assets/js/64.0419fe09.js"><link rel="prefetch" href="/assets/js/65.e30473f3.js"><link rel="prefetch" href="/assets/js/66.8d38d451.js"><link rel="prefetch" href="/assets/js/67.5fd38ce7.js"><link rel="prefetch" href="/assets/js/68.1f86ca3b.js"><link rel="prefetch" href="/assets/js/69.f56ca9d2.js"><link rel="prefetch" href="/assets/js/7.239151d2.js"><link rel="prefetch" href="/assets/js/70.fbf52d24.js"><link rel="prefetch" href="/assets/js/71.fca8a137.js"><link rel="prefetch" href="/assets/js/72.a0450123.js"><link rel="prefetch" href="/assets/js/73.d2781eb0.js"><link rel="prefetch" href="/assets/js/75.bf793be7.js"><link rel="prefetch" href="/assets/js/76.607d7eae.js"><link rel="prefetch" href="/assets/js/77.9bced578.js"><link rel="prefetch" href="/assets/js/78.b1261d38.js"><link rel="prefetch" href="/assets/js/79.70951a51.js"><link rel="prefetch" href="/assets/js/8.9112d18f.js"><link rel="prefetch" href="/assets/js/80.15259c38.js"><link rel="prefetch" href="/assets/js/81.a1525daa.js"><link rel="prefetch" href="/assets/js/82.fd683540.js"><link rel="prefetch" href="/assets/js/83.d3074a56.js"><link rel="prefetch" href="/assets/js/84.e93d279a.js"><link rel="prefetch" href="/assets/js/85.b480919c.js"><link rel="prefetch" href="/assets/js/86.21e55457.js"><link rel="prefetch" href="/assets/js/87.ef8413f1.js"><link rel="prefetch" href="/assets/js/88.d21a4926.js"><link rel="prefetch" href="/assets/js/89.55670b17.js"><link rel="prefetch" href="/assets/js/9.b91348dc.js"><link rel="prefetch" href="/assets/js/90.98cca30b.js"><link rel="prefetch" href="/assets/js/91.4383f163.js"><link rel="prefetch" href="/assets/js/92.6fc05aee.js"><link rel="prefetch" href="/assets/js/93.e3a06d14.js"><link rel="prefetch" href="/assets/js/94.b2bd3cda.js"><link rel="prefetch" href="/assets/js/95.dab6c474.js"><link rel="prefetch" href="/assets/js/96.aebe4f46.js"><link rel="prefetch" href="/assets/js/97.441d9f3e.js"><link rel="prefetch" href="/assets/js/98.08ed29d2.js"><link rel="prefetch" href="/assets/js/99.8744fd0b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.03266277.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>.NET</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Rust</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/rust/overview.html" class="sidebar-link">Overview</a></li><li><a href="/programming/rust/cargo.html" class="sidebar-link">Cargo</a></li><li><a href="/programming/rust/basics.html" aria-current="page" class="active sidebar-link">Basics</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#bindings" class="sidebar-link">Bindings</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#functions" class="sidebar-link">Functions</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#macros" class="sidebar-link">Macros</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#types" class="sidebar-link">Types</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#loops" class="sidebar-link">Loops</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#conditions" class="sidebar-link">Conditions</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#expressions" class="sidebar-link">Expressions</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#references" class="sidebar-link">References</a></li><li class="sidebar-sub-header"><a href="/programming/rust/basics.html#oop" class="sidebar-link">OOP</a></li></ul></li><li><a href="/programming/rust/ownership.html" class="sidebar-link">Ownership</a></li><li><a href="/programming/rust/structs.html" class="sidebar-link">Structures</a></li><li><a href="/programming/rust/enums.html" class="sidebar-link">Enums</a></li><li><a href="/programming/rust/organization.html" class="sidebar-link">Organization</a></li><li><a href="/programming/rust/collections.html" class="sidebar-link">Collections</a></li><li><a href="/programming/rust/error-handling.html" class="sidebar-link">Error Handling</a></li><li><a href="/programming/rust/generics.html" class="sidebar-link">Generics</a></li><li><a href="/programming/rust/traits.html" class="sidebar-link">Traits</a></li><li><a href="/programming/rust/lifetimes.html" class="sidebar-link">Lifetimes</a></li><li><a href="/programming/rust/closures.html" class="sidebar-link">Closures</a></li><li><a href="/programming/rust/pointers.html" class="sidebar-link">Raw Pointers</a></li><li><a href="/programming/rust/smart-pointers.html" class="sidebar-link">Smart Pointers</a></li><li><a href="/programming/rust/concurrency.html" class="sidebar-link">Concurrency</a></li><li><a href="/programming/rust/testing.html" class="sidebar-link">Testing</a></li><li><a href="/programming/rust/tips.html" class="sidebar-link">Tips</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="basics"><a href="#basics" class="header-anchor">#</a> Basics</h1> <h2 id="bindings"><a href="#bindings" class="header-anchor">#</a> Bindings</h2> <p>Variables, or more propery, <strong>bindings</strong>:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>An assignment like <code>a = 10</code> produces a blank type <code>()</code> called <em>unit</em>. Whenever
there is no other meaningful response type, <code>()</code> is returned.</p> <div class="custom-block tip"><p class="custom-block-title">Immutability</p> <p>Bindings are <strong>immutable</strong> by default.</p></div> <p>We can explicitly specify type of a binding:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">10i32</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">10_i32</span><span class="token punctuation">;</span> <span class="token comment">// Underscore has no meaning, it can be used as a delimiter</span>
</code></pre></div><p>Bindings may be <em>shadowed</em>, which means that a binding may be defined twice
with the same name. This way, we don't have to artificially define things like
<code>data_string</code> and <code>data</code>. First we could define <code>data</code> as <code>String</code>, and then
define <code>data</code> as <code>i32</code> with a value coming from parsed <code>data</code>.</p> <h3 id="type-inference"><a href="#type-inference" class="header-anchor">#</a> Type Inference</h3> <p>Rust compiler is pretty smart about type inference. For example, this works:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token class-name">Vec</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>new()</code> method of <code>Vec</code> is called without any generic type. Compiler sees
that on the left side of the assignment we specified the type to be <code>i32</code>.</p> <p>This also works:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> <span class="token keyword">mut</span> vec <span class="token operator">=</span> <span class="token class-name">Vec</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
vec<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The compiler &quot;scans&quot; the code and it sees that the vector insance should be
created for the <code>i32</code> type, because that's what we're adding to it later on.</p> <h3 id="strings"><a href="#strings" class="header-anchor">#</a> Strings</h3> <p>There is a <code>String</code> type, which is stored on a heap. There is also a string
literal, which is actually a <a href="/programming/rust/ownership.html#string-slices">string slice</a>.</p> <p>If a function expects a string parameter, it's a good practice to use string
slice (<code>&amp;str</code>) instead of a <code>String</code>, because:</p> <ul><li>a string literal can be passed as is;</li> <li>a string slice can be easily taken out of a <code>String</code> with <code>&amp;some_string</code></li></ul> <p>A <code>format!</code> macro is useful for creating strings composed of other values:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> greeting <span class="token operator">=</span> <span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">&quot;My name is {} {}&quot;</span><span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> last_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>str</code> is a <strong>dynamically sized type</strong> (DST) in Rust. It means that the contents
of that type are not static and during runtime the <code>str</code> value may be of various
length (depending on the length of the string). Rust prefers types that have
known sizes. That's why we use <code>&amp;str</code> instead, which is a slice - its size is
known - it's a pointer to <code>str</code> and a length of the value there (stores as
<code>usize</code>).</p> <h3 id="scope"><a href="#scope" class="header-anchor">#</a> Scope</h3> <p>Variables that go out of scope are automatically removed by Rust. We don't need
to <code>free</code> memory explicitly. There is no runtime overhead for that.</p> <h3 id="deep-copying"><a href="#deep-copying" class="header-anchor">#</a> Deep Copying</h3> <p>Heap data may be copied by value using the <code>clone()</code> method.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>s1</code> and <code>s2</code> are two different variables pointing at different data in memory
(but the values happen to be the same). <code>clone()</code> is much more expensive than a
simple pointer copy.</p> <p>Values that are stored on the stack (ints, floats, tuples (when they hold scalar
values), arrays, chars, etc.) do not need that.</p> <h2 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h2> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">fn</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">i32</span> <span class="token punctuation">{</span>
  i <span class="token operator">+</span> j
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>i + j</code> has no semicolon. With semicolon, the return type would be <code>()</code>
instead of <code>i32</code>.</p> <p>Functions return the last expression's result by default, so <code>return</code> is not
required.</p> <h2 id="macros"><a href="#macros" class="header-anchor">#</a> Macros</h2> <p>Macro example:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Macros are similar to functions, but instead of returning data, they return
code. They are often used to simplify common patterns.</p> <p>In case of printing, there are many ways of doing that depending on the provided
data type. The <code>println!</code> macro takes care of figuring out the exact method to
call.</p> <h2 id="types"><a href="#types" class="header-anchor">#</a> Types</h2> <p>There is a large choice of number types.
Conversions between types are always explicit. We use <code>as</code> for that.</p> <p>Rust does not have constructors. Every type has a literal form (e.g.
<code>let a = Complex { re: 2.1, im: -1.4 };</code>). Many types also have a
<code>new</code> method (it's not a Rust keyword though, these are just
normal methods).</p> <h2 id="loops"><a href="#loops" class="header-anchor">#</a> Loops</h2> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> item <span class="token keyword">in</span> collection <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>After such an interation, accessing <code>collection</code> is invalid! Rust assumes the
<code>collection</code> is no longer needed, its lifetime is finished.</p> <p>To circumvent it, include the <code>&amp;</code> symbol to use a reference:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token operator">&amp;</span>collection <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>To be able to modify <code>item</code> during the iteration, a mutable reference should be used:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> item <span class="token keyword">in</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> collection <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>All three loops shown above are a syntactic sugar for different method calls:</p> <ul><li><code>for item in collection</code> = <code>for item in itoIterator::into_iter(collection)</code></li> <li><code>for item in &amp;collection</code> = <code>for item in collection.iter()</code></li> <li><code>for item in &amp;mut collection</code> = <code>for item in collecion.iter_mut()</code></li></ul> <h3 id="index-variable"><a href="#index-variable" class="header-anchor">#</a> Index variable</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span>collection<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> item <span class="token operator">=</span> collection<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Such pattern is discouraged in Rust.</p> <h3 id="anonymous-loops"><a href="#anonymous-loops" class="header-anchor">#</a> Anonymous loops</h3> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token number">10</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>Since a local variable is not needed, <code>_</code> is used.</p> <h3 id="while-true-alternative"><a href="#while-true-alternative" class="header-anchor">#</a> while(true) alternative</h3> <p>Rust has <code>loop</code> loop type:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">loop</span> <span class="token punctuation">{</span>
  <span class="token comment">//break eventually if needed</span>
  <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It acts as <code>while true</code>, but is preferred.</p> <h3 id="breaking-out-of-nested-loops"><a href="#breaking-out-of-nested-loops" class="header-anchor">#</a> Breaking out of nested loops</h3> <p>Loops can be labeled, and nested loops can be exited using the outer loop label.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token lifetime-annotation symbol">'outer</span><span class="token punctuation">:</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> z <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z <span class="token operator">&gt;</span> <span class="token number">1000</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span> <span class="token lifetime-annotation symbol">'outer</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="conditions"><a href="#conditions" class="header-anchor">#</a> Conditions</h2> <p>There is no concept of truthy/falsey values. Conditions relay on <code>true</code> and
<code>false</code> - that's it.</p> <p>There is <code>match</code>, which is analogous to <code>switch</code> in other languages. Compilation
fails if <code>match</code> did not cover some relevant alternative.</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">match</span> item <span class="token punctuation">{</span>
  <span class="token number">0</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">10</span><span class="token punctuation">..=</span><span class="token number">20</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">40</span> <span class="token operator">|</span> <span class="token number">80</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  _ <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// matches all others</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>match</code> does not fall through through other cases. As soon as a case is matched,
it's executed, and <code>match</code> is exited.</p> <p><code>match</code> is very useful with <a href="/programming/rust/enums.html">enums</a>.</p> <div class="custom-block danger"><p class="custom-block-title">Dropping temporary values</p> <p>Some statements with <code>let</code> will not behave the same as statements without <code>let</code>.</p> <p>Here's an exmple with <code>Mutex</code>:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token comment">// OPTION I</span>
<span class="token keyword">loop</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> job <span class="token operator">=</span> receiver<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//some long operation</span>
<span class="token punctuation">}</span>

<span class="token comment">// OPTION II</span>
<span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span> <span class="token operator">=</span> receiver<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// some long operation</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Mutex</code> gets released when the result of <code>lock()</code> (an instance of <code>MutexGuard</code>)
goes out of scope. In <em>OPTION I</em>, the lock will be removed right after the line
where it's acquired. The temporary value of the lock is not stored anywhere, and
it is dropped right after the line. Another thread may acquire the lock while
the current thread executes some other operations in that loop block.</p> <p>In <em>OPTION II</em>, even though the lock result is not stored anywhere, it is still
kept until the end of the <code>while let</code> block.</p> <p>That behavior can be observed with <code>while let</code>, <code>if let</code>, and <code>match</code>.</p></div> <h2 id="expressions"><a href="#expressions" class="header-anchor">#</a> Expressions</h2> <p>Almost everything is an expression. The following are possible:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> desc <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token function">is_even</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;even&quot;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;odd&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> desc2 <span class="token operator">=</span> <span class="token keyword">match</span> <span class="token function">is_even</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token boolean">true</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;even&quot;</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;odd&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Even <code>break</code> returns a value:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token keyword">loop</span> <span class="token punctuation">{</span>
  <span class="token keyword">break</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The following are not expressions, thus do not return values:</p> <ul><li>expressions delimited by <code>;</code></li> <li>binding a name to a value with <code>=</code> (isn't that already covered by the first
rule anyway?)</li> <li>type declarations (<code>fn</code>, <code>struct</code>, <code>enum</code> keywords)</li></ul> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p>References are created with <code>&amp;</code>. They are dereferenced with <code>*</code>.</p> <h2 id="oop"><a href="#oop" class="header-anchor">#</a> OOP</h2> <p>Rust can be considered object-oriented or not, depending on the definition that
we use. Some facts:</p> <ul><li>Rust has structs and enums that can include some data and methods - like
objects in OOP</li> <li>Parts of a struct may be public or private - encapsulation</li> <li>There is no inheritance, but traits may have default implementations of
methods</li> <li>Some form of polymorphism can be achieved with generics</li></ul></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/programming/rust/cargo.html" class="prev">
        Cargo
      </a></span> <span class="next"><a href="/programming/rust/ownership.html">
        Ownership
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/marcinjahn/technology-notebook/edit/main/src/docs/programming/rust/basics.md" target="_blank" rel="noopener noreferrer">Feel free to contribute to this article!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/18/2022, 7:19:35 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.3112ed8a.js" defer></script><script src="/assets/js/2.2f4ad232.js" defer></script><script src="/assets/js/74.94702f32.js" defer></script>
  </body>
</html>
