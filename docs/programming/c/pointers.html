<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pointers | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Pointers in the C programming language">
    <meta property="og:url" content="/programming/c/pointers.html">
    <meta property="og:site_name" content="Marcin Jahn | Technology Notebook">
    <meta property="og:title" content="Pointers">
    <meta property="og:description" content="Pointers in the C programming language">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Technology Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.8f8d1251.css" as="style"><link rel="preload" href="/assets/js/app.90468082.js" as="script"><link rel="preload" href="/assets/js/2.de42a2cb.js" as="script"><link rel="preload" href="/assets/js/7.18c30d3a.js" as="script"><link rel="prefetch" href="/assets/js/10.978f0e0c.js"><link rel="prefetch" href="/assets/js/100.9543ff0b.js"><link rel="prefetch" href="/assets/js/101.993c7851.js"><link rel="prefetch" href="/assets/js/102.d4693579.js"><link rel="prefetch" href="/assets/js/103.48484638.js"><link rel="prefetch" href="/assets/js/104.3e18fda1.js"><link rel="prefetch" href="/assets/js/105.3f1b486a.js"><link rel="prefetch" href="/assets/js/106.99b483f8.js"><link rel="prefetch" href="/assets/js/107.c03ca7bb.js"><link rel="prefetch" href="/assets/js/108.d8caaa0b.js"><link rel="prefetch" href="/assets/js/109.9756c3a9.js"><link rel="prefetch" href="/assets/js/11.812dd130.js"><link rel="prefetch" href="/assets/js/110.7d293128.js"><link rel="prefetch" href="/assets/js/111.e53ce4d9.js"><link rel="prefetch" href="/assets/js/112.cf233ea0.js"><link rel="prefetch" href="/assets/js/113.708df8f3.js"><link rel="prefetch" href="/assets/js/114.f1de03b5.js"><link rel="prefetch" href="/assets/js/115.39d370ed.js"><link rel="prefetch" href="/assets/js/116.02fe4f9b.js"><link rel="prefetch" href="/assets/js/117.a95765dc.js"><link rel="prefetch" href="/assets/js/118.bee2019f.js"><link rel="prefetch" href="/assets/js/119.d923b2a7.js"><link rel="prefetch" href="/assets/js/12.cd315aef.js"><link rel="prefetch" href="/assets/js/120.486818c8.js"><link rel="prefetch" href="/assets/js/121.e781836a.js"><link rel="prefetch" href="/assets/js/122.e8723185.js"><link rel="prefetch" href="/assets/js/123.6e1c9982.js"><link rel="prefetch" href="/assets/js/124.fb51182a.js"><link rel="prefetch" href="/assets/js/125.6f349af4.js"><link rel="prefetch" href="/assets/js/126.32319698.js"><link rel="prefetch" href="/assets/js/127.cafb7b52.js"><link rel="prefetch" href="/assets/js/128.159a6333.js"><link rel="prefetch" href="/assets/js/129.29cfadec.js"><link rel="prefetch" href="/assets/js/13.4ab4beb0.js"><link rel="prefetch" href="/assets/js/130.6f4fc962.js"><link rel="prefetch" href="/assets/js/131.d9dc3d79.js"><link rel="prefetch" href="/assets/js/132.60ce2758.js"><link rel="prefetch" href="/assets/js/133.000d6bb3.js"><link rel="prefetch" href="/assets/js/134.d3d1dc4a.js"><link rel="prefetch" href="/assets/js/135.d68a06b8.js"><link rel="prefetch" href="/assets/js/136.aa38c02d.js"><link rel="prefetch" href="/assets/js/137.7ff3d77d.js"><link rel="prefetch" href="/assets/js/138.898fe804.js"><link rel="prefetch" href="/assets/js/139.f92e6099.js"><link rel="prefetch" href="/assets/js/14.6acb64a0.js"><link rel="prefetch" href="/assets/js/15.674a24f0.js"><link rel="prefetch" href="/assets/js/16.60eefdf8.js"><link rel="prefetch" href="/assets/js/17.6d17ca08.js"><link rel="prefetch" href="/assets/js/18.51628590.js"><link rel="prefetch" href="/assets/js/19.1fbde58a.js"><link rel="prefetch" href="/assets/js/20.ed58cefd.js"><link rel="prefetch" href="/assets/js/21.f3e1342b.js"><link rel="prefetch" href="/assets/js/22.eb4df333.js"><link rel="prefetch" href="/assets/js/23.522a9b67.js"><link rel="prefetch" href="/assets/js/24.f443ee65.js"><link rel="prefetch" href="/assets/js/25.b2723dc5.js"><link rel="prefetch" href="/assets/js/26.cc4cf13d.js"><link rel="prefetch" href="/assets/js/27.b8a821bc.js"><link rel="prefetch" href="/assets/js/28.3d167270.js"><link rel="prefetch" href="/assets/js/29.16bec07c.js"><link rel="prefetch" href="/assets/js/3.42297d17.js"><link rel="prefetch" href="/assets/js/30.d04da71b.js"><link rel="prefetch" href="/assets/js/31.1512a289.js"><link rel="prefetch" href="/assets/js/32.97d9ad45.js"><link rel="prefetch" href="/assets/js/33.1f73da10.js"><link rel="prefetch" href="/assets/js/34.ee643860.js"><link rel="prefetch" href="/assets/js/35.3d0bc547.js"><link rel="prefetch" href="/assets/js/36.069daf14.js"><link rel="prefetch" href="/assets/js/37.31d7ee5b.js"><link rel="prefetch" href="/assets/js/38.255dd248.js"><link rel="prefetch" href="/assets/js/39.8f7266ff.js"><link rel="prefetch" href="/assets/js/4.362e29a5.js"><link rel="prefetch" href="/assets/js/40.abc18ec7.js"><link rel="prefetch" href="/assets/js/41.878d0337.js"><link rel="prefetch" href="/assets/js/42.219cd51b.js"><link rel="prefetch" href="/assets/js/43.07caba3a.js"><link rel="prefetch" href="/assets/js/44.3414b9d8.js"><link rel="prefetch" href="/assets/js/45.3c917f0f.js"><link rel="prefetch" href="/assets/js/46.3918aab0.js"><link rel="prefetch" href="/assets/js/47.46efcf9a.js"><link rel="prefetch" href="/assets/js/48.7c8d28a9.js"><link rel="prefetch" href="/assets/js/49.c6312501.js"><link rel="prefetch" href="/assets/js/5.446723c2.js"><link rel="prefetch" href="/assets/js/50.75fa2703.js"><link rel="prefetch" href="/assets/js/51.cc1c49d5.js"><link rel="prefetch" href="/assets/js/52.a4353c27.js"><link rel="prefetch" href="/assets/js/53.804239bc.js"><link rel="prefetch" href="/assets/js/54.7e4b00f7.js"><link rel="prefetch" href="/assets/js/55.c620fea9.js"><link rel="prefetch" href="/assets/js/56.bd26e1f5.js"><link rel="prefetch" href="/assets/js/57.33be3fcb.js"><link rel="prefetch" href="/assets/js/58.a896906b.js"><link rel="prefetch" href="/assets/js/59.cf20bbd2.js"><link rel="prefetch" href="/assets/js/6.38da7d57.js"><link rel="prefetch" href="/assets/js/60.38a103ab.js"><link rel="prefetch" href="/assets/js/61.3a567cbf.js"><link rel="prefetch" href="/assets/js/62.28a7681a.js"><link rel="prefetch" href="/assets/js/63.79863beb.js"><link rel="prefetch" href="/assets/js/64.d1c0bec3.js"><link rel="prefetch" href="/assets/js/65.739ef643.js"><link rel="prefetch" href="/assets/js/66.f5438945.js"><link rel="prefetch" href="/assets/js/67.8194f1f2.js"><link rel="prefetch" href="/assets/js/68.7ec8758d.js"><link rel="prefetch" href="/assets/js/69.145df6d5.js"><link rel="prefetch" href="/assets/js/70.bea0c1fd.js"><link rel="prefetch" href="/assets/js/71.03cb696b.js"><link rel="prefetch" href="/assets/js/72.ddcae78d.js"><link rel="prefetch" href="/assets/js/73.bd702f5c.js"><link rel="prefetch" href="/assets/js/74.c07904c1.js"><link rel="prefetch" href="/assets/js/75.72181bb1.js"><link rel="prefetch" href="/assets/js/76.af34fa9e.js"><link rel="prefetch" href="/assets/js/77.27331f7b.js"><link rel="prefetch" href="/assets/js/78.1b898587.js"><link rel="prefetch" href="/assets/js/79.02bca779.js"><link rel="prefetch" href="/assets/js/8.cf0556c0.js"><link rel="prefetch" href="/assets/js/80.604afdfb.js"><link rel="prefetch" href="/assets/js/81.6abd9cd8.js"><link rel="prefetch" href="/assets/js/82.ae733560.js"><link rel="prefetch" href="/assets/js/83.d85f558e.js"><link rel="prefetch" href="/assets/js/84.b2463cce.js"><link rel="prefetch" href="/assets/js/85.63a2257b.js"><link rel="prefetch" href="/assets/js/86.149f25f4.js"><link rel="prefetch" href="/assets/js/87.c145dd9f.js"><link rel="prefetch" href="/assets/js/88.a9e9f684.js"><link rel="prefetch" href="/assets/js/89.206fc767.js"><link rel="prefetch" href="/assets/js/9.ad2cee6a.js"><link rel="prefetch" href="/assets/js/90.d8f871af.js"><link rel="prefetch" href="/assets/js/91.8e247000.js"><link rel="prefetch" href="/assets/js/92.0a4eebc0.js"><link rel="prefetch" href="/assets/js/93.4be246a6.js"><link rel="prefetch" href="/assets/js/94.798ee66f.js"><link rel="prefetch" href="/assets/js/95.1f47b7d4.js"><link rel="prefetch" href="/assets/js/96.5eea8777.js"><link rel="prefetch" href="/assets/js/97.cebc95bd.js"><link rel="prefetch" href="/assets/js/98.1e5a3fee.js"><link rel="prefetch" href="/assets/js/99.0a6d6f47.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f8d1251.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-10a38898><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-10a38898><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-10a38898><img src="/img/github.webp" data-v-f9b87572></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-10a38898><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-10a38898><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-10a38898><img src="/img/github.webp" data-v-f9b87572></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/dotnet.webp"></span> <span>.NET</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/javascript.webp"></span> <span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/rust.webp"></span> <span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span class="img-container"><img src="/sidebar-imgs/c.webp"></span> <span>C/C++</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/c/pointers.html" aria-current="page" class="active sidebar-link">Pointers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/c/pointers.html#use-cases" class="sidebar-link">Use-cases</a></li><li class="sidebar-sub-header"><a href="/programming/c/pointers.html#memory" class="sidebar-link">Memory</a></li><li class="sidebar-sub-header"><a href="/programming/c/pointers.html#usage" class="sidebar-link">Usage</a></li><li class="sidebar-sub-header"><a href="/programming/c/pointers.html#function-pointers" class="sidebar-link">Function Pointers</a></li><li class="sidebar-sub-header"><a href="/programming/c/pointers.html#references" class="sidebar-link">References</a></li></ul></li><li><a href="/programming/c/strings.html" class="sidebar-link">Strings</a></li><li><a href="/programming/c/dynamic-memory.html" class="sidebar-link">Dynamic Memory</a></li><li><a href="/programming/c/argc-argv-visualized.html" class="sidebar-link">argc and argv Visualization</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/css.webp"></span> <span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/unity.webp"></span> <span>Unity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/algorithms.webp"></span> <span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="pointers"><a href="#pointers" class="header-anchor">#</a> Pointers</h1> <p>A pointer is a variable whose value is the address of some value.</p> <p>The declaration looks as follows:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">float</span> <span class="token operator">*</span>my_pointer
</code></pre></div><p>The pointer is defined with the type of the value that it points to. This is
helpful, because:</p> <ul><li>we can do various arithmetic operations on pointers (e.g. <code>++</code> will result in
the correct amount of bytes being added).</li> <li>we can dereference pointers - the runtime needs to know how many bytes a given
pointer points to and how to interpret them (e.g. <code>int</code> and <code>float</code> both take
4 bytes, but the same contents mean different values)</li></ul> <p>The &quot;star&quot; sign may be placed adjacent to the type or to the name, or to both:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token operator">*</span>pointer<span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token operator">*</span> pointer2<span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token operator">*</span>pointer3<span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Smart Pointers in C++</p> <p>C++ additionally has <strong>Smart Pointers</strong>, which are like pointers with added
reference counting. When the data pointed to by the pointer goes out of scope,
the value gets deleted automatically. Depending who you ask you might hear that
this is a form of garbage collection.</p> <p>Smart pointers might be <em>shared</em> or <em>unique</em> - the latter one is a bit similar
to the concept of <a href="/programming/rust/ownership.html">Ownership in Rust</a> (it even
has a <em>move</em> operation!).</p></div> <h2 id="use-cases"><a href="#use-cases" class="header-anchor">#</a> Use-cases</h2> <p>Pointers are useful for:</p> <ul><li>passing data to functions by reference (e.g. <code>void increment(int *number)</code>)</li> <li>allocating memory on the heap and keeping reference to it</li></ul> <h2 id="memory"><a href="#memory" class="header-anchor">#</a> Memory</h2> <p>Memory is organized as follows:</p> <p><img src="/assets/img/memory.9dd38dce.png" alt=""></p> <p>Each slot is addressed.</p> <p>A pointer stores an address to some value in memory:</p> <p><img src="/assets/img/pointer-in-memory.9611d464.png" alt=""></p> <p>Pointer itself also has an address in memory, it also is some variable.
In the case above, <code>&amp;p</code> is <code>64</code>.</p> <h3 id="variables"><a href="#variables" class="header-anchor">#</a> Variables</h3> <p>When we define some variable, it will be assigned some address in memory. If we
try to print the value under that address, we will find some &quot;random&quot; data:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> variable<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span>pointer <span class="token operator">=</span> <span class="token operator">&amp;</span>variable<span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>pointer<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 or some other trash value</span>

</code></pre></div><h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span>pointer<span class="token punctuation">;</span>

pointer <span class="token operator">=</span> <span class="token operator">&amp;</span>number<span class="token punctuation">;</span> <span class="token comment">// address where value 10 is stored</span>

<span class="token comment">// Dereferencing</span>
<span class="token keyword">int</span> number_copy <span class="token operator">=</span> <span class="token operator">*</span>pointer<span class="token punctuation">;</span> <span class="token comment">// returns value stored under the address that the pointer contains</span>

<span class="token operator">*</span>pointer <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//updates the value of the `number` variable</span>
</code></pre></div><h3 id="arrays"><a href="#arrays" class="header-anchor">#</a> Arrays</h3> <p>Array can be treated as a pointer to <strong>the first element</strong> that it contains.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token operator">*</span>pointer <span class="token operator">=</span> array<span class="token punctuation">;</span> <span class="token comment">// same as &amp;array[0]</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Address of array[0] = %x\n&quot;</span><span class="token punctuation">,</span> pointer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Value of array[0] = %x\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>pointer<span class="token punctuation">)</span><span class="token punctuation">;</span>

pointer<span class="token operator">++</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Address of array[1] = %x\n&quot;</span><span class="token punctuation">,</span> pointer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Value of array[1] = %x\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>pointer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Simply:</p> <ul><li>address: <code>&amp;array[i]</code> = <code>array + i</code> = <code>pointer + i</code>;</li> <li>value: <code>array[i]</code> = <code>*(array + i)</code> = <code>*(pointer + i)</code></li></ul> <div class="custom-block danger"><p class="custom-block-title">Array and pointer are not the same thing</p> <p>An array variable cannot have its value set to some pointer!</p> <div class="language-c extra-class"><pre class="language-c"><code>array <span class="token operator">=</span> pointer<span class="token punctuation">;</span> <span class="token comment">//wrong!</span>
</code></pre></div><p>Therefore array variable is not the same as pointer.</p></div> <h4 id="multi-dimensional-arrays"><a href="#multi-dimensional-arrays" class="header-anchor">#</a> Multi-dimensional Arrays</h4> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> B<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> B<span class="token punctuation">;</span> <span class="token comment">// ERROR! B is a pointer to an array, not to an int</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> B<span class="token punctuation">;</span> <span class="token comment">// OK; 3 is needed, because pointer arithmetics needs to &quot;know&quot;</span>
                 <span class="token comment">// how many bytes to add in operations like p++</span>
</code></pre></div><p><img src="/assets/img/multi-dimensional-arrays.65da6dbf.png" alt=""></p> <p>Pointer arithmetic examples:</p> <ul><li>Printing <code>B</code> (or <code>&amp;B[0]</code>) would return <code>400</code> (the address of the first
sub-array)</li> <li>Printing <code>*B</code> (or <code>B[0]</code> or <code>&amp;B[0][0]</code>) would return <code>400</code> (the address of the
first element in the first sub-array)</li> <li>Printing <code>B+1</code> (or <code>&amp;B[1]</code>) would return <code>412</code> (the address of the second
sub-array)</li> <li>Printing <code>*(B+1)</code> (or <code>B[1]</code> or <code>&amp;B[1][0]</code>) would return <code>412</code> (the address of
the first element in the second sub-array)</li> <li>Printing <code>*(*B+1)</code> (or <code>B[0][1]</code>) would return <code>3</code>.</li> <li><code>p++</code> would move from <code>400</code> to <code>412</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>B</code> is an address of the first sub-array.
<code>*B</code> is an address of the first element of the first sub-array.
<code>**B</code> is the value of the first sub-array.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>In general, <code>array + i</code> moves us to the next element within the array. That way,
<code>B</code> being an array of arrays, <code>B + i</code> moves us to the next sub-array.</p></div> <h4 id="pointer-to-pointer"><a href="#pointer-to-pointer" class="header-anchor">#</a> Pointer to Pointer</h4> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span>  <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>q <span class="token operator">=</span> <span class="token operator">&amp;</span>p<span class="token punctuation">;</span>
</code></pre></div><p>A <code>p</code> points to <code>x</code>. <code>q</code> points to <code>p</code>.</p> <p><img src="/assets/img/pointer-to-pointer.7695522c.png" alt=""></p> <p>In this exmple we have even <code>int ***</code> pointer (a pointer to pointer to pointer).</p> <p>We can also dereference such &quot;deep&quot; pointers. For example:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints 6</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Arrays</p> <p>Pointers to pointers are analogical to multi-dimensional arrays. <code>int **pointer</code>
is analogical to <code>int array[][]</code>. <code>pointer</code> points to a pointer that points to
the first element of the inner array.</p> <p>In general, replacing <code>*</code> with <code>[]</code> is a helpful mental technique in
understanding pointers.</p> <p><code>int (*p)[];</code> - it is analogical to <code>int **p;</code></p></div> <h4 id="arrays-as-arguments"><a href="#arrays-as-arguments" class="header-anchor">#</a> Arrays as arguments</h4> <p>When a function accepts an array as an argument, a pointer to an array is
passed:</p> <p><img src="/assets/img/array-in-argument.3238d951.png" alt=""></p> <p>This means that <code>sizeof(A)</code> will be different in <code>main()</code> (20 bytes) and in
<code>SumOfElements()</code> (4 bytes - just the size of a pointer to integer!).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Function(int[] A)</code> is treated the same as <code>Function(int *A)</code>. A typical C
<code>main</code> function has both <code>char *argv</code> and <code>int argc</code> as arguments - a pointer to
arguments and a count of arguments.</p></div> <div class="custom-block tip"><p class="custom-block-title">Multi-dimensional Arrays</p> <p>A function that accepts a multi-dimensional array has to specify the count of
elements in sub-arrays.</p> <p>Examples:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">)</span> <span class="token comment">// size of int is known</span>

<span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// an array of arrays that contain 2 elements</span>

<span class="token keyword">void</span> <span class="token function">func3</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// an array where each item is 3 arrays of 2 items each</span>
</code></pre></div></div> <h3 id="returning-a-pointer"><a href="#returning-a-pointer" class="header-anchor">#</a> Returning a pointer</h3> <p>It's wrong to return a pointer to a variable on a stack:</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token operator">*</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token function">Add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// we got a pointer to a sum</span>
  <span class="token function">SomeOtherFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the value that p points to could be overwritten by the new stack frame!</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Instead, we should allocate the result on the <a href="/programming/c/dynamic-memory.html">heap</a> and
return a pointer to it.</p> <h2 id="function-pointers"><a href="#function-pointers" class="header-anchor">#</a> Function Pointers</h2> <div class="language-c extra-class"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> Add<span class="token punctuation">;</span> <span class="token comment">// pointer definition contains return type and a list of parameters</span>
  <span class="token keyword">int</span> c  <span class="token operator">=</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// executes Add via a pointer - adds 2 and 3</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A pointer <code>p</code> points to a function <code>Add</code>.</p> <div class="custom-block tip"><p class="custom-block-title">Ampersand and Start</p> <p>Address of a function can be retrieved just by function's name (e.g. <code>Add</code>) or
with <code>&amp;</code> (e.g. <code>&amp;Add</code>).</p> <p>We can invoke a function via a pointer just by using the pointer as if it was a
function (e.g. <code>p(2,3)</code>) or with a <code>*</code> (e.g. <code>(*p)(2, 3)</code>).</p></div> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p><a href="https://www.youtube.com/watch?v=zuegQmMdy8M" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=zuegQmMdy8M<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/programming/rust/tips.html" class="prev">
        Tips
      </a></span> <span class="next"><a href="/programming/c/strings.html">
        Strings
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/1/2022, 8:25:34 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.90468082.js" defer></script><script src="/assets/js/2.de42a2cb.js" defer></script><script src="/assets/js/7.18c30d3a.js" defer></script>
  </body>
</html>
