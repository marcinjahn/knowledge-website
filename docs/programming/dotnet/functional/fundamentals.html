<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fundamentals of Functional Programming | Marcin Jahn | Tech Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Fundamentals of Functional Programming, like Higher-Order Functions (HOF), or purity, in C#">
    <meta property="og:url" content="/programming/dotnet/functional/fundamentals.html">
    <meta property="og:site_name" content="Marcin Jahn | Tech Notebook">
    <meta property="og:title" content="Fundamentals of Functional Programming">
    <meta property="og:description" content="Fundamentals of Functional Programming, like Higher-Order Functions (HOF), or purity, in C#">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Tech Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="#7D84B2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.c2e909f7.css" as="style"><link rel="preload" href="/assets/js/app.966978df.js" as="script"><link rel="preload" href="/assets/js/2.e154a615.js" as="script"><link rel="preload" href="/assets/js/6.1bc79fed.js" as="script"><link rel="prefetch" href="/assets/js/10.4010014d.js"><link rel="prefetch" href="/assets/js/100.76bfe42a.js"><link rel="prefetch" href="/assets/js/101.d10adfef.js"><link rel="prefetch" href="/assets/js/102.78f0a2d7.js"><link rel="prefetch" href="/assets/js/103.b604e5e9.js"><link rel="prefetch" href="/assets/js/104.6cfb4c86.js"><link rel="prefetch" href="/assets/js/105.3eeb7693.js"><link rel="prefetch" href="/assets/js/106.bb73f310.js"><link rel="prefetch" href="/assets/js/107.ca023b7f.js"><link rel="prefetch" href="/assets/js/108.e43abb40.js"><link rel="prefetch" href="/assets/js/109.d28c3b67.js"><link rel="prefetch" href="/assets/js/11.e413dcd0.js"><link rel="prefetch" href="/assets/js/110.7dc34c54.js"><link rel="prefetch" href="/assets/js/111.b5c851a3.js"><link rel="prefetch" href="/assets/js/112.1016d70a.js"><link rel="prefetch" href="/assets/js/113.40cdf430.js"><link rel="prefetch" href="/assets/js/114.d949130e.js"><link rel="prefetch" href="/assets/js/115.135bf191.js"><link rel="prefetch" href="/assets/js/116.a472e97a.js"><link rel="prefetch" href="/assets/js/117.1d2380f5.js"><link rel="prefetch" href="/assets/js/118.0801babc.js"><link rel="prefetch" href="/assets/js/119.d4a4a492.js"><link rel="prefetch" href="/assets/js/12.5cebba1e.js"><link rel="prefetch" href="/assets/js/120.cc665372.js"><link rel="prefetch" href="/assets/js/121.3e06b23d.js"><link rel="prefetch" href="/assets/js/122.b54e5978.js"><link rel="prefetch" href="/assets/js/123.ce65d4ea.js"><link rel="prefetch" href="/assets/js/124.aef6e218.js"><link rel="prefetch" href="/assets/js/125.d3f7d356.js"><link rel="prefetch" href="/assets/js/126.0013aee3.js"><link rel="prefetch" href="/assets/js/127.16d73edc.js"><link rel="prefetch" href="/assets/js/128.5203b2f9.js"><link rel="prefetch" href="/assets/js/129.871ad5ed.js"><link rel="prefetch" href="/assets/js/13.89422965.js"><link rel="prefetch" href="/assets/js/130.26bfd0c1.js"><link rel="prefetch" href="/assets/js/131.268f723c.js"><link rel="prefetch" href="/assets/js/132.701b7a13.js"><link rel="prefetch" href="/assets/js/133.6717605f.js"><link rel="prefetch" href="/assets/js/134.365fd7a1.js"><link rel="prefetch" href="/assets/js/135.aff5e003.js"><link rel="prefetch" href="/assets/js/136.d1d6d462.js"><link rel="prefetch" href="/assets/js/137.0ea83666.js"><link rel="prefetch" href="/assets/js/138.809f766b.js"><link rel="prefetch" href="/assets/js/139.4991cda6.js"><link rel="prefetch" href="/assets/js/14.ab8e1dcc.js"><link rel="prefetch" href="/assets/js/140.cf9ed1cb.js"><link rel="prefetch" href="/assets/js/141.fe5dd808.js"><link rel="prefetch" href="/assets/js/142.70dd6b5b.js"><link rel="prefetch" href="/assets/js/143.9f8c82fd.js"><link rel="prefetch" href="/assets/js/144.63193f45.js"><link rel="prefetch" href="/assets/js/145.a21651d3.js"><link rel="prefetch" href="/assets/js/146.00e66169.js"><link rel="prefetch" href="/assets/js/147.7c626aa3.js"><link rel="prefetch" href="/assets/js/148.e294b5b3.js"><link rel="prefetch" href="/assets/js/149.8ecdf49d.js"><link rel="prefetch" href="/assets/js/15.89e1dd21.js"><link rel="prefetch" href="/assets/js/150.a5bee3ae.js"><link rel="prefetch" href="/assets/js/151.1560cc2c.js"><link rel="prefetch" href="/assets/js/152.02ea421d.js"><link rel="prefetch" href="/assets/js/16.2a55624c.js"><link rel="prefetch" href="/assets/js/17.8878d520.js"><link rel="prefetch" href="/assets/js/18.350917e6.js"><link rel="prefetch" href="/assets/js/19.cf1af818.js"><link rel="prefetch" href="/assets/js/20.1c8e8717.js"><link rel="prefetch" href="/assets/js/21.10c03aef.js"><link rel="prefetch" href="/assets/js/22.a404cd1c.js"><link rel="prefetch" href="/assets/js/23.f4b4bfb2.js"><link rel="prefetch" href="/assets/js/24.cc7b45ce.js"><link rel="prefetch" href="/assets/js/25.87db353c.js"><link rel="prefetch" href="/assets/js/26.3794764b.js"><link rel="prefetch" href="/assets/js/27.ebed9134.js"><link rel="prefetch" href="/assets/js/28.4909b1ae.js"><link rel="prefetch" href="/assets/js/29.36176dd8.js"><link rel="prefetch" href="/assets/js/3.54e9968c.js"><link rel="prefetch" href="/assets/js/30.73aa628c.js"><link rel="prefetch" href="/assets/js/31.40f1b1d2.js"><link rel="prefetch" href="/assets/js/32.3b90ff2a.js"><link rel="prefetch" href="/assets/js/33.e414a879.js"><link rel="prefetch" href="/assets/js/34.1bec9902.js"><link rel="prefetch" href="/assets/js/35.a682d85c.js"><link rel="prefetch" href="/assets/js/36.fae3b557.js"><link rel="prefetch" href="/assets/js/37.b6e12fff.js"><link rel="prefetch" href="/assets/js/38.18cb3d3d.js"><link rel="prefetch" href="/assets/js/39.48e1c6c4.js"><link rel="prefetch" href="/assets/js/4.c31a517b.js"><link rel="prefetch" href="/assets/js/40.85b85b8c.js"><link rel="prefetch" href="/assets/js/41.94d3e608.js"><link rel="prefetch" href="/assets/js/42.4216a2f8.js"><link rel="prefetch" href="/assets/js/43.d1023d2d.js"><link rel="prefetch" href="/assets/js/44.8dad369c.js"><link rel="prefetch" href="/assets/js/45.1f6047dd.js"><link rel="prefetch" href="/assets/js/46.62047ba2.js"><link rel="prefetch" href="/assets/js/47.475f40f9.js"><link rel="prefetch" href="/assets/js/48.12680be5.js"><link rel="prefetch" href="/assets/js/49.23d1ca70.js"><link rel="prefetch" href="/assets/js/5.820c1859.js"><link rel="prefetch" href="/assets/js/50.3cccea92.js"><link rel="prefetch" href="/assets/js/51.60977eb9.js"><link rel="prefetch" href="/assets/js/52.6cd304b8.js"><link rel="prefetch" href="/assets/js/53.f02218d6.js"><link rel="prefetch" href="/assets/js/54.b2f388df.js"><link rel="prefetch" href="/assets/js/55.b12636eb.js"><link rel="prefetch" href="/assets/js/56.ce8934a6.js"><link rel="prefetch" href="/assets/js/57.71d8183b.js"><link rel="prefetch" href="/assets/js/58.18f8652b.js"><link rel="prefetch" href="/assets/js/59.8f4a26ad.js"><link rel="prefetch" href="/assets/js/60.48c63c98.js"><link rel="prefetch" href="/assets/js/61.26d5b3f2.js"><link rel="prefetch" href="/assets/js/62.5445b2cc.js"><link rel="prefetch" href="/assets/js/63.c4edc6a0.js"><link rel="prefetch" href="/assets/js/64.b37e720b.js"><link rel="prefetch" href="/assets/js/65.01eed1a3.js"><link rel="prefetch" href="/assets/js/66.2ca45e53.js"><link rel="prefetch" href="/assets/js/67.7e610830.js"><link rel="prefetch" href="/assets/js/68.1cebe456.js"><link rel="prefetch" href="/assets/js/69.871f1f57.js"><link rel="prefetch" href="/assets/js/7.cf85c2c3.js"><link rel="prefetch" href="/assets/js/70.d7102926.js"><link rel="prefetch" href="/assets/js/71.da3ab009.js"><link rel="prefetch" href="/assets/js/72.6dd24e71.js"><link rel="prefetch" href="/assets/js/73.589976fe.js"><link rel="prefetch" href="/assets/js/74.0dc3dd59.js"><link rel="prefetch" href="/assets/js/75.311d5864.js"><link rel="prefetch" href="/assets/js/76.be1ff81a.js"><link rel="prefetch" href="/assets/js/77.2210347b.js"><link rel="prefetch" href="/assets/js/78.8eebbfe4.js"><link rel="prefetch" href="/assets/js/79.e281fb0e.js"><link rel="prefetch" href="/assets/js/8.5f339f67.js"><link rel="prefetch" href="/assets/js/80.999b443f.js"><link rel="prefetch" href="/assets/js/81.7c6e6bab.js"><link rel="prefetch" href="/assets/js/82.46f093ff.js"><link rel="prefetch" href="/assets/js/83.4afa1f09.js"><link rel="prefetch" href="/assets/js/84.b78affef.js"><link rel="prefetch" href="/assets/js/85.0ed2f5dd.js"><link rel="prefetch" href="/assets/js/86.b3df3a78.js"><link rel="prefetch" href="/assets/js/87.c5031086.js"><link rel="prefetch" href="/assets/js/88.71816ea5.js"><link rel="prefetch" href="/assets/js/89.d9f2b0bb.js"><link rel="prefetch" href="/assets/js/9.035932be.js"><link rel="prefetch" href="/assets/js/90.3b509da4.js"><link rel="prefetch" href="/assets/js/91.0667edf3.js"><link rel="prefetch" href="/assets/js/92.46f19ce9.js"><link rel="prefetch" href="/assets/js/93.5d2db654.js"><link rel="prefetch" href="/assets/js/94.bc1375bc.js"><link rel="prefetch" href="/assets/js/95.3cf181a5.js"><link rel="prefetch" href="/assets/js/96.9a16ae05.js"><link rel="prefetch" href="/assets/js/97.02cbff32.js"><link rel="prefetch" href="/assets/js/98.6208716e.js"><link rel="prefetch" href="/assets/js/99.870559fe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c2e909f7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Tech Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span class="img-container"><img src="/sidebar-imgs/dotnet.webp"></span> <span>.NET</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/dotnet/http-client.html" class="sidebar-link">HTTPClient</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><!----> <span>Async</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/programming/dotnet/equality.html" class="sidebar-link">Equality</a></li><li><a href="/programming/dotnet/comparisons.html" class="sidebar-link">Comparisons</a></li><li><a href="/programming/dotnet/enumerable.html" class="sidebar-link">Enumerables</a></li><li><a href="/programming/dotnet/generic-host.html" class="sidebar-link">Generic Host</a></li><li><a href="/programming/dotnet/logging.html" class="sidebar-link">Logging</a></li><li><a href="/programming/dotnet/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/programming/dotnet/records.html" class="sidebar-link">Records</a></li><li><a href="/programming/dotnet/grpc.html" class="sidebar-link">gRPC</a></li><li><a href="/programming/dotnet/platform-invoke.html" class="sidebar-link">Platform Invoke</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><!----> <span>ASP.NET Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><!----> <span>Entity Framework Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><!----> <span>Functional Programming</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/dotnet/functional/fundamentals.html" aria-current="page" class="active sidebar-link">Fundamentals of Functional Programming</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/dotnet/functional/fundamentals.html#higher-order-functions" class="sidebar-link">Higher-Order Functions</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/functional/fundamentals.html#purity" class="sidebar-link">Purity</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/functional/fundamentals.html#functors" class="sidebar-link">Functors</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/functional/fundamentals.html#monads" class="sidebar-link">Monads</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/functional/fundamentals.html#regular-and-elevated-values" class="sidebar-link">Regular and Elevated Values</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/functional/fundamentals.html#references" class="sidebar-link">References</a></li></ul></li><li><a href="/programming/dotnet/functional/dotnet-features.html" class="sidebar-link">.NET Functional Features</a></li><li><a href="/programming/dotnet/functional/signatures.html" class="sidebar-link">Signatures</a></li><li><a href="/programming/dotnet/functional/composition.html" class="sidebar-link">Function Composition</a></li><li><a href="/programming/dotnet/functional/error-handling.html" class="sidebar-link">Error Handling</a></li><li><a href="/programming/dotnet/functional/partial-application.html" class="sidebar-link">Partial Application</a></li><li><a href="/programming/dotnet/functional/modularity.html" class="sidebar-link">Modularity</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/javascript.webp"></span> <span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/rust.webp"></span> <span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/c.webp"></span> <span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/css.webp"></span> <span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/unity.webp"></span> <span>Unity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/algorithms.webp"></span> <span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/architecture.webp"></span> <span>Architecture</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="fundamentals-of-functional-programming"><a href="#fundamentals-of-functional-programming" class="header-anchor">#</a> Fundamentals of Functional Programming</h1> <p>One of the most significant issues in programming nowadays is how to deal with
the increasing complexity of the software. Functional Programming is a way to
simplify programs.</p> <p>In FP (opposed to OOP), separating functions from data is natural. Functions
encode logic, and data represent inputs and outputs of functions.</p> <p>In FP, instead of defining steps how to compute something, we define what the
result is.</p> <h2 id="higher-order-functions"><a href="#higher-order-functions" class="header-anchor">#</a> Higher-Order Functions</h2> <p>These are functions that either:</p> <ul><li>accept other functions as inputs</li> <li>return functions as outputs</li> <li>both of the above</li></ul> <h2 id="purity"><a href="#purity" class="header-anchor">#</a> Purity</h2> <p>In mathematics, functions don't have side effects. Based on some inputs, some
output is returned. In programming, that's not always the case. Programs change
state.</p> <p>Functions might be <strong>pure</strong> or <strong>impure</strong>. Pure functions are similar to the
mathematical functions. They do not rely on or modify any state. Their outputs
depend solely on the inputs.</p> <div class="custom-block tip"><p class="custom-block-title">Impurity will always be there</p> <p>Some of the code has to be impure. Otherwise, the program wouldn't be able to
communicate the result to the outside world (communicating outside world implies
impurity).</p></div> <p>Impure functions can modify (or just read) an external state, and their outputs
can depend on some external state as well. They are much harder to reason about,
test and they might now work as expected in concurrent scenarios.</p> <div class="custom-block tip"><p class="custom-block-title">Impurity cases</p> <p>If a function modifies its inputs (and the modification is visible
outside of the function), it's an impure function.</p> <p>If a function may throw exceptions, it's impure. The outcome might change
depending on having a try-catch or not. (so what?)</p> <p>If the function does any I/O operations (even writing to the console), it's
impure. The result might differ depending on the availability and state of
the external I/O resource.</p></div> <p>Pure functions ALWAYS return the same output for the same input. Functional
programs may be optimized with:</p> <ul><li>parallelization - different threads can run functions, and no conflicts will
appear.</li> <li>lazy evaluation - only evaluates outputs when needed</li> <li>memoization - caching of results for performance gains</li></ul> <p>These techniques are not straightforward with impure functions.</p> <div class="custom-block tip"><p class="custom-block-title">Static Methods</p> <p>Pure functions should be implemented as static methods.</p></div> <h2 id="functors"><a href="#functors" class="header-anchor">#</a> Functors</h2> <p>When a value is wrapped in some container (like an <code>Option</code> or <code>IEnumerable</code>) we
can't apply functions to it:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token function">Increment</span><span class="token punctuation">(</span><span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//doesn't work</span>
</code></pre></div><p>This is where <code>Map</code> comes in. It allows us to extract the value from a container
and apply a function to it. It returns a functor a well.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>Increment<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Some(4)</span>
</code></pre></div><p>A type for which a <code>Map</code> function (<code>Select</code> in C#) is defined is called a
<strong>functor</strong>. Functors include:</p> <ul><li>collections (or in general <code>IEnumerable</code>)</li> <li><code>Option</code></li></ul> <p>Functors have some inner values to which a function can be applied.
A map can be represented as follows:</p> <p><code>(C&lt;T&gt;, (T -&gt; R)) -&gt; C&lt;R&gt;</code></p> <p><code>C&lt;T&gt;</code> is a functor.</p> <div class="custom-block tip"><p class="custom-block-title">Functions</p> <p>Functions are functors as well!</p></div> <h3 id="map-vs-foreach"><a href="#map-vs-foreach" class="header-anchor">#</a> Map vs ForEach</h3> <p><code>Map</code> is to be used with functions that have no side-effects, while <code>ForEach</code> is
to be used with side-effect function. Example:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;Andy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Jules&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
names
  <span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span>n <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;Hello </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">n</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// pure function</span>
  <span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span>WriteLine<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// impure function</span>
</code></pre></div><p><code>Map</code> takes a <code>Func</code>, while <code>ForEach</code> takes an <code>Action</code>.
<code>ForEach</code> does not return anything.</p> <h3 id="map-vs-do"><a href="#map-vs-do" class="header-anchor">#</a> Map vs Do</h3> <p>We should also consider a <code>Do</code> function (sometimes called <code>Tee</code> or <code>Tap</code>). It is
supposed to be used whenever we need to do some side-effect in the middle of a
data flow. We could use <code>Map</code> for that as well, but <code>Map</code> shouldn't be used when
side effects are involved.</p> <p><img src="/assets/img/do-fcn.bac8c09c.png" alt=""></p> <p><code>Do</code> invokes some provided action and returns the provided value; the flow may
be continued.</p> <h2 id="monads"><a href="#monads" class="header-anchor">#</a> Monads</h2> <h3 id="bind"><a href="#bind" class="header-anchor">#</a> Bind</h3> <p>A <code>Bind</code> function (<code>SelectMany</code> in C#) is useful to flatten lists of lists.</p> <p><code>Bind</code> can be represented as follows:</p> <p><code>(C&lt;T&gt;, (T -&gt; C&lt;R&gt;)) -&gt; C&lt;R&gt;</code></p> <p>A type that has a <code>Bind</code> method is a <strong>monad</strong>.</p> <p>Example:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">record</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">record</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> Name<span class="token punctuation">,</span> <span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>Pet<span class="token punctuation">&gt;</span></span> Pets<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> people <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;George&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Pet<span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Pet</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Pet</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Peter&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Pet<span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Pet</span><span class="token punctuation">(</span><span class="token string">&quot;hamster&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Jady&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>Pet<span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token class-name"><span class="token keyword">var</span></span> animals <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>Pets<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;dog&quot;, &quot;cat&quot;, &quot;hamster&quot;]</span>
</code></pre></div><p>A <code>Map</code> would return a list of lists. <code>Bind</code> is much more suitable here.
The <code>Person[]</code> type is a monad.</p> <h3 id="return"><a href="#return" class="header-anchor">#</a> Return</h3> <p>A monad must also have a <code>Return</code> function defined. It's a function that wraps a
&quot;normal&quot; value <code>T</code> into a monadic value <code>C&lt;T&gt;</code>.</p> <p><code>Return</code> can be represented as follows:</p> <p><code>T -&gt; C&lt;T&gt;</code></p> <p>An example of a <code>Return</code> function could be a function that turns items into a
list, or a <code>Some</code> method of <code>Option</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>IEnumerable</code> and <code>Option</code> are both <strong>functors</strong> and <strong>monads</strong>.</p> <p>Every monad is also a functor.
Not every functor is a monad.</p></div> <h2 id="regular-and-elevated-values"><a href="#regular-and-elevated-values" class="header-anchor">#</a> Regular and Elevated Values</h2> <p>In general, in our programs, we're dealing with either <em>regular values</em> or
<em>elevated values</em>.</p> <p><img src="/assets/img/elevated-vs-regular.9864e8e4.jpeg" alt=""></p> <p>&quot;Primitive&quot; data types like <code>int</code>, <code>string</code>, <code>bool</code> are <em>regular values</em>. The
types that contain other types are <em>elevated values</em> (<code>List&lt;T&gt;</code>, <code>Task&lt;T&gt;</code>,
<code>Option&lt;T&gt;</code>).</p> <p>We can look at various functions that operate on data as either:</p> <ul><li>returning the same level of abstraction</li> <li>crossing abstraction</li></ul> <p><img src="/assets/img/crossing-abstraction.cd87752e.png" alt=""></p> <p>Examples:</p> <ol><li><code>(int i) =&gt; i.ToString()</code></li> <li><code>(users) =&gt; users.Filter(u =&gt; u.LoggedIn)</code></li> <li><code>Task.CompletedTask(task)</code></li> <li><code>numbers.Sum()</code></li></ol> <h3 id="map-and-bind"><a href="#map-and-bind" class="header-anchor">#</a> Map and Bind</h3> <p>Using this classification, we can look see the following relations:</p> <p><img src="/assets/img/map.00871afd.png" alt=""></p> <p><img src="/assets/img/bind.df773cbe.png" alt=""></p> <p>The functions accepted by these two functions differ in the fact that <code>Bind</code>
requires a function that crosses the abstraction upwards.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Working with <em>regular values</em> only is inefficient and requires things such as
checking for <code>null</code>, using loops, etc. Working on the <em>elevated values</em>
abstraction level makes it possible to fluently chain function calls.</p></div> <p><img src="/assets/img/typical-fp-functions-in-abstractions.d5a0486d.png" alt=""></p> <h3 id="reducing-a-list-to-a-single-value"><a href="#reducing-a-list-to-a-single-value" class="header-anchor">#</a> Reducing a list to a single value</h3> <p>Point 4. on one of the illustrations above shows the case of functions
that bring the value from the <em>elevated</em> level to the <em>regular</em> level.</p> <p>In FP speak, reducing a list of values into a single value is called <strong>fold</strong> or
<strong>reduce</strong>. In .NET we have LINQ's <code>Aggregate</code>. Such function takes an
<em>accumulator</em> and a <em>reducer</em> function.</p> <div class="custom-block tip"><p class="custom-block-title">Lemon Juice Analogy</p> <p>A real-world analogy of <em>reduce</em> is turning lemons into juice. In that analogy,
lemons constitute a list that will be reduced. Glass in an <em>accumulator</em>. If 0
lemons are provided, an empty glass is returned. If there are some lemons, the
state of the glass will be modified with each lemon being squeezed (by a reducer
function).</p></div> <div class="custom-block tip"><p class="custom-block-title">LINQ</p> <p>Some of the LINQ functions simplify the pattern: <code>Sum</code>, <code>Average</code>, etc.</p> <p>Here's how <code>Sum</code> could look like:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>list<span class="token punctuation">.</span><span class="token function">Aggregate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <p>This functionality could also be useful when we want to combine multiple
functions into one function. A good example is validation. We could have
multiple functions that validate a request, but we'd want to have just one entry
point to execute them.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Validator<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token function">CombineValidators</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>Validator<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> validators<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  t <span class="token operator">=&gt;</span> validators<span class="token punctuation">.</span><span class="token function">Aggreagate</span><span class="token punctuation">(</span><span class="token function">Valid</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> validator<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc<span class="token punctuation">.</span><span class="token function">Bind</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span> <span class="token function">validator</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Aggregate</code> is so generic that it could be used to implement <code>Map</code>, <code>Bind</code>, or
<code>Where</code>!</p></div> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <ul><li><a href="https://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html" target="_blank" rel="noopener noreferrer">https://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://learnyouahaskell.com/chapters" target="_blank" rel="noopener noreferrer">http://learnyouahaskell.com/chapters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Functional Programming in C# by Enrico Buonanno</li></ul></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/programming/dotnet/entity-framework-core/tips.html" class="prev">
        Tips
      </a></span> <span class="next"><a href="/programming/dotnet/functional/dotnet-features.html">
        .NET Functional Features
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/17/2022, 7:07:09 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.966978df.js" defer></script><script src="/assets/js/2.e154a615.js" defer></script><script src="/assets/js/6.1bc79fed.js" defer></script>
  </body>
</html>
