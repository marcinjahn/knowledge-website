<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Comparisons | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="How comparisons work in .NET">
    <meta property="og:url" content="/programming/dotnet/comparisons.html">
    <meta property="og:site_name" content="Marcin Jahn | Technology Notebook">
    <meta property="og:title" content="Comparisons">
    <meta property="og:description" content="How comparisons work in .NET">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Technology Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.efb9a866.css" as="style"><link rel="preload" href="/assets/js/app.ac430b79.js" as="script"><link rel="preload" href="/assets/js/2.189ac7f1.js" as="script"><link rel="preload" href="/assets/js/58.d813e503.js" as="script"><link rel="prefetch" href="/assets/js/10.80e56dd6.js"><link rel="prefetch" href="/assets/js/100.a016b3cf.js"><link rel="prefetch" href="/assets/js/101.6b67120d.js"><link rel="prefetch" href="/assets/js/102.48520b6b.js"><link rel="prefetch" href="/assets/js/103.8ba159c6.js"><link rel="prefetch" href="/assets/js/104.e9714af4.js"><link rel="prefetch" href="/assets/js/105.371cfa0d.js"><link rel="prefetch" href="/assets/js/106.8e06b411.js"><link rel="prefetch" href="/assets/js/107.681730f2.js"><link rel="prefetch" href="/assets/js/108.4cd01e07.js"><link rel="prefetch" href="/assets/js/109.153fb5b0.js"><link rel="prefetch" href="/assets/js/11.9bab91bf.js"><link rel="prefetch" href="/assets/js/110.beebfe2a.js"><link rel="prefetch" href="/assets/js/111.ed95631e.js"><link rel="prefetch" href="/assets/js/112.91f42c95.js"><link rel="prefetch" href="/assets/js/12.bb43136e.js"><link rel="prefetch" href="/assets/js/13.fce6930a.js"><link rel="prefetch" href="/assets/js/14.8771443b.js"><link rel="prefetch" href="/assets/js/15.71f025fe.js"><link rel="prefetch" href="/assets/js/16.36586f7d.js"><link rel="prefetch" href="/assets/js/17.78b11971.js"><link rel="prefetch" href="/assets/js/18.0a72fa34.js"><link rel="prefetch" href="/assets/js/19.a828f8f0.js"><link rel="prefetch" href="/assets/js/20.8b337bc5.js"><link rel="prefetch" href="/assets/js/21.9cce8f71.js"><link rel="prefetch" href="/assets/js/22.f3cab438.js"><link rel="prefetch" href="/assets/js/23.61ecf82e.js"><link rel="prefetch" href="/assets/js/24.2e55a16a.js"><link rel="prefetch" href="/assets/js/25.73b70442.js"><link rel="prefetch" href="/assets/js/26.bd6ce2b6.js"><link rel="prefetch" href="/assets/js/27.b57ac51b.js"><link rel="prefetch" href="/assets/js/28.8e277212.js"><link rel="prefetch" href="/assets/js/29.38e71723.js"><link rel="prefetch" href="/assets/js/3.c43547e4.js"><link rel="prefetch" href="/assets/js/30.8c5df7de.js"><link rel="prefetch" href="/assets/js/31.33b78734.js"><link rel="prefetch" href="/assets/js/32.48351acc.js"><link rel="prefetch" href="/assets/js/33.57fd471e.js"><link rel="prefetch" href="/assets/js/34.43b7839b.js"><link rel="prefetch" href="/assets/js/35.b7503fab.js"><link rel="prefetch" href="/assets/js/36.5ed00cce.js"><link rel="prefetch" href="/assets/js/37.598066ce.js"><link rel="prefetch" href="/assets/js/38.83db00b0.js"><link rel="prefetch" href="/assets/js/39.af1fe7dd.js"><link rel="prefetch" href="/assets/js/4.6f0793b7.js"><link rel="prefetch" href="/assets/js/40.62f1475a.js"><link rel="prefetch" href="/assets/js/41.68fcc2e0.js"><link rel="prefetch" href="/assets/js/42.d4bff1bc.js"><link rel="prefetch" href="/assets/js/43.b99ae171.js"><link rel="prefetch" href="/assets/js/44.2cd8e765.js"><link rel="prefetch" href="/assets/js/45.597a5b45.js"><link rel="prefetch" href="/assets/js/46.7f4170ba.js"><link rel="prefetch" href="/assets/js/47.60b40d48.js"><link rel="prefetch" href="/assets/js/48.b0d5f809.js"><link rel="prefetch" href="/assets/js/49.af997b34.js"><link rel="prefetch" href="/assets/js/5.caef7847.js"><link rel="prefetch" href="/assets/js/50.b69c3b1b.js"><link rel="prefetch" href="/assets/js/51.4c2e9161.js"><link rel="prefetch" href="/assets/js/52.7974a145.js"><link rel="prefetch" href="/assets/js/53.33c85916.js"><link rel="prefetch" href="/assets/js/54.bccc2fd3.js"><link rel="prefetch" href="/assets/js/55.72a0d5d3.js"><link rel="prefetch" href="/assets/js/56.b789463a.js"><link rel="prefetch" href="/assets/js/57.22d661b1.js"><link rel="prefetch" href="/assets/js/59.0450d662.js"><link rel="prefetch" href="/assets/js/6.fd6a23a8.js"><link rel="prefetch" href="/assets/js/60.95437a9b.js"><link rel="prefetch" href="/assets/js/61.8b639911.js"><link rel="prefetch" href="/assets/js/62.1cbebb17.js"><link rel="prefetch" href="/assets/js/63.a4c0ee6d.js"><link rel="prefetch" href="/assets/js/64.e95e02b3.js"><link rel="prefetch" href="/assets/js/65.594aa04d.js"><link rel="prefetch" href="/assets/js/66.60f55c5d.js"><link rel="prefetch" href="/assets/js/67.8a8c0543.js"><link rel="prefetch" href="/assets/js/68.a6de9f21.js"><link rel="prefetch" href="/assets/js/69.f0977f0b.js"><link rel="prefetch" href="/assets/js/7.fcef78e7.js"><link rel="prefetch" href="/assets/js/70.23ea790d.js"><link rel="prefetch" href="/assets/js/71.2f589476.js"><link rel="prefetch" href="/assets/js/72.f27c5929.js"><link rel="prefetch" href="/assets/js/73.f7f0bb9a.js"><link rel="prefetch" href="/assets/js/74.bc76b340.js"><link rel="prefetch" href="/assets/js/75.c273c06a.js"><link rel="prefetch" href="/assets/js/76.abbfd72e.js"><link rel="prefetch" href="/assets/js/77.3cbdac60.js"><link rel="prefetch" href="/assets/js/78.cac2b5c2.js"><link rel="prefetch" href="/assets/js/79.13909cbf.js"><link rel="prefetch" href="/assets/js/8.11927cb9.js"><link rel="prefetch" href="/assets/js/80.66c4ff89.js"><link rel="prefetch" href="/assets/js/81.01dc49dc.js"><link rel="prefetch" href="/assets/js/82.1291b312.js"><link rel="prefetch" href="/assets/js/83.8ff62b5e.js"><link rel="prefetch" href="/assets/js/84.53cfb86b.js"><link rel="prefetch" href="/assets/js/85.c3f64177.js"><link rel="prefetch" href="/assets/js/86.eb0d3a66.js"><link rel="prefetch" href="/assets/js/87.4e609be7.js"><link rel="prefetch" href="/assets/js/88.4918f5f5.js"><link rel="prefetch" href="/assets/js/89.1f43f314.js"><link rel="prefetch" href="/assets/js/9.ed2aed21.js"><link rel="prefetch" href="/assets/js/90.8d1a97bb.js"><link rel="prefetch" href="/assets/js/91.615963fa.js"><link rel="prefetch" href="/assets/js/92.794cf15e.js"><link rel="prefetch" href="/assets/js/93.25d22eaa.js"><link rel="prefetch" href="/assets/js/94.50eec270.js"><link rel="prefetch" href="/assets/js/95.7da57503.js"><link rel="prefetch" href="/assets/js/96.7654846d.js"><link rel="prefetch" href="/assets/js/97.01bc56a3.js"><link rel="prefetch" href="/assets/js/98.436765b0.js"><link rel="prefetch" href="/assets/js/99.62928d86.js">
    <link rel="stylesheet" href="/assets/css/0.styles.efb9a866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>.NET</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/dotnet/http-client.html" class="sidebar-link">HTTPClient</a></li><li><a href="/programming/dotnet/async.html" class="sidebar-link">Async</a></li><li><a href="/programming/dotnet/equality.html" class="sidebar-link">Equality</a></li><li><a href="/programming/dotnet/comparisons.html" aria-current="page" class="active sidebar-link">Comparisons</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/dotnet/comparisons.html#icomparable-t" class="sidebar-link">IComparable&lt;T&gt;</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/comparisons.html#operators" class="sidebar-link">Operators</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/comparisons.html#icomparer-t" class="sidebar-link">IComparer&lt;T&gt;</a></li></ul></li><li><a href="/programming/dotnet/generic-host.html" class="sidebar-link">.NET Generic Host</a></li><li><a href="/programming/dotnet/logging.html" class="sidebar-link">Logging</a></li><li><a href="/programming/dotnet/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/programming/dotnet/records.html" class="sidebar-link">Records</a></li><li><a href="/programming/dotnet/entity-framework.html" class="sidebar-link">Entity Framework</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ASP.NET Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Functional Programming</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="comparisons"><a href="#comparisons" class="header-anchor">#</a> Comparisons</h1> <p>Comparisons work out-of-box only for primitive types. For others they need to be
defined.</p> <p>Comparisons do not work well with inheritance. It's not recommneded to implement
comparisons on unsealed classes.</p> <h2 id="icomparable-t"><a href="#icomparable-t" class="header-anchor">#</a> <code>IComparable&lt;T&gt;</code></h2> <p>This interface defines <code>CompareTo</code> method that returns <code>int</code>:</p> <ul><li>-1 (less then)</li> <li>0 (equal)</li> <li>+1 (greater then)</li></ul> <p>It's also recommended to implement non-generic <code>IComparable</code> for legacy code.</p> <p>This interface is used by arrays to sort its items - if item does not implement,
exception will be thrown.</p> <h2 id="operators"><a href="#operators" class="header-anchor">#</a> Operators</h2> <p>There are 4 operators that can be implemented: &lt;, &lt;=, &gt;, &gt;=. If these get
implemented, it's recommended to also implement == (and !=).</p> <h2 id="icomparer-t"><a href="#icomparer-t" class="header-anchor">#</a> <code>IComparer&lt;T&gt;</code></h2> <p>Interface to be implemented by classes that can compare <code>T</code>. When implementing
it there's a convention:</p> <ul><li>it two objects are <code>NULL</code> return &quot;0&quot;</li> <li>if first object is <code>NULL</code>, return &quot;-1&quot;</li> <li>if second object is <code>NULL</code>, return &quot;+1&quot;</li></ul> <p>There is actually a recomendation to inherit from <code>Comparer&lt;T&gt;</code> base class
instead of implementing the interface from zero (because it also implements
non-generic <code>IComparer</code>, which makes it easier for our class).</p> <p>Comparers are good candidates for singletons.</p> <p>A good comparer should be deterministic and the reuslt should not depend on the
input order. For example, if a class has 2 properties and our comparer sorts
them by one of these properties, it might happen that two instances will be
considered equal when their second property has different values. So, our
comparer should actually also look at the value of second property when first
property values are equal.</p> <p>Writing comparers for non-sealed classes is problematic, mostly due to the
problem outlined in previous paragraph. The result of sorting will depend from
order of input elements since the comparer does not know anything about the
inheriting instances (unles it actually does). There is no real solution for
this issue.</p> <p><code>Comparer&lt;T&gt;.Default</code> every type can use the default comparer, which uses the
T's <code>IComparer&lt;T&gt;</code> implementation (or <code>IComparer</code> if generic one is missing).
What if both are missing? Exception?</p> <p><code>StringComparer</code> is a static class that has 6 variosu comparers for strings
(implements <code>IComparer</code> and <code>IEqualityComparer</code>).</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/programming/dotnet/equality.html" class="prev">
        Equality
      </a></span> <span class="next"><a href="/programming/dotnet/generic-host.html">
        .NET Generic Host
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/7/2022, 8:33:51 AM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ac430b79.js" defer></script><script src="/assets/js/2.189ac7f1.js" defer></script><script src="/assets/js/58.d813e503.js" defer></script>
  </body>
</html>
