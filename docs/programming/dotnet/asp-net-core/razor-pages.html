<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Razor Pages | Marcin Jahn | Technology Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Razor Pages in ASP.NET Core">
    <meta property="og:url" content="/programming/dotnet/asp-net-core/razor-pages.html">
    <meta property="og:site_name" content="Marcin Jahn | Technology Notebook">
    <meta property="og:title" content="Razor Pages">
    <meta property="og:description" content="Razor Pages in ASP.NET Core">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Technology Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="white">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.efb9a866.css" as="style"><link rel="preload" href="/assets/js/app.cb15cb0e.js" as="script"><link rel="preload" href="/assets/js/2.a4e811d8.js" as="script"><link rel="preload" href="/assets/js/52.68c42b24.js" as="script"><link rel="prefetch" href="/assets/js/10.bb2f215b.js"><link rel="prefetch" href="/assets/js/100.a6c9a3ba.js"><link rel="prefetch" href="/assets/js/101.c12a3083.js"><link rel="prefetch" href="/assets/js/102.f0434906.js"><link rel="prefetch" href="/assets/js/103.f64820f7.js"><link rel="prefetch" href="/assets/js/104.dbbb44ce.js"><link rel="prefetch" href="/assets/js/105.291fa17f.js"><link rel="prefetch" href="/assets/js/106.97431274.js"><link rel="prefetch" href="/assets/js/107.5b1132f7.js"><link rel="prefetch" href="/assets/js/108.8005b8a5.js"><link rel="prefetch" href="/assets/js/109.086898dc.js"><link rel="prefetch" href="/assets/js/11.940b7d97.js"><link rel="prefetch" href="/assets/js/110.95d38c5a.js"><link rel="prefetch" href="/assets/js/111.e537356f.js"><link rel="prefetch" href="/assets/js/12.8831c392.js"><link rel="prefetch" href="/assets/js/13.d7136b9d.js"><link rel="prefetch" href="/assets/js/14.6f54b2fc.js"><link rel="prefetch" href="/assets/js/15.159444b3.js"><link rel="prefetch" href="/assets/js/16.f38eec12.js"><link rel="prefetch" href="/assets/js/17.0f029f7e.js"><link rel="prefetch" href="/assets/js/18.dea0030e.js"><link rel="prefetch" href="/assets/js/19.d8795634.js"><link rel="prefetch" href="/assets/js/20.79428b20.js"><link rel="prefetch" href="/assets/js/21.3c19d81c.js"><link rel="prefetch" href="/assets/js/22.5106d095.js"><link rel="prefetch" href="/assets/js/23.ce213942.js"><link rel="prefetch" href="/assets/js/24.4fcc4a95.js"><link rel="prefetch" href="/assets/js/25.a1221db6.js"><link rel="prefetch" href="/assets/js/26.6496f40e.js"><link rel="prefetch" href="/assets/js/27.5287d41a.js"><link rel="prefetch" href="/assets/js/28.95018bd5.js"><link rel="prefetch" href="/assets/js/29.9d377158.js"><link rel="prefetch" href="/assets/js/3.c6582b6f.js"><link rel="prefetch" href="/assets/js/30.1f83e3ff.js"><link rel="prefetch" href="/assets/js/31.26c75d2a.js"><link rel="prefetch" href="/assets/js/32.4d2520c8.js"><link rel="prefetch" href="/assets/js/33.b5894bbc.js"><link rel="prefetch" href="/assets/js/34.bd842c98.js"><link rel="prefetch" href="/assets/js/35.4aa86e02.js"><link rel="prefetch" href="/assets/js/36.8b9b0284.js"><link rel="prefetch" href="/assets/js/37.d35b9f3e.js"><link rel="prefetch" href="/assets/js/38.9b9c4bf7.js"><link rel="prefetch" href="/assets/js/39.9e0e8781.js"><link rel="prefetch" href="/assets/js/4.36bfda97.js"><link rel="prefetch" href="/assets/js/40.a29d4048.js"><link rel="prefetch" href="/assets/js/41.6bc9fe88.js"><link rel="prefetch" href="/assets/js/42.f8576729.js"><link rel="prefetch" href="/assets/js/43.3ca1ff5e.js"><link rel="prefetch" href="/assets/js/44.f1a4516f.js"><link rel="prefetch" href="/assets/js/45.4a8ac055.js"><link rel="prefetch" href="/assets/js/46.839723c0.js"><link rel="prefetch" href="/assets/js/47.265c2f1a.js"><link rel="prefetch" href="/assets/js/48.5016bdc7.js"><link rel="prefetch" href="/assets/js/49.4c761f1d.js"><link rel="prefetch" href="/assets/js/5.11ed6f82.js"><link rel="prefetch" href="/assets/js/50.246bc843.js"><link rel="prefetch" href="/assets/js/51.5ea94cf4.js"><link rel="prefetch" href="/assets/js/53.bbd04171.js"><link rel="prefetch" href="/assets/js/54.5a597e12.js"><link rel="prefetch" href="/assets/js/55.b2c9de2e.js"><link rel="prefetch" href="/assets/js/56.216f25ec.js"><link rel="prefetch" href="/assets/js/57.1530cd2e.js"><link rel="prefetch" href="/assets/js/58.b96b20b7.js"><link rel="prefetch" href="/assets/js/59.ad07dcf7.js"><link rel="prefetch" href="/assets/js/6.0e194db1.js"><link rel="prefetch" href="/assets/js/60.2ba7818d.js"><link rel="prefetch" href="/assets/js/61.a5be4b08.js"><link rel="prefetch" href="/assets/js/62.97dbfa96.js"><link rel="prefetch" href="/assets/js/63.873ce62b.js"><link rel="prefetch" href="/assets/js/64.a23510e1.js"><link rel="prefetch" href="/assets/js/65.87a0f3fb.js"><link rel="prefetch" href="/assets/js/66.4465f1d0.js"><link rel="prefetch" href="/assets/js/67.caa76145.js"><link rel="prefetch" href="/assets/js/68.9c170153.js"><link rel="prefetch" href="/assets/js/69.465a6f86.js"><link rel="prefetch" href="/assets/js/7.077b557b.js"><link rel="prefetch" href="/assets/js/70.e78ce0c2.js"><link rel="prefetch" href="/assets/js/71.02a299a7.js"><link rel="prefetch" href="/assets/js/72.d8f8aed7.js"><link rel="prefetch" href="/assets/js/73.2995175f.js"><link rel="prefetch" href="/assets/js/74.63e5b993.js"><link rel="prefetch" href="/assets/js/75.fd6dd7e3.js"><link rel="prefetch" href="/assets/js/76.4818349c.js"><link rel="prefetch" href="/assets/js/77.fea59407.js"><link rel="prefetch" href="/assets/js/78.4c187a76.js"><link rel="prefetch" href="/assets/js/79.8046a510.js"><link rel="prefetch" href="/assets/js/8.49031e18.js"><link rel="prefetch" href="/assets/js/80.fa95cca8.js"><link rel="prefetch" href="/assets/js/81.8d15300e.js"><link rel="prefetch" href="/assets/js/82.0eebfa2f.js"><link rel="prefetch" href="/assets/js/83.3aecd279.js"><link rel="prefetch" href="/assets/js/84.74350192.js"><link rel="prefetch" href="/assets/js/85.8f97656c.js"><link rel="prefetch" href="/assets/js/86.89ad5c9b.js"><link rel="prefetch" href="/assets/js/87.7e61942a.js"><link rel="prefetch" href="/assets/js/88.13ab4fdc.js"><link rel="prefetch" href="/assets/js/89.9ae6824c.js"><link rel="prefetch" href="/assets/js/9.8fc05d10.js"><link rel="prefetch" href="/assets/js/90.aa7a5a6c.js"><link rel="prefetch" href="/assets/js/91.6b37a7d4.js"><link rel="prefetch" href="/assets/js/92.9e18ce5b.js"><link rel="prefetch" href="/assets/js/93.7b53a7bc.js"><link rel="prefetch" href="/assets/js/94.fe9930a5.js"><link rel="prefetch" href="/assets/js/95.6ff018ef.js"><link rel="prefetch" href="/assets/js/96.2b86f1b6.js"><link rel="prefetch" href="/assets/js/97.b7b7f9a0.js"><link rel="prefetch" href="/assets/js/98.25d2c3f1.js"><link rel="prefetch" href="/assets/js/99.340e6677.js">
    <link rel="stylesheet" href="/assets/css/0.styles.efb9a866.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Technology Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/dev-tools/" class="nav-link">
  Tools and Infrastructure
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/meta/" class="nav-link">
  Meta
</a></div> <span class="external-services" data-v-6c2342f8><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-f9b87572 data-v-6c2342f8><img src="/img/linkedin.webp" data-v-f9b87572></a><a target="_blank" href="https://github.com/marcinjahn" data-v-f9b87572 data-v-6c2342f8><img src="/img/github.webp" data-v-f9b87572></a></span> <a href="https://github.com/marcinjahn/technology-notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code on GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>.NET</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/dotnet/http-client.html" class="sidebar-link">HTTPClient</a></li><li><a href="/programming/dotnet/async.html" class="sidebar-link">Async</a></li><li><a href="/programming/dotnet/equality.html" class="sidebar-link">Equality</a></li><li><a href="/programming/dotnet/comparisons.html" class="sidebar-link">Comparisons</a></li><li><a href="/programming/dotnet/generic-host.html" class="sidebar-link">.NET Generic Host</a></li><li><a href="/programming/dotnet/logging.html" class="sidebar-link">Logging</a></li><li><a href="/programming/dotnet/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/programming/dotnet/records.html" class="sidebar-link">Records</a></li><li><a href="/programming/dotnet/entity-framework.html" class="sidebar-link">Entity Framework</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>ASP.NET Core</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/dotnet/asp-net-core/overview.html" class="sidebar-link">Overview and Middleware</a></li><li><a href="/programming/dotnet/asp-net-core/razor-pages.html" aria-current="page" class="active sidebar-link">Razor Pages</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/dotnet/asp-net-core/razor-pages.html#mvc" class="sidebar-link">MVC</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/asp-net-core/razor-pages.html#pagemodel" class="sidebar-link">PageModel</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/asp-net-core/razor-pages.html#url" class="sidebar-link">URL</a></li><li class="sidebar-sub-header"><a href="/programming/dotnet/asp-net-core/razor-pages.html#layouts" class="sidebar-link">Layouts</a></li></ul></li><li><a href="/programming/dotnet/asp-net-core/routing.html" class="sidebar-link">Routing</a></li><li><a href="/programming/dotnet/asp-net-core/validation.html" class="sidebar-link">Validation</a></li><li><a href="/programming/dotnet/asp-net-core/tips.html" class="sidebar-link">Tips</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Functional Programming</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="razor-pages"><a href="#razor-pages" class="header-anchor">#</a> Razor Pages</h1> <p>It's a framework for building multiple-pages based websites generated on the
server-side.</p> <div class="custom-block tip"><p class="custom-block-title">Origin</p> <p>Razor Pages model was introduced in ASP.NET Core 2.0</p></div> <p>The flow is as follows:</p> <ol><li>A Razor Page is selected by the routing middleware.</li> <li>The <code>PageModel</code> associated with the page is executed (e.g. <code>OnGet</code>).</li> <li>The view is rendered using the data from the <code>PageModel</code>.</li></ol> <p>Pages are stored in the <code>.cshtml</code> files within the <code>Pages</code> directory of a
project (by default). <strong>Razor</strong> is a templating syntax.</p> <p>Here's an example of <code>Pages/Privacy.cshtml</code>:</p> <div class="language-cshtml extra-class"><pre class="language-cshtml"><code><span class="token directive"><span class="token keyword">@page</span> <span class="token csharp language-csharp"><span class="token comment">// Indicates that this is a Razor Page</span></span></span>
<span class="token directive"><span class="token keyword">@model</span> <span class="token csharp language-csharp">PrivacyModel <span class="token comment">// Links to a model file (Privacy.cshtml.cs)</span></span></span>
<span class="token block"><span class="token keyword">@</span><span class="token csharp language-csharp"><span class="token punctuation">{</span>
    <span class="token comment">// C# code that is not part of the result HTML</span>
    ViewData<span class="token punctuation">[</span><span class="token string">&quot;Title&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Privacy Policy&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span>

<span class="token comment">&lt;!-- Result HTML --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token value variable"><span class="token keyword">@</span><span class="token csharp language-csharp">ViewData<span class="token punctuation">[</span><span class="token string">&quot;Title&quot;</span><span class="token punctuation">]</span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Use this page to detail your site's privacy policy.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The file name matches the URL path. <code>localhost/Privacy</code> will run the
<code>Pages/Privacy.cshtml</code> page.</p> <p>Middleware setup:</p> <div class="language-cs extra-class"><pre class="language-cs"><code>builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddRazorPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// register services in the IoC container</span>

<span class="token comment">// ...</span>

app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// selects the Razor Page</span>
app<span class="token punctuation">.</span><span class="token function">MapRazorPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// executes the selected Razor Page</span>
</code></pre></div><h2 id="mvc"><a href="#mvc" class="header-anchor">#</a> MVC</h2> <p>The following components take up roles in the MVC paradigm:</p> <ul><li><strong>Model</strong> - the logic and data provided by our business logic (like some
<code>WeatherProviderService</code>)</li> <li><strong>View</strong> - the Razor Page template (the <code>.cshtml</code> file)</li> <li><strong>Controller</strong> - the <code>.cshtml.cs</code> file containing page's logic. It interacts
with the <em>Model</em> and invokes the <em>View</em> (or returns redirect/error)</li></ul> <div class="custom-block warning"><p class="custom-block-title">ASP.NET Core MVC</p> <p><strong>MVC</strong> is a generic pattern used in many languages/frameworks. <strong>ASP.NET Core
MVC</strong> is an example of an implementation of the MVC pattern that uses actions
and controllers.</p> <p>Razor Pages builds on top of the ASP.NET Core MVC, using it under the hood.</p> <p>Before Razor Pages, developers would use the MVC framework directly.</p></div> <h3 id="razor-pages-vs-asp-net-core-mvc"><a href="#razor-pages-vs-asp-net-core-mvc" class="header-anchor">#</a> Razor Pages vs ASP.NET Core MVC</h3> <p>We can build server-side websites with either Razor Pages or ASP.NET Core MVC
directly. In the latter case, we'd have <code>Controller</code>s and action methods within
it, just like with the ASP.NET Core Web APIs.</p> <p>The controller would construct a view model and return a view based on it:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token return-type class-name">ActionResult</span> <span class="token function">GetToDos</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token class-name"><span class="token keyword">var</span></span> items <span class="token operator">=</span> _todoProvider<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token class-name"><span class="token keyword">var</span></span> viewModel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TodoViewModel</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">View</span><span class="token punctuation">(</span>viewModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In contrast, int the Razor Pages approach, the <code>PageModel</code> is both the
<em>Controller</em> and the <em>View Model</em>.</p> <p>The two approaches are quite similar, but some of the advantages of Razor Pages
are:</p> <ul><li>each page is a separate set of files - in MVC, actions of some domain are all
in the same controller (by convention), making it large sometimes.</li> <li>Razor Pages has a convention of placing related things close to each other. In
MVC all controllers are in one <code>Controllers</code> directory, all view models are in
the <code>View Models</code> directory, and all the views are in teh <code>Views</code> directory.</li> <li>pages that are static are easier/shorter to code using Razor Pages. In MVC
we'd have to add an action that just returns the view (boilerplate code).</li></ul> <p>Both approaches are pretty similar. Razor Pages should be the preference though.</p> <div class="custom-block tip"><p class="custom-block-title">Mix</p> <p>Razor Pages and MVC approaches can be used together in one application.</p></div> <h2 id="pagemodel"><a href="#pagemodel" class="header-anchor">#</a> PageModel</h2> <p>Complex logic for a page should be handled in a the <code>PageModel</code> (a base class
for page models). We could use it to load data from some DB, etc. It is a &quot;code
behind&quot; file, similar to WPF.</p> <div class="custom-block tip"><p class="custom-block-title">Controller</p> <p><code>PageModel</code> name is unfortunate. It's a <em>Controller</em> in the MVC paradigm.</p></div> <p>The <code>PageModel</code> is executed first, then the page generated.</p> <p>An example:</p> <div class="language-cs extra-class"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrivacyModel</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PageModel</span></span> <span class="token comment">//base class</span>
<span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ILogger<span class="token punctuation">&lt;</span>PrivacyModel<span class="token punctuation">&gt;</span></span> _logger<span class="token punctuation">;</span>

  <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">BindProperty</span></span><span class="token punctuation">]</span>
  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> SomeData <span class="token punctuation">{</span><span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">// data bound from a request</span>
  <span class="token comment">// GET requests do not bind data to properties by default.</span>
  <span class="token comment">// To change that use [BindProperty(SupportsGet = true)]</span>

  <span class="token keyword">public</span> <span class="token function">PrivacyModel</span><span class="token punctuation">(</span><span class="token class-name">ILogger<span class="token punctuation">&lt;</span>PrivacyModel<span class="token punctuation">&gt;</span></span> logger<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      _logger <span class="token operator">=</span> logger<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
      <span class="token comment">// void, Task or PageResult return type means that HTML should be generated</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// max would be bound from the request</span>
  <span class="token keyword">public</span> <span class="token return-type class-name">IActionResult</span> <span class="token function">OnPost</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> max<span class="token punctuation">)</span> 
  <span class="token punctuation">{</span>
      <span class="token comment">// IActionResult can return other things: JSONs, redirects, errors, etc.</span>

    <span class="token comment">// when binding data (to parameters of properties), validity should be checked</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ModelState<span class="token punctuation">.</span>IsValid<span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">RedirectToPage</span><span class="token punctuation">(</span><span class="token string">&quot;./Index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// do something...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">Overloading</p> <p>A <code>PageModel</code> cannot have multiple methods with the same names (like <code>OnGet</code>).</p></div> <p>The properties of the model are accessible to the <code>.cshtml</code> view making it
possible to render dynamic data from the model. That data, exposed by the
<code>PageModel</code> may be called a <em>View Model</em>.</p> <h3 id="binding"><a href="#binding" class="header-anchor">#</a> Binding</h3> <p>Data is bound from:</p> <ol><li>form</li> <li>path</li> <li>query</li> <li>headers?</li></ol> <p>By default, the framework looks through all of these sources for each parameter
to bind. We can also specify the source explicitly:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">BindProperty</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromHeader</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>We can also use it on the method parameters.</p> <div class="custom-block tip"><p class="custom-block-title">JSON</p> <p>To bind the JSON data from body, we have to use <code>FromBody</code>. Without it, data
will not be bound!</p></div> <div class="custom-block tip"><p class="custom-block-title">ModelBinder</p> <p>The <code>ModelBinderAttribute</code> may be used to have a total control over binding. In
example, we can change the name of value to be looked for in the request
compared to the name in our code.</p></div> <h4 id="class"><a href="#class" class="header-anchor">#</a> Class</h4> <p>If our Page has a few properties to bind from a request, we can introduce a
separate class that encompasses that data:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">class</span> <span class="token class-name">MyPage</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PageModel</span></span>
<span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">BindProperty</span></span><span class="token punctuation">]</span>
  <span class="token keyword">public</span> <span class="token return-type class-name">InputData</span> InputData <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">InputData</span> 
<span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Category <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Product <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Color <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="validation"><a href="#validation" class="header-anchor">#</a> Validation</h4> <p>Go to <a href="/programming/dotnet/asp-net-core/validation.html">Validation</a>;</p> <h2 id="url"><a href="#url" class="header-anchor">#</a> URL</h2> <p>By default, the page's file path in the project defines the URL that would
execute that page. E.g. and URL <code>/products/list</code> would execute the page at
<code>Pages/Products/List.cshtml</code>.</p> <h3 id="handler"><a href="#handler" class="header-anchor">#</a> Handler</h3> <p>A single <code>PageModel</code> class may contain multiple methods to handle requests. The
name of the method should contain the HTTP method and, optionally, some
additional suffix. If we have multiple methods for the same HTTP method, but
with different suffixes, the selected suffix needs to be provided as a <code>handler</code>
parameter.</p> <p>Method name template: <code>On{verb}{handler}[Async]</code>.</p> <p>The <code>handler</code> should be included in the URL template for our Page.</p> <div class="custom-block tip"><p class="custom-block-title">Uncovered Cases</p> <p>If a request comes in that doesn't match any method on <code>PageModel</code>, the view is
generated, but no logic is invoked on the <code>PageModel</code>.</p> <p>An exception from this rule is the HEAD verb. If <code>OnHead</code> is not defined,
<code>OnGet</code> will be executed.</p></div> <h2 id="layouts"><a href="#layouts" class="header-anchor">#</a> Layouts</h2> <p>Razor Pages has a concept og <strong>layouts</strong>, which is similar to components in SPA
frameworks. It avoids duplication of common parts of web pages. Layouts can be
found in the <code>Pages/Shared</code> directory.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/programming/dotnet/asp-net-core/overview.html" class="prev">
        Overview and Middleware
      </a></span> <span class="next"><a href="/programming/dotnet/asp-net-core/routing.html">
        Routing
      </a>
      →
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/7/2022, 7:29:54 AM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.cb15cb0e.js" defer></script><script src="/assets/js/2.a4e811d8.js" defer></script><script src="/assets/js/52.68c42b24.js" defer></script>
  </body>
</html>
