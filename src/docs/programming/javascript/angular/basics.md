# Angular

Angular is an SPA framework, once very popular, nowadays rather losing interest
year by year. It has its legacy though, I think it did a pretty good job of
popularizing TypeScript. Interestingly, it uses TypeScripts
[Decorators](https://www.typescriptlang.org/docs/handbook/decorators.html)
feature, which is experiemntal since as long as I remember (and I started with
Angular 2, and we're at Angular 14 at the moment I'm writing this). I wonder if
it's ever going to go out of the experimental phase, it's a bit weird.

## Installation

Go to [https://angular.io/cli](https://angular.io/cli) and follow the
instructions.

## Basic Commands

- `ng new my-app` - creates a new app (togethre with its directory)
- `ng serve -o` - local development server, `-o` opens the browser automatically
  at `localhost:4200`
- `ng generate component whatever` - or simly `ng g c whatever` - generates a
  new component.

## Components

Usually we have the `AppComponent`, which is the root of the app. Each component
is split into 4 files:

- HTML
- CSS
- TypeScript
- spec.ts

Usually, each component has its own folder. We store them in the `app` folder
(that is pregenerated by `ng new`) or some subfolders of it.

Here's the simplest component:

```ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent {

}
```

Angular promotes the separation of things into different files, opposed to
frameworks like Vue.js. However, we are able to have HTML/CSS in the `ts` file
simply by replacing `templateUrl`/`styleUrls` with `template`/`styles` and
providing the HTML there as a string.

### selector

The selector is usually prefixed with `app-` to keep us from overwriting HTML
tags.

The `selector` does not have to be an HTML tag. It can also be an attribute or a
class:

- `selector: 'app-root'` - it will match HTML elements `<app-root></app-root>`.
- `selector: '[app-root]'` - it will match any HTML element with that attribue,
  e.g. `<div app-root></div>`.
- `selector: '.app-root'` - it will match any HTML element that has the
  `app-root` class on it, e.g. `<div class="app-root"></div>`.

The `selector` property is actually not just the way to name the component. It
is a specifier of where to render it. It's kind of similar to Kubernetes'
Service object and its `selector`, which specifies where to send the traffic. I
know that this analogy is a bit of a stretch. 

Most often we just specify our own tag for the component.

### Data Binding

#### Output

We can output data with: 

```html
{{ something }}
```

The variable to output needs to exist on the component:

```ts
@Component({
    selector: 'app-component',
    templateUrl: './app.component.html'
})
export class AppComponent {
    something = 10;
}s
```

::: tip
Inside of `{{}}` you can actually have any JS/TS expression, like a call to some
method.

It can't contain `if` condition though.
:::

#### Property Binding

```html
<button [disabled]="!allowNewServer">Add Server</button>
```

The `disabled` property of a button is controlled by the `allowNewServer`
property on our component:

```ts
@Component({
  selector: 'app-servers',
  templateUrl: './servers.component.html',
  styleUrls: ['./servers.component.css']
})
export class ServersComponent implements OnInit {
  allowNewServer = false;
}
```

#### Events

We can bind to events with `(event)="expression"`

We can also bind in two ways with the **Two-way binding**: `[(ngModel)]="data"`.
It's useful in forms.

## Modules

By default, the app has the `AppModule` module. We can also create more of them.
A module is like a package that bundles things together. Wit simple apps, the
default `AppModule` is enough. Each component needs to be registered in some
module (in the `declarations` array).

::: tip ng generate
`ng generate component` automatically adds the new component to the module's
`declarations`.

How does it know which module to add it to?
:::


We can `import` other modules into our modules. This way, in the components we
can use some features provided by these modules.